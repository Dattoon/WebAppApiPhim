2025-05-29 13:21:49.049 +07:00 [INF] SyncMoviesService is starting.
2025-05-29 13:21:49.149 +07:00 [INF] CacheCleanupService is starting.
2025-05-29 13:21:53.631 +07:00 [WRN] Failed to determine the https port for redirect.
2025-05-29 13:22:49.156 +07:00 [INF] Starting safe movie synchronization...
2025-05-29 13:22:49.233 +07:00 [INF] Calling API endpoint: phim-moi/v1?page=1&limit=20
2025-05-29 13:22:50.373 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '1060.1005'
2025-05-29 13:22:50.393 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":"2272f36ac8ee821bb87bfff301370308","name":"Ch\u1ecb D\u00e2u","slug":"chi-dau","year":"2024","loai_phim":"Phim l\u1ebb","quoc_gia":"Vi\u1ec7t Nam","modified":"2025-05-29 05:32:07"},{"id":"039b28c0e2a52524890797e9e0f29899","name":"Thanh Kh\u00e2m Ch\u00ed","slug":"thanh-kham-chi","year":"2025","loai_phim":"Phim b\u1ed9, Phim \u0111ang chi\u1ebfu","quoc_gia":"Trung Qu\u1ed1c","modified":"2025-05-29 04:28:59"},{"id":"5e13d1e382d895a5a58b40173eb7abfd","name":"Tri\u00eau D\u01b0\u01a1n...
2025-05-29 13:22:50.398 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 13:22:50.401 +07:00 [INF] Successfully cached 20 movies for page 1
2025-05-29 13:22:50.701 +07:00 [WRN] Failed to process movie: doraemon-nobita-va-chuyen-phieu-luu-vao-xu-quy
System.InvalidOperationException: The instance of entity type 'CachedMovie' cannot be tracked because another instance with the same key value for {'Slug'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.ThrowIdentityConflict(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry, Boolean updateDuplicate)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.NullableKeyIdentityMap`1.Add(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.StartTracking(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState oldState, EntityState newState, Boolean acceptChanges, Boolean modifyProperties)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState entityState, Boolean acceptChanges, Boolean modifyProperties, Nullable`1 forceStateWhenUnknownKey, Nullable`1 fallbackState)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.PaintAction(EntityEntryGraphNode`1 node)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityEntryGraphIterator.TraverseGraph[TState](EntityEntryGraphNode`1 node, Func`2 handleNode)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.AttachGraph(InternalEntityEntry rootEntry, EntityState targetState, EntityState storeGeneratedWithKeySetTargetState, Boolean forceStateWhenUnknownKey)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.SetEntityState(InternalEntityEntry entry, EntityState entityState)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.Add(TEntity entity)
   at WebAppApiPhim.BackgroundServices.SyncMoviesService.SafeSyncMovies(CancellationToken stoppingToken) in C:\D\Leaning\API\APICode\WebAppApiPhim\Services\SyncMoviesService.cs:line 105
2025-05-29 13:22:50.978 +07:00 [ERR] Failed executing DbCommand (74ms) [Parameters=[@p0='?' (Size = 100), @p1='?' (Size = 2000), @p2='?' (Size = 100), @p3='?' (Size = 50), @p4='?' (Size = 50), @p5='?' (DbType = DateTime2), @p6='?' (Size = 1000), @p7='?' (DbType = Double), @p8='?' (Size = 4000), @p9='?' (Size = 50), @p10='?' (Size = 1000), @p11='?' (Size = 500), @p12='?' (Size = 50), @p13='?' (Size = 1000), @p14='?' (DbType = Int64), @p15='?' (Size = 4), @p16='?' (Size = 100), @p17='?' (Size = 2000), @p18='?' (Size = 100), @p19='?' (Size = 50), @p20='?' (Size = 50), @p21='?' (DbType = DateTime2), @p22='?' (Size = 1000), @p23='?' (DbType = Double), @p24='?' (Size = 4000), @p25='?' (Size = 50), @p26='?' (Size = 1000), @p27='?' (Size = 500), @p28='?' (Size = 50), @p29='?' (Size = 1000), @p30='?' (DbType = Int64), @p31='?' (Size = 4), @p32='?' (Size = 100), @p33='?' (Size = 2000), @p34='?' (Size = 100), @p35='?' (Size = 50), @p36='?' (Size = 50), @p37='?' (DbType = DateTime2), @p38='?' (Size = 1000), @p39='?' (DbType = Double), @p40='?' (Size = 4000), @p41='?' (Size = 50), @p42='?' (Size = 1000), @p43='?' (Size = 500), @p44='?' (Size = 50), @p45='?' (Size = 1000), @p46='?' (DbType = Int64), @p47='?' (Size = 4), @p48='?' (Size = 100), @p49='?' (Size = 2000), @p50='?' (Size = 100), @p51='?' (Size = 50), @p52='?' (Size = 50), @p53='?' (DbType = DateTime2), @p54='?' (Size = 1000), @p55='?' (DbType = Double), @p56='?' (Size = 4000), @p57='?' (Size = 50), @p58='?' (Size = 1000), @p59='?' (Size = 500), @p60='?' (Size = 50), @p61='?' (Size = 1000), @p62='?' (DbType = Int64), @p63='?' (Size = 4), @p64='?' (Size = 100), @p65='?' (Size = 2000), @p66='?' (Size = 100), @p67='?' (Size = 50), @p68='?' (Size = 50), @p69='?' (DbType = DateTime2), @p70='?' (Size = 1000), @p71='?' (DbType = Double), @p72='?' (Size = 4000), @p73='?' (Size = 50), @p74='?' (Size = 1000), @p75='?' (Size = 500), @p76='?' (Size = 50), @p77='?' (Size = 1000), @p78='?' (DbType = Int64), @p79='?' (Size = 4), @p80='?' (Size = 100), @p81='?' (Size = 2000), @p82='?' (Size = 100), @p83='?' (Size = 50), @p84='?' (Size = 50), @p85='?' (DbType = DateTime2), @p86='?' (Size = 1000), @p87='?' (DbType = Double), @p88='?' (Size = 4000), @p89='?' (Size = 50), @p90='?' (Size = 1000), @p91='?' (Size = 500), @p92='?' (Size = 50), @p93='?' (Size = 1000), @p94='?' (DbType = Int64), @p95='?' (Size = 4), @p96='?' (Size = 100), @p97='?' (Size = 2000), @p98='?' (Size = 100), @p99='?' (Size = 50), @p100='?' (Size = 50), @p101='?' (DbType = DateTime2), @p102='?' (Size = 1000), @p103='?' (DbType = Double), @p104='?' (Size = 4000), @p105='?' (Size = 50), @p106='?' (Size = 1000), @p107='?' (Size = 500), @p108='?' (Size = 50), @p109='?' (Size = 1000), @p110='?' (DbType = Int64), @p111='?' (Size = 4), @p112='?' (Size = 100), @p113='?' (Size = 2000), @p114='?' (Size = 100), @p115='?' (Size = 50), @p116='?' (Size = 50), @p117='?' (DbType = DateTime2), @p118='?' (Size = 1000), @p119='?' (DbType = Double), @p120='?' (Size = 4000), @p121='?' (Size = 50), @p122='?' (Size = 1000), @p123='?' (Size = 500), @p124='?' (Size = 50), @p125='?' (Size = 1000), @p126='?' (DbType = Int64), @p127='?' (Size = 4), @p128='?' (Size = 100), @p129='?' (Size = 2000), @p130='?' (Size = 100), @p131='?' (Size = 50), @p132='?' (Size = 50), @p133='?' (DbType = DateTime2), @p134='?' (Size = 1000), @p135='?' (DbType = Double), @p136='?' (Size = 4000), @p137='?' (Size = 50), @p138='?' (Size = 1000), @p139='?' (Size = 500), @p140='?' (Size = 50), @p141='?' (Size = 1000), @p142='?' (DbType = Int64), @p143='?' (Size = 4), @p144='?' (Size = 100), @p145='?' (Size = 2000), @p146='?' (Size = 100), @p147='?' (Size = 50), @p148='?' (Size = 50), @p149='?' (DbType = DateTime2), @p150='?' (Size = 1000), @p151='?' (DbType = Double), @p152='?' (Size = 4000), @p153='?' (Size = 50), @p154='?' (Size = 1000), @p155='?' (Size = 500), @p156='?' (Size = 50), @p157='?' (Size = 1000), @p158='?' (DbType = Int64), @p159='?' (Size = 4), @p160='?' (Size = 100), @p161='?' (Size = 2000), @p162='?' (Size = 100), @p163='?' (Size = 50), @p164='?' (Size = 50), @p165='?' (DbType = DateTime2), @p166='?' (Size = 1000), @p167='?' (DbType = Double), @p168='?' (Size = 4000), @p169='?' (Size = 50), @p170='?' (Size = 1000), @p171='?' (Size = 500), @p172='?' (Size = 50), @p173='?' (Size = 1000), @p174='?' (DbType = Int64), @p175='?' (Size = 4), @p176='?' (Size = 100), @p177='?' (Size = 2000), @p178='?' (Size = 100), @p179='?' (Size = 50), @p180='?' (Size = 50), @p181='?' (DbType = DateTime2), @p182='?' (Size = 1000), @p183='?' (DbType = Double), @p184='?' (Size = 4000), @p185='?' (Size = 50), @p186='?' (Size = 1000), @p187='?' (Size = 500), @p188='?' (Size = 50), @p189='?' (Size = 1000), @p190='?' (DbType = Int64), @p191='?' (Size = 4), @p192='?' (Size = 100), @p193='?' (Size = 2000), @p194='?' (Size = 100), @p195='?' (Size = 50), @p196='?' (Size = 50), @p197='?' (DbType = DateTime2), @p198='?' (Size = 1000), @p199='?' (DbType = Double), @p200='?' (Size = 4000), @p201='?' (Size = 50), @p202='?' (Size = 1000), @p203='?' (Size = 500), @p204='?' (Size = 50), @p205='?' (Size = 1000), @p206='?' (DbType = Int64), @p207='?' (Size = 4), @p208='?' (Size = 100), @p209='?' (Size = 2000), @p210='?' (Size = 100), @p211='?' (Size = 50), @p212='?' (Size = 50), @p213='?' (DbType = DateTime2), @p214='?' (Size = 1000), @p215='?' (DbType = Double), @p216='?' (Size = 4000), @p217='?' (Size = 50), @p218='?' (Size = 1000), @p219='?' (Size = 500), @p220='?' (Size = 50), @p221='?' (Size = 1000), @p222='?' (DbType = Int64), @p223='?' (Size = 4)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [CachedMovies] ([Slug], [Description], [Director], [Duration], [Language], [LastUpdated], [PosterUrl], [Rating], [RawData], [Resolution], [ThumbUrl], [Title], [TmdbId], [TrailerUrl], [Views], [Year])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15),
(@p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31),
(@p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47),
(@p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63),
(@p64, @p65, @p66, @p67, @p68, @p69, @p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79),
(@p80, @p81, @p82, @p83, @p84, @p85, @p86, @p87, @p88, @p89, @p90, @p91, @p92, @p93, @p94, @p95),
(@p96, @p97, @p98, @p99, @p100, @p101, @p102, @p103, @p104, @p105, @p106, @p107, @p108, @p109, @p110, @p111),
(@p112, @p113, @p114, @p115, @p116, @p117, @p118, @p119, @p120, @p121, @p122, @p123, @p124, @p125, @p126, @p127),
(@p128, @p129, @p130, @p131, @p132, @p133, @p134, @p135, @p136, @p137, @p138, @p139, @p140, @p141, @p142, @p143),
(@p144, @p145, @p146, @p147, @p148, @p149, @p150, @p151, @p152, @p153, @p154, @p155, @p156, @p157, @p158, @p159),
(@p160, @p161, @p162, @p163, @p164, @p165, @p166, @p167, @p168, @p169, @p170, @p171, @p172, @p173, @p174, @p175),
(@p176, @p177, @p178, @p179, @p180, @p181, @p182, @p183, @p184, @p185, @p186, @p187, @p188, @p189, @p190, @p191),
(@p192, @p193, @p194, @p195, @p196, @p197, @p198, @p199, @p200, @p201, @p202, @p203, @p204, @p205, @p206, @p207),
(@p208, @p209, @p210, @p211, @p212, @p213, @p214, @p215, @p216, @p217, @p218, @p219, @p220, @p221, @p222, @p223);
2025-05-29 13:22:51.012 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'WebAppApiPhim.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_CachedMovies'. Cannot insert duplicate key in object 'dbo.CachedMovies'. The duplicate key value is (doraemon-nobita-va-chuyen-phieu-luu-vao-xu-quy).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:076b3b4d-b9b6-4eb9-97d8-da016d9cf9b9
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_CachedMovies'. Cannot insert duplicate key in object 'dbo.CachedMovies'. The duplicate key value is (doraemon-nobita-va-chuyen-phieu-luu-vao-xu-quy).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:076b3b4d-b9b6-4eb9-97d8-da016d9cf9b9
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-29 13:22:51.100 +07:00 [ERR] Failed to sync page 1
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_CachedMovies'. Cannot insert duplicate key in object 'dbo.CachedMovies'. The duplicate key value is (doraemon-nobita-va-chuyen-phieu-luu-vao-xu-quy).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:076b3b4d-b9b6-4eb9-97d8-da016d9cf9b9
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at WebAppApiPhim.BackgroundServices.SyncMoviesService.SafeSyncMovies(CancellationToken stoppingToken) in C:\D\Leaning\API\APICode\WebAppApiPhim\Services\SyncMoviesService.cs:line 118
2025-05-29 13:22:51.114 +07:00 [INF] Calling API endpoint: phim-moi/v1?page=2&limit=20
2025-05-29 13:22:53.730 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '2614.6717'
2025-05-29 13:22:53.736 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":"8ac95544093983249829baf38f28cb25","name":"Khom L\u01b0ng (Phong Ho\u1ea3 H\u1ed3ng Ti\u00eau)","slug":"khom-lung","year":"2025","loai_phim":"Phim b\u1ed9, Phim \u0111ang chi\u1ebfu","quoc_gia":"Trung Qu\u1ed1c","modified":"2025-05-28 19:08:08"},{"id":"be068d693cfefdf2afe808d90e2a9031","name":"T\u00e0ng H\u1ea3i Truy\u1ec7n","slug":"tang-hai-truyen","year":"2025","loai_phim":"Phim b\u1ed9, Phim \u0111ang chi\u1ebfu","quoc_gia":"Trung Qu\u1ed1c","modified":"2025-05-28 19:07:44"},{"...
2025-05-29 13:22:53.738 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 13:22:53.740 +07:00 [INF] Successfully cached 20 movies for page 2
2025-05-29 13:22:53.845 +07:00 [ERR] Failed executing DbCommand (45ms) [Parameters=[@p0='?' (Size = 100), @p1='?' (Size = 2000), @p2='?' (Size = 100), @p3='?' (Size = 50), @p4='?' (Size = 50), @p5='?' (DbType = DateTime2), @p6='?' (Size = 1000), @p7='?' (DbType = Double), @p8='?' (Size = 4000), @p9='?' (Size = 50), @p10='?' (Size = 1000), @p11='?' (Size = 500), @p12='?' (Size = 50), @p13='?' (Size = 1000), @p14='?' (DbType = Int64), @p15='?' (Size = 4), @p16='?' (Size = 100), @p17='?' (Size = 2000), @p18='?' (Size = 100), @p19='?' (Size = 50), @p20='?' (Size = 50), @p21='?' (DbType = DateTime2), @p22='?' (Size = 1000), @p23='?' (DbType = Double), @p24='?' (Size = 4000), @p25='?' (Size = 50), @p26='?' (Size = 1000), @p27='?' (Size = 500), @p28='?' (Size = 50), @p29='?' (Size = 1000), @p30='?' (DbType = Int64), @p31='?' (Size = 4), @p32='?' (Size = 100), @p33='?' (Size = 2000), @p34='?' (Size = 100), @p35='?' (Size = 50), @p36='?' (Size = 50), @p37='?' (DbType = DateTime2), @p38='?' (Size = 1000), @p39='?' (DbType = Double), @p40='?' (Size = 4000), @p41='?' (Size = 50), @p42='?' (Size = 1000), @p43='?' (Size = 500), @p44='?' (Size = 50), @p45='?' (Size = 1000), @p46='?' (DbType = Int64), @p47='?' (Size = 4), @p48='?' (Size = 100), @p49='?' (Size = 2000), @p50='?' (Size = 100), @p51='?' (Size = 50), @p52='?' (Size = 50), @p53='?' (DbType = DateTime2), @p54='?' (Size = 1000), @p55='?' (DbType = Double), @p56='?' (Size = 4000), @p57='?' (Size = 50), @p58='?' (Size = 1000), @p59='?' (Size = 500), @p60='?' (Size = 50), @p61='?' (Size = 1000), @p62='?' (DbType = Int64), @p63='?' (Size = 4), @p64='?' (Size = 100), @p65='?' (Size = 2000), @p66='?' (Size = 100), @p67='?' (Size = 50), @p68='?' (Size = 50), @p69='?' (DbType = DateTime2), @p70='?' (Size = 1000), @p71='?' (DbType = Double), @p72='?' (Size = 4000), @p73='?' (Size = 50), @p74='?' (Size = 1000), @p75='?' (Size = 500), @p76='?' (Size = 50), @p77='?' (Size = 1000), @p78='?' (DbType = Int64), @p79='?' (Size = 4), @p80='?' (Size = 100), @p81='?' (Size = 2000), @p82='?' (Size = 100), @p83='?' (Size = 50), @p84='?' (Size = 50), @p85='?' (DbType = DateTime2), @p86='?' (Size = 1000), @p87='?' (DbType = Double), @p88='?' (Size = 4000), @p89='?' (Size = 50), @p90='?' (Size = 1000), @p91='?' (Size = 500), @p92='?' (Size = 50), @p93='?' (Size = 1000), @p94='?' (DbType = Int64), @p95='?' (Size = 4), @p96='?' (Size = 100), @p97='?' (Size = 2000), @p98='?' (Size = 100), @p99='?' (Size = 50), @p100='?' (Size = 50), @p101='?' (DbType = DateTime2), @p102='?' (Size = 1000), @p103='?' (DbType = Double), @p104='?' (Size = 4000), @p105='?' (Size = 50), @p106='?' (Size = 1000), @p107='?' (Size = 500), @p108='?' (Size = 50), @p109='?' (Size = 1000), @p110='?' (DbType = Int64), @p111='?' (Size = 4), @p112='?' (Size = 100), @p113='?' (Size = 2000), @p114='?' (Size = 100), @p115='?' (Size = 50), @p116='?' (Size = 50), @p117='?' (DbType = DateTime2), @p118='?' (Size = 1000), @p119='?' (DbType = Double), @p120='?' (Size = 4000), @p121='?' (Size = 50), @p122='?' (Size = 1000), @p123='?' (Size = 500), @p124='?' (Size = 50), @p125='?' (Size = 1000), @p126='?' (DbType = Int64), @p127='?' (Size = 4), @p128='?' (Size = 100), @p129='?' (Size = 2000), @p130='?' (Size = 100), @p131='?' (Size = 50), @p132='?' (Size = 50), @p133='?' (DbType = DateTime2), @p134='?' (Size = 1000), @p135='?' (DbType = Double), @p136='?' (Size = 4000), @p137='?' (Size = 50), @p138='?' (Size = 1000), @p139='?' (Size = 500), @p140='?' (Size = 50), @p141='?' (Size = 1000), @p142='?' (DbType = Int64), @p143='?' (Size = 4), @p144='?' (Size = 100), @p145='?' (Size = 2000), @p146='?' (Size = 100), @p147='?' (Size = 50), @p148='?' (Size = 50), @p149='?' (DbType = DateTime2), @p150='?' (Size = 1000), @p151='?' (DbType = Double), @p152='?' (Size = 4000), @p153='?' (Size = 50), @p154='?' (Size = 1000), @p155='?' (Size = 500), @p156='?' (Size = 50), @p157='?' (Size = 1000), @p158='?' (DbType = Int64), @p159='?' (Size = 4), @p160='?' (Size = 100), @p161='?' (Size = 2000), @p162='?' (Size = 100), @p163='?' (Size = 50), @p164='?' (Size = 50), @p165='?' (DbType = DateTime2), @p166='?' (Size = 1000), @p167='?' (DbType = Double), @p168='?' (Size = 4000), @p169='?' (Size = 50), @p170='?' (Size = 1000), @p171='?' (Size = 500), @p172='?' (Size = 50), @p173='?' (Size = 1000), @p174='?' (DbType = Int64), @p175='?' (Size = 4), @p176='?' (Size = 100), @p177='?' (Size = 2000), @p178='?' (Size = 100), @p179='?' (Size = 50), @p180='?' (Size = 50), @p181='?' (DbType = DateTime2), @p182='?' (Size = 1000), @p183='?' (DbType = Double), @p184='?' (Size = 4000), @p185='?' (Size = 50), @p186='?' (Size = 1000), @p187='?' (Size = 500), @p188='?' (Size = 50), @p189='?' (Size = 1000), @p190='?' (DbType = Int64), @p191='?' (Size = 4), @p192='?' (Size = 100), @p193='?' (Size = 2000), @p194='?' (Size = 100), @p195='?' (Size = 50), @p196='?' (Size = 50), @p197='?' (DbType = DateTime2), @p198='?' (Size = 1000), @p199='?' (DbType = Double), @p200='?' (Size = 4000), @p201='?' (Size = 50), @p202='?' (Size = 1000), @p203='?' (Size = 500), @p204='?' (Size = 50), @p205='?' (Size = 1000), @p206='?' (DbType = Int64), @p207='?' (Size = 4), @p208='?' (Size = 100), @p209='?' (Size = 2000), @p210='?' (Size = 100), @p211='?' (Size = 50), @p212='?' (Size = 50), @p213='?' (DbType = DateTime2), @p214='?' (Size = 1000), @p215='?' (DbType = Double), @p216='?' (Size = 4000), @p217='?' (Size = 50), @p218='?' (Size = 1000), @p219='?' (Size = 500), @p220='?' (Size = 50), @p221='?' (Size = 1000), @p222='?' (DbType = Int64), @p223='?' (Size = 4), @p224='?' (Size = 100), @p225='?' (Size = 2000), @p226='?' (Size = 100), @p227='?' (Size = 50), @p228='?' (Size = 50), @p229='?' (DbType = DateTime2), @p230='?' (Size = 1000), @p231='?' (DbType = Double), @p232='?' (Size = 4000), @p233='?' (Size = 50), @p234='?' (Size = 1000), @p235='?' (Size = 500), @p236='?' (Size = 50), @p237='?' (Size = 1000), @p238='?' (DbType = Int64), @p239='?' (Size = 4), @p240='?' (Size = 100), @p241='?' (Size = 2000), @p242='?' (Size = 100), @p243='?' (Size = 50), @p244='?' (Size = 50), @p245='?' (DbType = DateTime2), @p246='?' (Size = 1000), @p247='?' (DbType = Double), @p248='?' (Size = 4000), @p249='?' (Size = 50), @p250='?' (Size = 1000), @p251='?' (Size = 500), @p252='?' (Size = 50), @p253='?' (Size = 1000), @p254='?' (DbType = Int64), @p255='?' (Size = 4), @p256='?' (Size = 100), @p257='?' (Size = 2000), @p258='?' (Size = 100), @p259='?' (Size = 50), @p260='?' (Size = 50), @p261='?' (DbType = DateTime2), @p262='?' (Size = 1000), @p263='?' (DbType = Double), @p264='?' (Size = 4000), @p265='?' (Size = 50), @p266='?' (Size = 1000), @p267='?' (Size = 500), @p268='?' (Size = 50), @p269='?' (Size = 1000), @p270='?' (DbType = Int64), @p271='?' (Size = 4), @p272='?' (Size = 100), @p273='?' (Size = 2000), @p274='?' (Size = 100), @p275='?' (Size = 50), @p276='?' (Size = 50), @p277='?' (DbType = DateTime2), @p278='?' (Size = 1000), @p279='?' (DbType = Double), @p280='?' (Size = 4000), @p281='?' (Size = 50), @p282='?' (Size = 1000), @p283='?' (Size = 500), @p284='?' (Size = 50), @p285='?' (Size = 1000), @p286='?' (DbType = Int64), @p287='?' (Size = 4), @p288='?' (Size = 100), @p289='?' (Size = 2000), @p290='?' (Size = 100), @p291='?' (Size = 50), @p292='?' (Size = 50), @p293='?' (DbType = DateTime2), @p294='?' (Size = 1000), @p295='?' (DbType = Double), @p296='?' (Size = 4000), @p297='?' (Size = 50), @p298='?' (Size = 1000), @p299='?' (Size = 500), @p300='?' (Size = 50), @p301='?' (Size = 1000), @p302='?' (DbType = Int64), @p303='?' (Size = 4), @p304='?' (Size = 100), @p305='?' (Size = 2000), @p306='?' (Size = 100), @p307='?' (Size = 50), @p308='?' (Size = 50), @p309='?' (DbType = DateTime2), @p310='?' (Size = 1000), @p311='?' (DbType = Double), @p312='?' (Size = 4000), @p313='?' (Size = 50), @p314='?' (Size = 1000), @p315='?' (Size = 500), @p316='?' (Size = 50), @p317='?' (Size = 1000), @p318='?' (DbType = Int64), @p319='?' (Size = 4), @p320='?' (Size = 100), @p321='?' (Size = 2000), @p322='?' (Size = 100), @p323='?' (Size = 50), @p324='?' (Size = 50), @p325='?' (DbType = DateTime2), @p326='?' (Size = 1000), @p327='?' (DbType = Double), @p328='?' (Size = 4000), @p329='?' (Size = 50), @p330='?' (Size = 1000), @p331='?' (Size = 500), @p332='?' (Size = 50), @p333='?' (Size = 1000), @p334='?' (DbType = Int64), @p335='?' (Size = 4), @p336='?' (Size = 100), @p337='?' (Size = 2000), @p338='?' (Size = 100), @p339='?' (Size = 50), @p340='?' (Size = 50), @p341='?' (DbType = DateTime2), @p342='?' (Size = 1000), @p343='?' (DbType = Double), @p344='?' (Size = 4000), @p345='?' (Size = 50), @p346='?' (Size = 1000), @p347='?' (Size = 500), @p348='?' (Size = 50), @p349='?' (Size = 1000), @p350='?' (DbType = Int64), @p351='?' (Size = 4), @p352='?' (Size = 100), @p353='?' (Size = 2000), @p354='?' (Size = 100), @p355='?' (Size = 50), @p356='?' (Size = 50), @p357='?' (DbType = DateTime2), @p358='?' (Size = 1000), @p359='?' (DbType = Double), @p360='?' (Size = 4000), @p361='?' (Size = 50), @p362='?' (Size = 1000), @p363='?' (Size = 500), @p364='?' (Size = 50), @p365='?' (Size = 1000), @p366='?' (DbType = Int64), @p367='?' (Size = 4), @p368='?' (Size = 100), @p369='?' (Size = 2000), @p370='?' (Size = 100), @p371='?' (Size = 50), @p372='?' (Size = 50), @p373='?' (DbType = DateTime2), @p374='?' (Size = 1000), @p375='?' (DbType = Double), @p376='?' (Size = 4000), @p377='?' (Size = 50), @p378='?' (Size = 1000), @p379='?' (Size = 500), @p380='?' (Size = 50), @p381='?' (Size = 1000), @p382='?' (DbType = Int64), @p383='?' (Size = 4), @p384='?' (Size = 100), @p385='?' (Size = 2000), @p386='?' (Size = 100), @p387='?' (Size = 50), @p388='?' (Size = 50), @p389='?' (DbType = DateTime2), @p390='?' (Size = 1000), @p391='?' (DbType = Double), @p392='?' (Size = 4000), @p393='?' (Size = 50), @p394='?' (Size = 1000), @p395='?' (Size = 500), @p396='?' (Size = 50), @p397='?' (Size = 1000), @p398='?' (DbType = Int64), @p399='?' (Size = 4), @p400='?' (Size = 100), @p401='?' (Size = 2000), @p402='?' (Size = 100), @p403='?' (Size = 50), @p404='?' (Size = 50), @p405='?' (DbType = DateTime2), @p406='?' (Size = 1000), @p407='?' (DbType = Double), @p408='?' (Size = 4000), @p409='?' (Size = 50), @p410='?' (Size = 1000), @p411='?' (Size = 500), @p412='?' (Size = 50), @p413='?' (Size = 1000), @p414='?' (DbType = Int64), @p415='?' (Size = 4), @p416='?' (Size = 100), @p417='?' (Size = 2000), @p418='?' (Size = 100), @p419='?' (Size = 50), @p420='?' (Size = 50), @p421='?' (DbType = DateTime2), @p422='?' (Size = 1000), @p423='?' (DbType = Double), @p424='?' (Size = 4000), @p425='?' (Size = 50), @p426='?' (Size = 1000), @p427='?' (Size = 500), @p428='?' (Size = 50), @p429='?' (Size = 1000), @p430='?' (DbType = Int64), @p431='?' (Size = 4), @p432='?' (Size = 100), @p433='?' (Size = 2000), @p434='?' (Size = 100), @p435='?' (Size = 50), @p436='?' (Size = 50), @p437='?' (DbType = DateTime2), @p438='?' (Size = 1000), @p439='?' (DbType = Double), @p440='?' (Size = 4000), @p441='?' (Size = 50), @p442='?' (Size = 1000), @p443='?' (Size = 500), @p444='?' (Size = 50), @p445='?' (Size = 1000), @p446='?' (DbType = Int64), @p447='?' (Size = 4), @p448='?' (Size = 100), @p449='?' (Size = 2000), @p450='?' (Size = 100), @p451='?' (Size = 50), @p452='?' (Size = 50), @p453='?' (DbType = DateTime2), @p454='?' (Size = 1000), @p455='?' (DbType = Double), @p456='?' (Size = 4000), @p457='?' (Size = 50), @p458='?' (Size = 1000), @p459='?' (Size = 500), @p460='?' (Size = 50), @p461='?' (Size = 1000), @p462='?' (DbType = Int64), @p463='?' (Size = 4), @p464='?' (Size = 100), @p465='?' (Size = 2000), @p466='?' (Size = 100), @p467='?' (Size = 50), @p468='?' (Size = 50), @p469='?' (DbType = DateTime2), @p470='?' (Size = 1000), @p471='?' (DbType = Double), @p472='?' (Size = 4000), @p473='?' (Size = 50), @p474='?' (Size = 1000), @p475='?' (Size = 500), @p476='?' (Size = 50), @p477='?' (Size = 1000), @p478='?' (DbType = Int64), @p479='?' (Size = 4), @p480='?' (Size = 100), @p481='?' (Size = 2000), @p482='?' (Size = 100), @p483='?' (Size = 50), @p484='?' (Size = 50), @p485='?' (DbType = DateTime2), @p486='?' (Size = 1000), @p487='?' (DbType = Double), @p488='?' (Size = 4000), @p489='?' (Size = 50), @p490='?' (Size = 1000), @p491='?' (Size = 500), @p492='?' (Size = 50), @p493='?' (Size = 1000), @p494='?' (DbType = Int64), @p495='?' (Size = 4)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [CachedMovies] ([Slug], [Description], [Director], [Duration], [Language], [LastUpdated], [PosterUrl], [Rating], [RawData], [Resolution], [ThumbUrl], [Title], [TmdbId], [TrailerUrl], [Views], [Year])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15),
(@p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31),
(@p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47),
(@p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63),
(@p64, @p65, @p66, @p67, @p68, @p69, @p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79),
(@p80, @p81, @p82, @p83, @p84, @p85, @p86, @p87, @p88, @p89, @p90, @p91, @p92, @p93, @p94, @p95),
(@p96, @p97, @p98, @p99, @p100, @p101, @p102, @p103, @p104, @p105, @p106, @p107, @p108, @p109, @p110, @p111),
(@p112, @p113, @p114, @p115, @p116, @p117, @p118, @p119, @p120, @p121, @p122, @p123, @p124, @p125, @p126, @p127),
(@p128, @p129, @p130, @p131, @p132, @p133, @p134, @p135, @p136, @p137, @p138, @p139, @p140, @p141, @p142, @p143),
(@p144, @p145, @p146, @p147, @p148, @p149, @p150, @p151, @p152, @p153, @p154, @p155, @p156, @p157, @p158, @p159),
(@p160, @p161, @p162, @p163, @p164, @p165, @p166, @p167, @p168, @p169, @p170, @p171, @p172, @p173, @p174, @p175),
(@p176, @p177, @p178, @p179, @p180, @p181, @p182, @p183, @p184, @p185, @p186, @p187, @p188, @p189, @p190, @p191),
(@p192, @p193, @p194, @p195, @p196, @p197, @p198, @p199, @p200, @p201, @p202, @p203, @p204, @p205, @p206, @p207),
(@p208, @p209, @p210, @p211, @p212, @p213, @p214, @p215, @p216, @p217, @p218, @p219, @p220, @p221, @p222, @p223),
(@p224, @p225, @p226, @p227, @p228, @p229, @p230, @p231, @p232, @p233, @p234, @p235, @p236, @p237, @p238, @p239),
(@p240, @p241, @p242, @p243, @p244, @p245, @p246, @p247, @p248, @p249, @p250, @p251, @p252, @p253, @p254, @p255),
(@p256, @p257, @p258, @p259, @p260, @p261, @p262, @p263, @p264, @p265, @p266, @p267, @p268, @p269, @p270, @p271),
(@p272, @p273, @p274, @p275, @p276, @p277, @p278, @p279, @p280, @p281, @p282, @p283, @p284, @p285, @p286, @p287),
(@p288, @p289, @p290, @p291, @p292, @p293, @p294, @p295, @p296, @p297, @p298, @p299, @p300, @p301, @p302, @p303),
(@p304, @p305, @p306, @p307, @p308, @p309, @p310, @p311, @p312, @p313, @p314, @p315, @p316, @p317, @p318, @p319),
(@p320, @p321, @p322, @p323, @p324, @p325, @p326, @p327, @p328, @p329, @p330, @p331, @p332, @p333, @p334, @p335),
(@p336, @p337, @p338, @p339, @p340, @p341, @p342, @p343, @p344, @p345, @p346, @p347, @p348, @p349, @p350, @p351),
(@p352, @p353, @p354, @p355, @p356, @p357, @p358, @p359, @p360, @p361, @p362, @p363, @p364, @p365, @p366, @p367),
(@p368, @p369, @p370, @p371, @p372, @p373, @p374, @p375, @p376, @p377, @p378, @p379, @p380, @p381, @p382, @p383),
(@p384, @p385, @p386, @p387, @p388, @p389, @p390, @p391, @p392, @p393, @p394, @p395, @p396, @p397, @p398, @p399),
(@p400, @p401, @p402, @p403, @p404, @p405, @p406, @p407, @p408, @p409, @p410, @p411, @p412, @p413, @p414, @p415),
(@p416, @p417, @p418, @p419, @p420, @p421, @p422, @p423, @p424, @p425, @p426, @p427, @p428, @p429, @p430, @p431),
(@p432, @p433, @p434, @p435, @p436, @p437, @p438, @p439, @p440, @p441, @p442, @p443, @p444, @p445, @p446, @p447),
(@p448, @p449, @p450, @p451, @p452, @p453, @p454, @p455, @p456, @p457, @p458, @p459, @p460, @p461, @p462, @p463),
(@p464, @p465, @p466, @p467, @p468, @p469, @p470, @p471, @p472, @p473, @p474, @p475, @p476, @p477, @p478, @p479),
(@p480, @p481, @p482, @p483, @p484, @p485, @p486, @p487, @p488, @p489, @p490, @p491, @p492, @p493, @p494, @p495);
2025-05-29 13:22:53.857 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'WebAppApiPhim.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_CachedMovies'. Cannot insert duplicate key in object 'dbo.CachedMovies'. The duplicate key value is (doraemon-nobita-va-chuyen-phieu-luu-vao-xu-quy).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:076b3b4d-b9b6-4eb9-97d8-da016d9cf9b9
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_CachedMovies'. Cannot insert duplicate key in object 'dbo.CachedMovies'. The duplicate key value is (doraemon-nobita-va-chuyen-phieu-luu-vao-xu-quy).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:076b3b4d-b9b6-4eb9-97d8-da016d9cf9b9
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-29 13:22:53.931 +07:00 [ERR] Failed to sync page 2
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_CachedMovies'. Cannot insert duplicate key in object 'dbo.CachedMovies'. The duplicate key value is (doraemon-nobita-va-chuyen-phieu-luu-vao-xu-quy).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:076b3b4d-b9b6-4eb9-97d8-da016d9cf9b9
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at WebAppApiPhim.BackgroundServices.SyncMoviesService.SafeSyncMovies(CancellationToken stoppingToken) in C:\D\Leaning\API\APICode\WebAppApiPhim\Services\SyncMoviesService.cs:line 118
2025-05-29 13:22:53.945 +07:00 [INF] Calling API endpoint: phim-moi/v1?page=3&limit=20
2025-05-29 13:22:54.276 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '328.1197'
2025-05-29 13:22:54.283 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":"87faa3ca9f7c03da0bbb0ed17fefa346","name":"Zatsu Tabi: That's Journey","slug":"zatsu-tabi-thats-journey","year":"2025","loai_phim":"Phim b\u1ed9","quoc_gia":"Nh\u1eadt B\u1ea3n","modified":"2025-05-28 11:33:10"},{"id":"27a1e0e31bf1a18797d26f7796f1ae4e","name":"Thanh G\u01b0\u01a1m Di\u1ec7t Qu\u1ef7 (Ph\u1ea7n 5)","slug":"thanh-guom-diet-quy-dai-tru-dac-huan","year":"2024","loai_phim":"Phim b\u1ed9","quoc_gia":"Nh\u1eadt B\u1ea3n","modified":"2025-05-28 11:30:17"},{"id":"e1f236269...
2025-05-29 13:22:54.286 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 13:22:54.288 +07:00 [INF] Successfully cached 20 movies for page 3
2025-05-29 13:22:54.439 +07:00 [ERR] Failed executing DbCommand (71ms) [Parameters=[@p0='?' (Size = 100), @p1='?' (Size = 2000), @p2='?' (Size = 100), @p3='?' (Size = 50), @p4='?' (Size = 50), @p5='?' (DbType = DateTime2), @p6='?' (Size = 1000), @p7='?' (DbType = Double), @p8='?' (Size = 4000), @p9='?' (Size = 50), @p10='?' (Size = 1000), @p11='?' (Size = 500), @p12='?' (Size = 50), @p13='?' (Size = 1000), @p14='?' (DbType = Int64), @p15='?' (Size = 4), @p16='?' (Size = 100), @p17='?' (Size = 2000), @p18='?' (Size = 100), @p19='?' (Size = 50), @p20='?' (Size = 50), @p21='?' (DbType = DateTime2), @p22='?' (Size = 1000), @p23='?' (DbType = Double), @p24='?' (Size = 4000), @p25='?' (Size = 50), @p26='?' (Size = 1000), @p27='?' (Size = 500), @p28='?' (Size = 50), @p29='?' (Size = 1000), @p30='?' (DbType = Int64), @p31='?' (Size = 4), @p32='?' (Size = 100), @p33='?' (Size = 2000), @p34='?' (Size = 100), @p35='?' (Size = 50), @p36='?' (Size = 50), @p37='?' (DbType = DateTime2), @p38='?' (Size = 1000), @p39='?' (DbType = Double), @p40='?' (Size = 4000), @p41='?' (Size = 50), @p42='?' (Size = 1000), @p43='?' (Size = 500), @p44='?' (Size = 50), @p45='?' (Size = 1000), @p46='?' (DbType = Int64), @p47='?' (Size = 4), @p48='?' (Size = 100), @p49='?' (Size = 2000), @p50='?' (Size = 100), @p51='?' (Size = 50), @p52='?' (Size = 50), @p53='?' (DbType = DateTime2), @p54='?' (Size = 1000), @p55='?' (DbType = Double), @p56='?' (Size = 4000), @p57='?' (Size = 50), @p58='?' (Size = 1000), @p59='?' (Size = 500), @p60='?' (Size = 50), @p61='?' (Size = 1000), @p62='?' (DbType = Int64), @p63='?' (Size = 4), @p64='?' (Size = 100), @p65='?' (Size = 2000), @p66='?' (Size = 100), @p67='?' (Size = 50), @p68='?' (Size = 50), @p69='?' (DbType = DateTime2), @p70='?' (Size = 1000), @p71='?' (DbType = Double), @p72='?' (Size = 4000), @p73='?' (Size = 50), @p74='?' (Size = 1000), @p75='?' (Size = 500), @p76='?' (Size = 50), @p77='?' (Size = 1000), @p78='?' (DbType = Int64), @p79='?' (Size = 4), @p80='?' (Size = 100), @p81='?' (Size = 2000), @p82='?' (Size = 100), @p83='?' (Size = 50), @p84='?' (Size = 50), @p85='?' (DbType = DateTime2), @p86='?' (Size = 1000), @p87='?' (DbType = Double), @p88='?' (Size = 4000), @p89='?' (Size = 50), @p90='?' (Size = 1000), @p91='?' (Size = 500), @p92='?' (Size = 50), @p93='?' (Size = 1000), @p94='?' (DbType = Int64), @p95='?' (Size = 4), @p96='?' (Size = 100), @p97='?' (Size = 2000), @p98='?' (Size = 100), @p99='?' (Size = 50), @p100='?' (Size = 50), @p101='?' (DbType = DateTime2), @p102='?' (Size = 1000), @p103='?' (DbType = Double), @p104='?' (Size = 4000), @p105='?' (Size = 50), @p106='?' (Size = 1000), @p107='?' (Size = 500), @p108='?' (Size = 50), @p109='?' (Size = 1000), @p110='?' (DbType = Int64), @p111='?' (Size = 4), @p112='?' (Size = 100), @p113='?' (Size = 2000), @p114='?' (Size = 100), @p115='?' (Size = 50), @p116='?' (Size = 50), @p117='?' (DbType = DateTime2), @p118='?' (Size = 1000), @p119='?' (DbType = Double), @p120='?' (Size = 4000), @p121='?' (Size = 50), @p122='?' (Size = 1000), @p123='?' (Size = 500), @p124='?' (Size = 50), @p125='?' (Size = 1000), @p126='?' (DbType = Int64), @p127='?' (Size = 4), @p128='?' (Size = 100), @p129='?' (Size = 2000), @p130='?' (Size = 100), @p131='?' (Size = 50), @p132='?' (Size = 50), @p133='?' (DbType = DateTime2), @p134='?' (Size = 1000), @p135='?' (DbType = Double), @p136='?' (Size = 4000), @p137='?' (Size = 50), @p138='?' (Size = 1000), @p139='?' (Size = 500), @p140='?' (Size = 50), @p141='?' (Size = 1000), @p142='?' (DbType = Int64), @p143='?' (Size = 4), @p144='?' (Size = 100), @p145='?' (Size = 2000), @p146='?' (Size = 100), @p147='?' (Size = 50), @p148='?' (Size = 50), @p149='?' (DbType = DateTime2), @p150='?' (Size = 1000), @p151='?' (DbType = Double), @p152='?' (Size = 4000), @p153='?' (Size = 50), @p154='?' (Size = 1000), @p155='?' (Size = 500), @p156='?' (Size = 50), @p157='?' (Size = 1000), @p158='?' (DbType = Int64), @p159='?' (Size = 4), @p160='?' (Size = 100), @p161='?' (Size = 2000), @p162='?' (Size = 100), @p163='?' (Size = 50), @p164='?' (Size = 50), @p165='?' (DbType = DateTime2), @p166='?' (Size = 1000), @p167='?' (DbType = Double), @p168='?' (Size = 4000), @p169='?' (Size = 50), @p170='?' (Size = 1000), @p171='?' (Size = 500), @p172='?' (Size = 50), @p173='?' (Size = 1000), @p174='?' (DbType = Int64), @p175='?' (Size = 4), @p176='?' (Size = 100), @p177='?' (Size = 2000), @p178='?' (Size = 100), @p179='?' (Size = 50), @p180='?' (Size = 50), @p181='?' (DbType = DateTime2), @p182='?' (Size = 1000), @p183='?' (DbType = Double), @p184='?' (Size = 4000), @p185='?' (Size = 50), @p186='?' (Size = 1000), @p187='?' (Size = 500), @p188='?' (Size = 50), @p189='?' (Size = 1000), @p190='?' (DbType = Int64), @p191='?' (Size = 4), @p192='?' (Size = 100), @p193='?' (Size = 2000), @p194='?' (Size = 100), @p195='?' (Size = 50), @p196='?' (Size = 50), @p197='?' (DbType = DateTime2), @p198='?' (Size = 1000), @p199='?' (DbType = Double), @p200='?' (Size = 4000), @p201='?' (Size = 50), @p202='?' (Size = 1000), @p203='?' (Size = 500), @p204='?' (Size = 50), @p205='?' (Size = 1000), @p206='?' (DbType = Int64), @p207='?' (Size = 4), @p208='?' (Size = 100), @p209='?' (Size = 2000), @p210='?' (Size = 100), @p211='?' (Size = 50), @p212='?' (Size = 50), @p213='?' (DbType = DateTime2), @p214='?' (Size = 1000), @p215='?' (DbType = Double), @p216='?' (Size = 4000), @p217='?' (Size = 50), @p218='?' (Size = 1000), @p219='?' (Size = 500), @p220='?' (Size = 50), @p221='?' (Size = 1000), @p222='?' (DbType = Int64), @p223='?' (Size = 4), @p224='?' (Size = 100), @p225='?' (Size = 2000), @p226='?' (Size = 100), @p227='?' (Size = 50), @p228='?' (Size = 50), @p229='?' (DbType = DateTime2), @p230='?' (Size = 1000), @p231='?' (DbType = Double), @p232='?' (Size = 4000), @p233='?' (Size = 50), @p234='?' (Size = 1000), @p235='?' (Size = 500), @p236='?' (Size = 50), @p237='?' (Size = 1000), @p238='?' (DbType = Int64), @p239='?' (Size = 4), @p240='?' (Size = 100), @p241='?' (Size = 2000), @p242='?' (Size = 100), @p243='?' (Size = 50), @p244='?' (Size = 50), @p245='?' (DbType = DateTime2), @p246='?' (Size = 1000), @p247='?' (DbType = Double), @p248='?' (Size = 4000), @p249='?' (Size = 50), @p250='?' (Size = 1000), @p251='?' (Size = 500), @p252='?' (Size = 50), @p253='?' (Size = 1000), @p254='?' (DbType = Int64), @p255='?' (Size = 4), @p256='?' (Size = 100), @p257='?' (Size = 2000), @p258='?' (Size = 100), @p259='?' (Size = 50), @p260='?' (Size = 50), @p261='?' (DbType = DateTime2), @p262='?' (Size = 1000), @p263='?' (DbType = Double), @p264='?' (Size = 4000), @p265='?' (Size = 50), @p266='?' (Size = 1000), @p267='?' (Size = 500), @p268='?' (Size = 50), @p269='?' (Size = 1000), @p270='?' (DbType = Int64), @p271='?' (Size = 4), @p272='?' (Size = 100), @p273='?' (Size = 2000), @p274='?' (Size = 100), @p275='?' (Size = 50), @p276='?' (Size = 50), @p277='?' (DbType = DateTime2), @p278='?' (Size = 1000), @p279='?' (DbType = Double), @p280='?' (Size = 4000), @p281='?' (Size = 50), @p282='?' (Size = 1000), @p283='?' (Size = 500), @p284='?' (Size = 50), @p285='?' (Size = 1000), @p286='?' (DbType = Int64), @p287='?' (Size = 4), @p288='?' (Size = 100), @p289='?' (Size = 2000), @p290='?' (Size = 100), @p291='?' (Size = 50), @p292='?' (Size = 50), @p293='?' (DbType = DateTime2), @p294='?' (Size = 1000), @p295='?' (DbType = Double), @p296='?' (Size = 4000), @p297='?' (Size = 50), @p298='?' (Size = 1000), @p299='?' (Size = 500), @p300='?' (Size = 50), @p301='?' (Size = 1000), @p302='?' (DbType = Int64), @p303='?' (Size = 4), @p304='?' (Size = 100), @p305='?' (Size = 2000), @p306='?' (Size = 100), @p307='?' (Size = 50), @p308='?' (Size = 50), @p309='?' (DbType = DateTime2), @p310='?' (Size = 1000), @p311='?' (DbType = Double), @p312='?' (Size = 4000), @p313='?' (Size = 50), @p314='?' (Size = 1000), @p315='?' (Size = 500), @p316='?' (Size = 50), @p317='?' (Size = 1000), @p318='?' (DbType = Int64), @p319='?' (Size = 4), @p320='?' (Size = 100), @p321='?' (Size = 2000), @p322='?' (Size = 100), @p323='?' (Size = 50), @p324='?' (Size = 50), @p325='?' (DbType = DateTime2), @p326='?' (Size = 1000), @p327='?' (DbType = Double), @p328='?' (Size = 4000), @p329='?' (Size = 50), @p330='?' (Size = 1000), @p331='?' (Size = 500), @p332='?' (Size = 50), @p333='?' (Size = 1000), @p334='?' (DbType = Int64), @p335='?' (Size = 4), @p336='?' (Size = 100), @p337='?' (Size = 2000), @p338='?' (Size = 100), @p339='?' (Size = 50), @p340='?' (Size = 50), @p341='?' (DbType = DateTime2), @p342='?' (Size = 1000), @p343='?' (DbType = Double), @p344='?' (Size = 4000), @p345='?' (Size = 50), @p346='?' (Size = 1000), @p347='?' (Size = 500), @p348='?' (Size = 50), @p349='?' (Size = 1000), @p350='?' (DbType = Int64), @p351='?' (Size = 4), @p352='?' (Size = 100), @p353='?' (Size = 2000), @p354='?' (Size = 100), @p355='?' (Size = 50), @p356='?' (Size = 50), @p357='?' (DbType = DateTime2), @p358='?' (Size = 1000), @p359='?' (DbType = Double), @p360='?' (Size = 4000), @p361='?' (Size = 50), @p362='?' (Size = 1000), @p363='?' (Size = 500), @p364='?' (Size = 50), @p365='?' (Size = 1000), @p366='?' (DbType = Int64), @p367='?' (Size = 4), @p368='?' (Size = 100), @p369='?' (Size = 2000), @p370='?' (Size = 100), @p371='?' (Size = 50), @p372='?' (Size = 50), @p373='?' (DbType = DateTime2), @p374='?' (Size = 1000), @p375='?' (DbType = Double), @p376='?' (Size = 4000), @p377='?' (Size = 50), @p378='?' (Size = 1000), @p379='?' (Size = 500), @p380='?' (Size = 50), @p381='?' (Size = 1000), @p382='?' (DbType = Int64), @p383='?' (Size = 4), @p384='?' (Size = 100), @p385='?' (Size = 2000), @p386='?' (Size = 100), @p387='?' (Size = 50), @p388='?' (Size = 50), @p389='?' (DbType = DateTime2), @p390='?' (Size = 1000), @p391='?' (DbType = Double), @p392='?' (Size = 4000), @p393='?' (Size = 50), @p394='?' (Size = 1000), @p395='?' (Size = 500), @p396='?' (Size = 50), @p397='?' (Size = 1000), @p398='?' (DbType = Int64), @p399='?' (Size = 4), @p400='?' (Size = 100), @p401='?' (Size = 2000), @p402='?' (Size = 100), @p403='?' (Size = 50), @p404='?' (Size = 50), @p405='?' (DbType = DateTime2), @p406='?' (Size = 1000), @p407='?' (DbType = Double), @p408='?' (Size = 4000), @p409='?' (Size = 50), @p410='?' (Size = 1000), @p411='?' (Size = 500), @p412='?' (Size = 50), @p413='?' (Size = 1000), @p414='?' (DbType = Int64), @p415='?' (Size = 4), @p416='?' (Size = 100), @p417='?' (Size = 2000), @p418='?' (Size = 100), @p419='?' (Size = 50), @p420='?' (Size = 50), @p421='?' (DbType = DateTime2), @p422='?' (Size = 1000), @p423='?' (DbType = Double), @p424='?' (Size = 4000), @p425='?' (Size = 50), @p426='?' (Size = 1000), @p427='?' (Size = 500), @p428='?' (Size = 50), @p429='?' (Size = 1000), @p430='?' (DbType = Int64), @p431='?' (Size = 4), @p432='?' (Size = 100), @p433='?' (Size = 2000), @p434='?' (Size = 100), @p435='?' (Size = 50), @p436='?' (Size = 50), @p437='?' (DbType = DateTime2), @p438='?' (Size = 1000), @p439='?' (DbType = Double), @p440='?' (Size = 4000), @p441='?' (Size = 50), @p442='?' (Size = 1000), @p443='?' (Size = 500), @p444='?' (Size = 50), @p445='?' (Size = 1000), @p446='?' (DbType = Int64), @p447='?' (Size = 4), @p448='?' (Size = 100), @p449='?' (Size = 2000), @p450='?' (Size = 100), @p451='?' (Size = 50), @p452='?' (Size = 50), @p453='?' (DbType = DateTime2), @p454='?' (Size = 1000), @p455='?' (DbType = Double), @p456='?' (Size = 4000), @p457='?' (Size = 50), @p458='?' (Size = 1000), @p459='?' (Size = 500), @p460='?' (Size = 50), @p461='?' (Size = 1000), @p462='?' (DbType = Int64), @p463='?' (Size = 4), @p464='?' (Size = 100), @p465='?' (Size = 2000), @p466='?' (Size = 100), @p467='?' (Size = 50), @p468='?' (Size = 50), @p469='?' (DbType = DateTime2), @p470='?' (Size = 1000), @p471='?' (DbType = Double), @p472='?' (Size = 4000), @p473='?' (Size = 50), @p474='?' (Size = 1000), @p475='?' (Size = 500), @p476='?' (Size = 50), @p477='?' (Size = 1000), @p478='?' (DbType = Int64), @p479='?' (Size = 4), @p480='?' (Size = 100), @p481='?' (Size = 2000), @p482='?' (Size = 100), @p483='?' (Size = 50), @p484='?' (Size = 50), @p485='?' (DbType = DateTime2), @p486='?' (Size = 1000), @p487='?' (DbType = Double), @p488='?' (Size = 4000), @p489='?' (Size = 50), @p490='?' (Size = 1000), @p491='?' (Size = 500), @p492='?' (Size = 50), @p493='?' (Size = 1000), @p494='?' (DbType = Int64), @p495='?' (Size = 4), @p496='?' (Size = 100), @p497='?' (Size = 2000), @p498='?' (Size = 100), @p499='?' (Size = 50), @p500='?' (Size = 50), @p501='?' (DbType = DateTime2), @p502='?' (Size = 1000), @p503='?' (DbType = Double), @p504='?' (Size = 4000), @p505='?' (Size = 50), @p506='?' (Size = 1000), @p507='?' (Size = 500), @p508='?' (Size = 50), @p509='?' (Size = 1000), @p510='?' (DbType = Int64), @p511='?' (Size = 4), @p512='?' (Size = 100), @p513='?' (Size = 2000), @p514='?' (Size = 100), @p515='?' (Size = 50), @p516='?' (Size = 50), @p517='?' (DbType = DateTime2), @p518='?' (Size = 1000), @p519='?' (DbType = Double), @p520='?' (Size = 4000), @p521='?' (Size = 50), @p522='?' (Size = 1000), @p523='?' (Size = 500), @p524='?' (Size = 50), @p525='?' (Size = 1000), @p526='?' (DbType = Int64), @p527='?' (Size = 4), @p528='?' (Size = 100), @p529='?' (Size = 2000), @p530='?' (Size = 100), @p531='?' (Size = 50), @p532='?' (Size = 50), @p533='?' (DbType = DateTime2), @p534='?' (Size = 1000), @p535='?' (DbType = Double), @p536='?' (Size = 4000), @p537='?' (Size = 50), @p538='?' (Size = 1000), @p539='?' (Size = 500), @p540='?' (Size = 50), @p541='?' (Size = 1000), @p542='?' (DbType = Int64), @p543='?' (Size = 4), @p544='?' (Size = 100), @p545='?' (Size = 2000), @p546='?' (Size = 100), @p547='?' (Size = 50), @p548='?' (Size = 50), @p549='?' (DbType = DateTime2), @p550='?' (Size = 1000), @p551='?' (DbType = Double), @p552='?' (Size = 4000), @p553='?' (Size = 50), @p554='?' (Size = 1000), @p555='?' (Size = 500), @p556='?' (Size = 50), @p557='?' (Size = 1000), @p558='?' (DbType = Int64), @p559='?' (Size = 4), @p560='?' (Size = 100), @p561='?' (Size = 2000), @p562='?' (Size = 100), @p563='?' (Size = 50), @p564='?' (Size = 50), @p565='?' (DbType = DateTime2), @p566='?' (Size = 1000), @p567='?' (DbType = Double), @p568='?' (Size = 4000), @p569='?' (Size = 50), @p570='?' (Size = 1000), @p571='?' (Size = 500), @p572='?' (Size = 50), @p573='?' (Size = 1000), @p574='?' (DbType = Int64), @p575='?' (Size = 4), @p576='?' (Size = 100), @p577='?' (Size = 2000), @p578='?' (Size = 100), @p579='?' (Size = 50), @p580='?' (Size = 50), @p581='?' (DbType = DateTime2), @p582='?' (Size = 1000), @p583='?' (DbType = Double), @p584='?' (Size = 4000), @p585='?' (Size = 50), @p586='?' (Size = 1000), @p587='?' (Size = 500), @p588='?' (Size = 50), @p589='?' (Size = 1000), @p590='?' (DbType = Int64), @p591='?' (Size = 4), @p592='?' (Size = 100), @p593='?' (Size = 2000), @p594='?' (Size = 100), @p595='?' (Size = 50), @p596='?' (Size = 50), @p597='?' (DbType = DateTime2), @p598='?' (Size = 1000), @p599='?' (DbType = Double), @p600='?' (Size = 4000), @p601='?' (Size = 50), @p602='?' (Size = 1000), @p603='?' (Size = 500), @p604='?' (Size = 50), @p605='?' (Size = 1000), @p606='?' (DbType = Int64), @p607='?' (Size = 4), @p608='?' (Size = 100), @p609='?' (Size = 2000), @p610='?' (Size = 100), @p611='?' (Size = 50), @p612='?' (Size = 50), @p613='?' (DbType = DateTime2), @p614='?' (Size = 1000), @p615='?' (DbType = Double), @p616='?' (Size = 4000), @p617='?' (Size = 50), @p618='?' (Size = 1000), @p619='?' (Size = 500), @p620='?' (Size = 50), @p621='?' (Size = 1000), @p622='?' (DbType = Int64), @p623='?' (Size = 4), @p624='?' (Size = 100), @p625='?' (Size = 2000), @p626='?' (Size = 100), @p627='?' (Size = 50), @p628='?' (Size = 50), @p629='?' (DbType = DateTime2), @p630='?' (Size = 1000), @p631='?' (DbType = Double), @p632='?' (Size = 4000), @p633='?' (Size = 50), @p634='?' (Size = 1000), @p635='?' (Size = 500), @p636='?' (Size = 50), @p637='?' (Size = 1000), @p638='?' (DbType = Int64), @p639='?' (Size = 4), @p640='?' (Size = 100), @p641='?' (Size = 2000), @p642='?' (Size = 100), @p643='?' (Size = 50), @p644='?' (Size = 50), @p645='?' (DbType = DateTime2), @p646='?' (Size = 1000), @p647='?' (DbType = Double), @p648='?' (Size = 4000), @p649='?' (Size = 50), @p650='?' (Size = 1000), @p651='?' (Size = 500), @p652='?' (Size = 50), @p653='?' (Size = 1000), @p654='?' (DbType = Int64), @p655='?' (Size = 4), @p656='?' (Size = 100), @p657='?' (Size = 2000), @p658='?' (Size = 100), @p659='?' (Size = 50), @p660='?' (Size = 50), @p661='?' (DbType = DateTime2), @p662='?' (Size = 1000), @p663='?' (DbType = Double), @p664='?' (Size = 4000), @p665='?' (Size = 50), @p666='?' (Size = 1000), @p667='?' (Size = 500), @p668='?' (Size = 50), @p669='?' (Size = 1000), @p670='?' (DbType = Int64), @p671='?' (Size = 4)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [CachedMovies] ([Slug], [Description], [Director], [Duration], [Language], [LastUpdated], [PosterUrl], [Rating], [RawData], [Resolution], [ThumbUrl], [Title], [TmdbId], [TrailerUrl], [Views], [Year])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15),
(@p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31),
(@p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47),
(@p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63),
(@p64, @p65, @p66, @p67, @p68, @p69, @p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79),
(@p80, @p81, @p82, @p83, @p84, @p85, @p86, @p87, @p88, @p89, @p90, @p91, @p92, @p93, @p94, @p95),
(@p96, @p97, @p98, @p99, @p100, @p101, @p102, @p103, @p104, @p105, @p106, @p107, @p108, @p109, @p110, @p111),
(@p112, @p113, @p114, @p115, @p116, @p117, @p118, @p119, @p120, @p121, @p122, @p123, @p124, @p125, @p126, @p127),
(@p128, @p129, @p130, @p131, @p132, @p133, @p134, @p135, @p136, @p137, @p138, @p139, @p140, @p141, @p142, @p143),
(@p144, @p145, @p146, @p147, @p148, @p149, @p150, @p151, @p152, @p153, @p154, @p155, @p156, @p157, @p158, @p159),
(@p160, @p161, @p162, @p163, @p164, @p165, @p166, @p167, @p168, @p169, @p170, @p171, @p172, @p173, @p174, @p175),
(@p176, @p177, @p178, @p179, @p180, @p181, @p182, @p183, @p184, @p185, @p186, @p187, @p188, @p189, @p190, @p191),
(@p192, @p193, @p194, @p195, @p196, @p197, @p198, @p199, @p200, @p201, @p202, @p203, @p204, @p205, @p206, @p207),
(@p208, @p209, @p210, @p211, @p212, @p213, @p214, @p215, @p216, @p217, @p218, @p219, @p220, @p221, @p222, @p223),
(@p224, @p225, @p226, @p227, @p228, @p229, @p230, @p231, @p232, @p233, @p234, @p235, @p236, @p237, @p238, @p239),
(@p240, @p241, @p242, @p243, @p244, @p245, @p246, @p247, @p248, @p249, @p250, @p251, @p252, @p253, @p254, @p255),
(@p256, @p257, @p258, @p259, @p260, @p261, @p262, @p263, @p264, @p265, @p266, @p267, @p268, @p269, @p270, @p271),
(@p272, @p273, @p274, @p275, @p276, @p277, @p278, @p279, @p280, @p281, @p282, @p283, @p284, @p285, @p286, @p287),
(@p288, @p289, @p290, @p291, @p292, @p293, @p294, @p295, @p296, @p297, @p298, @p299, @p300, @p301, @p302, @p303),
(@p304, @p305, @p306, @p307, @p308, @p309, @p310, @p311, @p312, @p313, @p314, @p315, @p316, @p317, @p318, @p319),
(@p320, @p321, @p322, @p323, @p324, @p325, @p326, @p327, @p328, @p329, @p330, @p331, @p332, @p333, @p334, @p335),
(@p336, @p337, @p338, @p339, @p340, @p341, @p342, @p343, @p344, @p345, @p346, @p347, @p348, @p349, @p350, @p351),
(@p352, @p353, @p354, @p355, @p356, @p357, @p358, @p359, @p360, @p361, @p362, @p363, @p364, @p365, @p366, @p367),
(@p368, @p369, @p370, @p371, @p372, @p373, @p374, @p375, @p376, @p377, @p378, @p379, @p380, @p381, @p382, @p383),
(@p384, @p385, @p386, @p387, @p388, @p389, @p390, @p391, @p392, @p393, @p394, @p395, @p396, @p397, @p398, @p399),
(@p400, @p401, @p402, @p403, @p404, @p405, @p406, @p407, @p408, @p409, @p410, @p411, @p412, @p413, @p414, @p415),
(@p416, @p417, @p418, @p419, @p420, @p421, @p422, @p423, @p424, @p425, @p426, @p427, @p428, @p429, @p430, @p431),
(@p432, @p433, @p434, @p435, @p436, @p437, @p438, @p439, @p440, @p441, @p442, @p443, @p444, @p445, @p446, @p447),
(@p448, @p449, @p450, @p451, @p452, @p453, @p454, @p455, @p456, @p457, @p458, @p459, @p460, @p461, @p462, @p463),
(@p464, @p465, @p466, @p467, @p468, @p469, @p470, @p471, @p472, @p473, @p474, @p475, @p476, @p477, @p478, @p479),
(@p480, @p481, @p482, @p483, @p484, @p485, @p486, @p487, @p488, @p489, @p490, @p491, @p492, @p493, @p494, @p495),
(@p496, @p497, @p498, @p499, @p500, @p501, @p502, @p503, @p504, @p505, @p506, @p507, @p508, @p509, @p510, @p511),
(@p512, @p513, @p514, @p515, @p516, @p517, @p518, @p519, @p520, @p521, @p522, @p523, @p524, @p525, @p526, @p527),
(@p528, @p529, @p530, @p531, @p532, @p533, @p534, @p535, @p536, @p537, @p538, @p539, @p540, @p541, @p542, @p543),
(@p544, @p545, @p546, @p547, @p548, @p549, @p550, @p551, @p552, @p553, @p554, @p555, @p556, @p557, @p558, @p559),
(@p560, @p561, @p562, @p563, @p564, @p565, @p566, @p567, @p568, @p569, @p570, @p571, @p572, @p573, @p574, @p575),
(@p576, @p577, @p578, @p579, @p580, @p581, @p582, @p583, @p584, @p585, @p586, @p587, @p588, @p589, @p590, @p591),
(@p592, @p593, @p594, @p595, @p596, @p597, @p598, @p599, @p600, @p601, @p602, @p603, @p604, @p605, @p606, @p607),
(@p608, @p609, @p610, @p611, @p612, @p613, @p614, @p615, @p616, @p617, @p618, @p619, @p620, @p621, @p622, @p623),
(@p624, @p625, @p626, @p627, @p628, @p629, @p630, @p631, @p632, @p633, @p634, @p635, @p636, @p637, @p638, @p639),
(@p640, @p641, @p642, @p643, @p644, @p645, @p646, @p647, @p648, @p649, @p650, @p651, @p652, @p653, @p654, @p655),
(@p656, @p657, @p658, @p659, @p660, @p661, @p662, @p663, @p664, @p665, @p666, @p667, @p668, @p669, @p670, @p671);
2025-05-29 13:22:54.464 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'WebAppApiPhim.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_CachedMovies'. Cannot insert duplicate key in object 'dbo.CachedMovies'. The duplicate key value is (doraemon-nobita-va-chuyen-phieu-luu-vao-xu-quy).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:076b3b4d-b9b6-4eb9-97d8-da016d9cf9b9
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_CachedMovies'. Cannot insert duplicate key in object 'dbo.CachedMovies'. The duplicate key value is (doraemon-nobita-va-chuyen-phieu-luu-vao-xu-quy).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:076b3b4d-b9b6-4eb9-97d8-da016d9cf9b9
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-29 13:22:54.532 +07:00 [ERR] Failed to sync page 3
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_CachedMovies'. Cannot insert duplicate key in object 'dbo.CachedMovies'. The duplicate key value is (doraemon-nobita-va-chuyen-phieu-luu-vao-xu-quy).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:076b3b4d-b9b6-4eb9-97d8-da016d9cf9b9
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at WebAppApiPhim.BackgroundServices.SyncMoviesService.SafeSyncMovies(CancellationToken stoppingToken) in C:\D\Leaning\API\APICode\WebAppApiPhim\Services\SyncMoviesService.cs:line 118
2025-05-29 13:22:54.548 +07:00 [INF] Movie synchronization completed. Synced 45 new movies.
2025-05-29 13:26:36.903 +07:00 [INF] User test1 registered successfully.
2025-05-29 13:27:21.426 +07:00 [INF] User test1 logged in successfully.
2025-05-29 13:27:47.804 +07:00 [WRN] No watch history found for user 4902dd81-682b-4d18-8e84-d238b959eac4.
2025-05-29 13:28:33.695 +07:00 [WRN] Movie with slug con-trai-ban-me not found.
2025-05-29 13:30:51.748 +07:00 [INF] Fetching movie detail from: phim-chi-tiet/v2?slug=latest
2025-05-29 13:30:51.751 +07:00 [INF] Fetching movie detail from: phim-chi-tiet/v2?slug=popular
2025-05-29 13:30:55.851 +07:00 [INF] Fetching movie detail from: phim-chi-tiet/v2?slug=popular
2025-05-29 13:30:55.867 +07:00 [INF] Fetching movie detail from: phim-chi-tiet/v2?slug=latest
2025-05-29 13:30:56.129 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '4373.9099'
2025-05-29 13:30:56.138 +07:00 [INF] Fetched and cached movie detail for: latest
2025-05-29 13:30:56.652 +07:00 [INF] Cache hit for movie detail: latest
2025-05-29 13:30:56.688 +07:00 [INF] Cache hit for movie detail: latest
2025-05-29 13:30:56.698 +07:00 [INF] Fetching movie detail from: phim-chi-tiet/v2?slug=popular
2025-05-29 13:30:56.706 +07:00 [INF] Cache hit for movie detail: latest
2025-05-29 13:30:58.676 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '6914.7218'
2025-05-29 13:30:59.628 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '3754.5169'
2025-05-29 13:30:59.636 +07:00 [INF] Fetched and cached movie detail for: latest
2025-05-29 13:30:59.853 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '3146.6522'
2025-05-29 13:30:59.859 +07:00 [INF] Fetched and cached movie detail for: popular
2025-05-29 13:30:59.871 +07:00 [INF] Cache hit for movie detail: popular
2025-05-29 13:30:59.878 +07:00 [INF] Fetched and cached movie detail for: popular
2025-05-29 13:30:59.888 +07:00 [INF] Cache hit for movie detail: popular
2025-05-29 13:32:35.862 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: 'The operation was canceled.', Handled: 'false', Attempt: '0', Execution Time: '100000.8417'
System.Threading.Tasks.TaskCanceledException: The operation was canceled.
 ---> System.IO.IOException: Unable to read data from the transport connection: The I/O operation has been aborted because of either a thread exit or an application request..
 ---> System.Net.Sockets.SocketException (995): The I/O operation has been aborted because of either a thread exit or an application request.
   --- End of inner exception stack trace ---
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](CancellationToken cancellationToken, Int32 estimatedSize)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Security.SslStream.ReadAsyncInternal[TIOAdapter](Memory`1 buffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Http.HttpConnection.InitialFillAsync(Boolean async)
   at System.Net.Http.HttpConnection.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnection.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Resilience.Internal.ResilienceHandler.<>c.<<SendAsync>b__2_0>d.MoveNext()
2025-05-29 13:32:36.011 +07:00 [ERR] Error fetching movie detail for: popular
System.Threading.Tasks.TaskCanceledException: The request was canceled due to the configured HttpClient.Timeout of 100 seconds elapsing.
 ---> System.TimeoutException: The operation was canceled.
 ---> System.Threading.Tasks.TaskCanceledException: The operation was canceled.
 ---> System.IO.IOException: Unable to read data from the transport connection: The I/O operation has been aborted because of either a thread exit or an application request..
 ---> System.Net.Sockets.SocketException (995): The I/O operation has been aborted because of either a thread exit or an application request.
   --- End of inner exception stack trace ---
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](CancellationToken cancellationToken, Int32 estimatedSize)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Security.SslStream.ReadAsyncInternal[TIOAdapter](Memory`1 buffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Http.HttpConnection.InitialFillAsync(Boolean async)
   at System.Net.Http.HttpConnection.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnection.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Resilience.Internal.ResilienceHandler.<>c.<<SendAsync>b__2_0>d.MoveNext()
--- End of stack trace from previous location ---
   at Polly.Outcome`1.ThrowIfException()
   at Microsoft.Extensions.Http.Resilience.Internal.ResilienceHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   --- End of inner exception stack trace ---
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpClient.HandleFailure(Exception e, Boolean telemetryStarted, HttpResponseMessage response, CancellationTokenSource cts, CancellationToken cancellationToken, CancellationTokenSource pendingRequestsCts)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at WebAppApiPhim.Services.MovieApiService.GetMovieDetailBySlugAsync(String slug, String version) in C:\D\Leaning\API\APICode\WebAppApiPhim\Services\MovieApiService.cs:line 263
2025-05-29 13:33:31.122 +07:00 [INF] Fetching movie detail from: phim-chi-tiet/v1?slug=slug
2025-05-29 13:33:33.014 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '1888.9322'
2025-05-29 13:33:33.019 +07:00 [INF] Fetched and cached movie detail for: slug
2025-05-29 13:33:50.638 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '484.0682'
2025-05-29 13:34:15.793 +07:00 [INF] Cache hit for movie detail: popular
2025-05-29 13:34:15.793 +07:00 [INF] Cache hit for movie detail: latest
2025-05-29 13:34:15.891 +07:00 [INF] Cache hit for movie detail: latest
2025-05-29 13:34:15.893 +07:00 [INF] Cache hit for movie detail: popular
2025-05-29 13:34:15.943 +07:00 [INF] Cache hit for movie detail: popular
2025-05-29 13:45:03.313 +07:00 [INF] SyncMoviesService is starting.
2025-05-29 13:45:03.427 +07:00 [INF] CacheCleanupService is starting.
2025-05-29 13:45:05.016 +07:00 [WRN] Failed to determine the https port for redirect.
2025-05-29 13:46:03.405 +07:00 [INF] Starting safe movie synchronization...
2025-05-29 13:46:03.415 +07:00 [INF] Calling API endpoint: phim-moi/v1?page=1&limit=20
2025-05-29 13:46:06.231 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '2712.384'
2025-05-29 13:46:06.259 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":"2272f36ac8ee821bb87bfff301370308","name":"Ch\u1ecb D\u00e2u","slug":"chi-dau","year":"2024","loai_phim":"Phim l\u1ebb","quoc_gia":"Vi\u1ec7t Nam","modified":"2025-05-29 05:32:07"},{"id":"039b28c0e2a52524890797e9e0f29899","name":"Thanh Kh\u00e2m Ch\u00ed","slug":"thanh-kham-chi","year":"2025","loai_phim":"Phim b\u1ed9, Phim \u0111ang chi\u1ebfu","quoc_gia":"Trung Qu\u1ed1c","modified":"2025-05-29 04:28:59"},{"id":"5e13d1e382d895a5a58b40173eb7abfd","name":"Tri\u00eau D\u01b0\u01a1n...
2025-05-29 13:46:06.265 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 13:46:06.269 +07:00 [INF] Successfully cached 20 movies for page 1
2025-05-29 13:46:06.769 +07:00 [WRN] Failed to process movie: doraemon-nobita-va-chuyen-phieu-luu-vao-xu-quy
System.InvalidOperationException: The instance of entity type 'CachedMovie' cannot be tracked because another instance with the same key value for {'Slug'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.ThrowIdentityConflict(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry, Boolean updateDuplicate)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.NullableKeyIdentityMap`1.Add(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.StartTracking(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState oldState, EntityState newState, Boolean acceptChanges, Boolean modifyProperties)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState entityState, Boolean acceptChanges, Boolean modifyProperties, Nullable`1 forceStateWhenUnknownKey, Nullable`1 fallbackState)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.PaintAction(EntityEntryGraphNode`1 node)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityEntryGraphIterator.TraverseGraph[TState](EntityEntryGraphNode`1 node, Func`2 handleNode)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.AttachGraph(InternalEntityEntry rootEntry, EntityState targetState, EntityState storeGeneratedWithKeySetTargetState, Boolean forceStateWhenUnknownKey)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.SetEntityState(InternalEntityEntry entry, EntityState entityState)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.Add(TEntity entity)
   at WebAppApiPhim.BackgroundServices.SyncMoviesService.SafeSyncMovies(CancellationToken stoppingToken) in C:\D\Leaning\API\APICode\WebAppApiPhim\Services\SyncMoviesService.cs:line 105
2025-05-29 13:46:07.115 +07:00 [ERR] Failed executing DbCommand (110ms) [Parameters=[@p0='?' (Size = 100), @p1='?' (Size = 2000), @p2='?' (Size = 100), @p3='?' (Size = 50), @p4='?' (Size = 50), @p5='?' (DbType = DateTime2), @p6='?' (Size = 1000), @p7='?' (DbType = Double), @p8='?' (Size = 4000), @p9='?' (Size = 50), @p10='?' (Size = 1000), @p11='?' (Size = 500), @p12='?' (Size = 50), @p13='?' (Size = 1000), @p14='?' (DbType = Int64), @p15='?' (Size = 4), @p16='?' (Size = 100), @p17='?' (Size = 2000), @p18='?' (Size = 100), @p19='?' (Size = 50), @p20='?' (Size = 50), @p21='?' (DbType = DateTime2), @p22='?' (Size = 1000), @p23='?' (DbType = Double), @p24='?' (Size = 4000), @p25='?' (Size = 50), @p26='?' (Size = 1000), @p27='?' (Size = 500), @p28='?' (Size = 50), @p29='?' (Size = 1000), @p30='?' (DbType = Int64), @p31='?' (Size = 4), @p32='?' (Size = 100), @p33='?' (Size = 2000), @p34='?' (Size = 100), @p35='?' (Size = 50), @p36='?' (Size = 50), @p37='?' (DbType = DateTime2), @p38='?' (Size = 1000), @p39='?' (DbType = Double), @p40='?' (Size = 4000), @p41='?' (Size = 50), @p42='?' (Size = 1000), @p43='?' (Size = 500), @p44='?' (Size = 50), @p45='?' (Size = 1000), @p46='?' (DbType = Int64), @p47='?' (Size = 4), @p48='?' (Size = 100), @p49='?' (Size = 2000), @p50='?' (Size = 100), @p51='?' (Size = 50), @p52='?' (Size = 50), @p53='?' (DbType = DateTime2), @p54='?' (Size = 1000), @p55='?' (DbType = Double), @p56='?' (Size = 4000), @p57='?' (Size = 50), @p58='?' (Size = 1000), @p59='?' (Size = 500), @p60='?' (Size = 50), @p61='?' (Size = 1000), @p62='?' (DbType = Int64), @p63='?' (Size = 4), @p64='?' (Size = 100), @p65='?' (Size = 2000), @p66='?' (Size = 100), @p67='?' (Size = 50), @p68='?' (Size = 50), @p69='?' (DbType = DateTime2), @p70='?' (Size = 1000), @p71='?' (DbType = Double), @p72='?' (Size = 4000), @p73='?' (Size = 50), @p74='?' (Size = 1000), @p75='?' (Size = 500), @p76='?' (Size = 50), @p77='?' (Size = 1000), @p78='?' (DbType = Int64), @p79='?' (Size = 4), @p80='?' (Size = 100), @p81='?' (Size = 2000), @p82='?' (Size = 100), @p83='?' (Size = 50), @p84='?' (Size = 50), @p85='?' (DbType = DateTime2), @p86='?' (Size = 1000), @p87='?' (DbType = Double), @p88='?' (Size = 4000), @p89='?' (Size = 50), @p90='?' (Size = 1000), @p91='?' (Size = 500), @p92='?' (Size = 50), @p93='?' (Size = 1000), @p94='?' (DbType = Int64), @p95='?' (Size = 4), @p96='?' (Size = 100), @p97='?' (Size = 2000), @p98='?' (Size = 100), @p99='?' (Size = 50), @p100='?' (Size = 50), @p101='?' (DbType = DateTime2), @p102='?' (Size = 1000), @p103='?' (DbType = Double), @p104='?' (Size = 4000), @p105='?' (Size = 50), @p106='?' (Size = 1000), @p107='?' (Size = 500), @p108='?' (Size = 50), @p109='?' (Size = 1000), @p110='?' (DbType = Int64), @p111='?' (Size = 4), @p112='?' (Size = 100), @p113='?' (Size = 2000), @p114='?' (Size = 100), @p115='?' (Size = 50), @p116='?' (Size = 50), @p117='?' (DbType = DateTime2), @p118='?' (Size = 1000), @p119='?' (DbType = Double), @p120='?' (Size = 4000), @p121='?' (Size = 50), @p122='?' (Size = 1000), @p123='?' (Size = 500), @p124='?' (Size = 50), @p125='?' (Size = 1000), @p126='?' (DbType = Int64), @p127='?' (Size = 4), @p128='?' (Size = 100), @p129='?' (Size = 2000), @p130='?' (Size = 100), @p131='?' (Size = 50), @p132='?' (Size = 50), @p133='?' (DbType = DateTime2), @p134='?' (Size = 1000), @p135='?' (DbType = Double), @p136='?' (Size = 4000), @p137='?' (Size = 50), @p138='?' (Size = 1000), @p139='?' (Size = 500), @p140='?' (Size = 50), @p141='?' (Size = 1000), @p142='?' (DbType = Int64), @p143='?' (Size = 4), @p144='?' (Size = 100), @p145='?' (Size = 2000), @p146='?' (Size = 100), @p147='?' (Size = 50), @p148='?' (Size = 50), @p149='?' (DbType = DateTime2), @p150='?' (Size = 1000), @p151='?' (DbType = Double), @p152='?' (Size = 4000), @p153='?' (Size = 50), @p154='?' (Size = 1000), @p155='?' (Size = 500), @p156='?' (Size = 50), @p157='?' (Size = 1000), @p158='?' (DbType = Int64), @p159='?' (Size = 4), @p160='?' (Size = 100), @p161='?' (Size = 2000), @p162='?' (Size = 100), @p163='?' (Size = 50), @p164='?' (Size = 50), @p165='?' (DbType = DateTime2), @p166='?' (Size = 1000), @p167='?' (DbType = Double), @p168='?' (Size = 4000), @p169='?' (Size = 50), @p170='?' (Size = 1000), @p171='?' (Size = 500), @p172='?' (Size = 50), @p173='?' (Size = 1000), @p174='?' (DbType = Int64), @p175='?' (Size = 4), @p176='?' (Size = 100), @p177='?' (Size = 2000), @p178='?' (Size = 100), @p179='?' (Size = 50), @p180='?' (Size = 50), @p181='?' (DbType = DateTime2), @p182='?' (Size = 1000), @p183='?' (DbType = Double), @p184='?' (Size = 4000), @p185='?' (Size = 50), @p186='?' (Size = 1000), @p187='?' (Size = 500), @p188='?' (Size = 50), @p189='?' (Size = 1000), @p190='?' (DbType = Int64), @p191='?' (Size = 4), @p192='?' (Size = 100), @p193='?' (Size = 2000), @p194='?' (Size = 100), @p195='?' (Size = 50), @p196='?' (Size = 50), @p197='?' (DbType = DateTime2), @p198='?' (Size = 1000), @p199='?' (DbType = Double), @p200='?' (Size = 4000), @p201='?' (Size = 50), @p202='?' (Size = 1000), @p203='?' (Size = 500), @p204='?' (Size = 50), @p205='?' (Size = 1000), @p206='?' (DbType = Int64), @p207='?' (Size = 4), @p208='?' (Size = 100), @p209='?' (Size = 2000), @p210='?' (Size = 100), @p211='?' (Size = 50), @p212='?' (Size = 50), @p213='?' (DbType = DateTime2), @p214='?' (Size = 1000), @p215='?' (DbType = Double), @p216='?' (Size = 4000), @p217='?' (Size = 50), @p218='?' (Size = 1000), @p219='?' (Size = 500), @p220='?' (Size = 50), @p221='?' (Size = 1000), @p222='?' (DbType = Int64), @p223='?' (Size = 4)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [CachedMovies] ([Slug], [Description], [Director], [Duration], [Language], [LastUpdated], [PosterUrl], [Rating], [RawData], [Resolution], [ThumbUrl], [Title], [TmdbId], [TrailerUrl], [Views], [Year])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15),
(@p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31),
(@p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47),
(@p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63),
(@p64, @p65, @p66, @p67, @p68, @p69, @p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79),
(@p80, @p81, @p82, @p83, @p84, @p85, @p86, @p87, @p88, @p89, @p90, @p91, @p92, @p93, @p94, @p95),
(@p96, @p97, @p98, @p99, @p100, @p101, @p102, @p103, @p104, @p105, @p106, @p107, @p108, @p109, @p110, @p111),
(@p112, @p113, @p114, @p115, @p116, @p117, @p118, @p119, @p120, @p121, @p122, @p123, @p124, @p125, @p126, @p127),
(@p128, @p129, @p130, @p131, @p132, @p133, @p134, @p135, @p136, @p137, @p138, @p139, @p140, @p141, @p142, @p143),
(@p144, @p145, @p146, @p147, @p148, @p149, @p150, @p151, @p152, @p153, @p154, @p155, @p156, @p157, @p158, @p159),
(@p160, @p161, @p162, @p163, @p164, @p165, @p166, @p167, @p168, @p169, @p170, @p171, @p172, @p173, @p174, @p175),
(@p176, @p177, @p178, @p179, @p180, @p181, @p182, @p183, @p184, @p185, @p186, @p187, @p188, @p189, @p190, @p191),
(@p192, @p193, @p194, @p195, @p196, @p197, @p198, @p199, @p200, @p201, @p202, @p203, @p204, @p205, @p206, @p207),
(@p208, @p209, @p210, @p211, @p212, @p213, @p214, @p215, @p216, @p217, @p218, @p219, @p220, @p221, @p222, @p223);
2025-05-29 13:46:07.157 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'WebAppApiPhim.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_CachedMovies'. Cannot insert duplicate key in object 'dbo.CachedMovies'. The duplicate key value is (doraemon-nobita-va-chuyen-phieu-luu-vao-xu-quy).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:cb70d326-45f0-4e96-bff4-1f0998d9bc5e
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_CachedMovies'. Cannot insert duplicate key in object 'dbo.CachedMovies'. The duplicate key value is (doraemon-nobita-va-chuyen-phieu-luu-vao-xu-quy).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:cb70d326-45f0-4e96-bff4-1f0998d9bc5e
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-29 13:46:07.253 +07:00 [ERR] Failed to sync page 1
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_CachedMovies'. Cannot insert duplicate key in object 'dbo.CachedMovies'. The duplicate key value is (doraemon-nobita-va-chuyen-phieu-luu-vao-xu-quy).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:cb70d326-45f0-4e96-bff4-1f0998d9bc5e
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at WebAppApiPhim.BackgroundServices.SyncMoviesService.SafeSyncMovies(CancellationToken stoppingToken) in C:\D\Leaning\API\APICode\WebAppApiPhim\Services\SyncMoviesService.cs:line 118
2025-05-29 13:46:07.268 +07:00 [INF] Calling API endpoint: phim-moi/v1?page=2&limit=20
2025-05-29 13:46:08.739 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '1468.7441'
2025-05-29 13:46:09.007 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":"8ac95544093983249829baf38f28cb25","name":"Khom L\u01b0ng (Phong Ho\u1ea3 H\u1ed3ng Ti\u00eau)","slug":"khom-lung","year":"2025","loai_phim":"Phim b\u1ed9, Phim \u0111ang chi\u1ebfu","quoc_gia":"Trung Qu\u1ed1c","modified":"2025-05-28 19:08:08"},{"id":"be068d693cfefdf2afe808d90e2a9031","name":"T\u00e0ng H\u1ea3i Truy\u1ec7n","slug":"tang-hai-truyen","year":"2025","loai_phim":"Phim b\u1ed9, Phim \u0111ang chi\u1ebfu","quoc_gia":"Trung Qu\u1ed1c","modified":"2025-05-28 19:07:44"},{"...
2025-05-29 13:46:09.009 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 13:46:09.011 +07:00 [INF] Successfully cached 20 movies for page 2
2025-05-29 13:46:09.114 +07:00 [ERR] Failed executing DbCommand (45ms) [Parameters=[@p0='?' (Size = 100), @p1='?' (Size = 2000), @p2='?' (Size = 100), @p3='?' (Size = 50), @p4='?' (Size = 50), @p5='?' (DbType = DateTime2), @p6='?' (Size = 1000), @p7='?' (DbType = Double), @p8='?' (Size = 4000), @p9='?' (Size = 50), @p10='?' (Size = 1000), @p11='?' (Size = 500), @p12='?' (Size = 50), @p13='?' (Size = 1000), @p14='?' (DbType = Int64), @p15='?' (Size = 4), @p16='?' (Size = 100), @p17='?' (Size = 2000), @p18='?' (Size = 100), @p19='?' (Size = 50), @p20='?' (Size = 50), @p21='?' (DbType = DateTime2), @p22='?' (Size = 1000), @p23='?' (DbType = Double), @p24='?' (Size = 4000), @p25='?' (Size = 50), @p26='?' (Size = 1000), @p27='?' (Size = 500), @p28='?' (Size = 50), @p29='?' (Size = 1000), @p30='?' (DbType = Int64), @p31='?' (Size = 4), @p32='?' (Size = 100), @p33='?' (Size = 2000), @p34='?' (Size = 100), @p35='?' (Size = 50), @p36='?' (Size = 50), @p37='?' (DbType = DateTime2), @p38='?' (Size = 1000), @p39='?' (DbType = Double), @p40='?' (Size = 4000), @p41='?' (Size = 50), @p42='?' (Size = 1000), @p43='?' (Size = 500), @p44='?' (Size = 50), @p45='?' (Size = 1000), @p46='?' (DbType = Int64), @p47='?' (Size = 4), @p48='?' (Size = 100), @p49='?' (Size = 2000), @p50='?' (Size = 100), @p51='?' (Size = 50), @p52='?' (Size = 50), @p53='?' (DbType = DateTime2), @p54='?' (Size = 1000), @p55='?' (DbType = Double), @p56='?' (Size = 4000), @p57='?' (Size = 50), @p58='?' (Size = 1000), @p59='?' (Size = 500), @p60='?' (Size = 50), @p61='?' (Size = 1000), @p62='?' (DbType = Int64), @p63='?' (Size = 4), @p64='?' (Size = 100), @p65='?' (Size = 2000), @p66='?' (Size = 100), @p67='?' (Size = 50), @p68='?' (Size = 50), @p69='?' (DbType = DateTime2), @p70='?' (Size = 1000), @p71='?' (DbType = Double), @p72='?' (Size = 4000), @p73='?' (Size = 50), @p74='?' (Size = 1000), @p75='?' (Size = 500), @p76='?' (Size = 50), @p77='?' (Size = 1000), @p78='?' (DbType = Int64), @p79='?' (Size = 4), @p80='?' (Size = 100), @p81='?' (Size = 2000), @p82='?' (Size = 100), @p83='?' (Size = 50), @p84='?' (Size = 50), @p85='?' (DbType = DateTime2), @p86='?' (Size = 1000), @p87='?' (DbType = Double), @p88='?' (Size = 4000), @p89='?' (Size = 50), @p90='?' (Size = 1000), @p91='?' (Size = 500), @p92='?' (Size = 50), @p93='?' (Size = 1000), @p94='?' (DbType = Int64), @p95='?' (Size = 4), @p96='?' (Size = 100), @p97='?' (Size = 2000), @p98='?' (Size = 100), @p99='?' (Size = 50), @p100='?' (Size = 50), @p101='?' (DbType = DateTime2), @p102='?' (Size = 1000), @p103='?' (DbType = Double), @p104='?' (Size = 4000), @p105='?' (Size = 50), @p106='?' (Size = 1000), @p107='?' (Size = 500), @p108='?' (Size = 50), @p109='?' (Size = 1000), @p110='?' (DbType = Int64), @p111='?' (Size = 4), @p112='?' (Size = 100), @p113='?' (Size = 2000), @p114='?' (Size = 100), @p115='?' (Size = 50), @p116='?' (Size = 50), @p117='?' (DbType = DateTime2), @p118='?' (Size = 1000), @p119='?' (DbType = Double), @p120='?' (Size = 4000), @p121='?' (Size = 50), @p122='?' (Size = 1000), @p123='?' (Size = 500), @p124='?' (Size = 50), @p125='?' (Size = 1000), @p126='?' (DbType = Int64), @p127='?' (Size = 4), @p128='?' (Size = 100), @p129='?' (Size = 2000), @p130='?' (Size = 100), @p131='?' (Size = 50), @p132='?' (Size = 50), @p133='?' (DbType = DateTime2), @p134='?' (Size = 1000), @p135='?' (DbType = Double), @p136='?' (Size = 4000), @p137='?' (Size = 50), @p138='?' (Size = 1000), @p139='?' (Size = 500), @p140='?' (Size = 50), @p141='?' (Size = 1000), @p142='?' (DbType = Int64), @p143='?' (Size = 4), @p144='?' (Size = 100), @p145='?' (Size = 2000), @p146='?' (Size = 100), @p147='?' (Size = 50), @p148='?' (Size = 50), @p149='?' (DbType = DateTime2), @p150='?' (Size = 1000), @p151='?' (DbType = Double), @p152='?' (Size = 4000), @p153='?' (Size = 50), @p154='?' (Size = 1000), @p155='?' (Size = 500), @p156='?' (Size = 50), @p157='?' (Size = 1000), @p158='?' (DbType = Int64), @p159='?' (Size = 4), @p160='?' (Size = 100), @p161='?' (Size = 2000), @p162='?' (Size = 100), @p163='?' (Size = 50), @p164='?' (Size = 50), @p165='?' (DbType = DateTime2), @p166='?' (Size = 1000), @p167='?' (DbType = Double), @p168='?' (Size = 4000), @p169='?' (Size = 50), @p170='?' (Size = 1000), @p171='?' (Size = 500), @p172='?' (Size = 50), @p173='?' (Size = 1000), @p174='?' (DbType = Int64), @p175='?' (Size = 4), @p176='?' (Size = 100), @p177='?' (Size = 2000), @p178='?' (Size = 100), @p179='?' (Size = 50), @p180='?' (Size = 50), @p181='?' (DbType = DateTime2), @p182='?' (Size = 1000), @p183='?' (DbType = Double), @p184='?' (Size = 4000), @p185='?' (Size = 50), @p186='?' (Size = 1000), @p187='?' (Size = 500), @p188='?' (Size = 50), @p189='?' (Size = 1000), @p190='?' (DbType = Int64), @p191='?' (Size = 4), @p192='?' (Size = 100), @p193='?' (Size = 2000), @p194='?' (Size = 100), @p195='?' (Size = 50), @p196='?' (Size = 50), @p197='?' (DbType = DateTime2), @p198='?' (Size = 1000), @p199='?' (DbType = Double), @p200='?' (Size = 4000), @p201='?' (Size = 50), @p202='?' (Size = 1000), @p203='?' (Size = 500), @p204='?' (Size = 50), @p205='?' (Size = 1000), @p206='?' (DbType = Int64), @p207='?' (Size = 4), @p208='?' (Size = 100), @p209='?' (Size = 2000), @p210='?' (Size = 100), @p211='?' (Size = 50), @p212='?' (Size = 50), @p213='?' (DbType = DateTime2), @p214='?' (Size = 1000), @p215='?' (DbType = Double), @p216='?' (Size = 4000), @p217='?' (Size = 50), @p218='?' (Size = 1000), @p219='?' (Size = 500), @p220='?' (Size = 50), @p221='?' (Size = 1000), @p222='?' (DbType = Int64), @p223='?' (Size = 4), @p224='?' (Size = 100), @p225='?' (Size = 2000), @p226='?' (Size = 100), @p227='?' (Size = 50), @p228='?' (Size = 50), @p229='?' (DbType = DateTime2), @p230='?' (Size = 1000), @p231='?' (DbType = Double), @p232='?' (Size = 4000), @p233='?' (Size = 50), @p234='?' (Size = 1000), @p235='?' (Size = 500), @p236='?' (Size = 50), @p237='?' (Size = 1000), @p238='?' (DbType = Int64), @p239='?' (Size = 4), @p240='?' (Size = 100), @p241='?' (Size = 2000), @p242='?' (Size = 100), @p243='?' (Size = 50), @p244='?' (Size = 50), @p245='?' (DbType = DateTime2), @p246='?' (Size = 1000), @p247='?' (DbType = Double), @p248='?' (Size = 4000), @p249='?' (Size = 50), @p250='?' (Size = 1000), @p251='?' (Size = 500), @p252='?' (Size = 50), @p253='?' (Size = 1000), @p254='?' (DbType = Int64), @p255='?' (Size = 4), @p256='?' (Size = 100), @p257='?' (Size = 2000), @p258='?' (Size = 100), @p259='?' (Size = 50), @p260='?' (Size = 50), @p261='?' (DbType = DateTime2), @p262='?' (Size = 1000), @p263='?' (DbType = Double), @p264='?' (Size = 4000), @p265='?' (Size = 50), @p266='?' (Size = 1000), @p267='?' (Size = 500), @p268='?' (Size = 50), @p269='?' (Size = 1000), @p270='?' (DbType = Int64), @p271='?' (Size = 4), @p272='?' (Size = 100), @p273='?' (Size = 2000), @p274='?' (Size = 100), @p275='?' (Size = 50), @p276='?' (Size = 50), @p277='?' (DbType = DateTime2), @p278='?' (Size = 1000), @p279='?' (DbType = Double), @p280='?' (Size = 4000), @p281='?' (Size = 50), @p282='?' (Size = 1000), @p283='?' (Size = 500), @p284='?' (Size = 50), @p285='?' (Size = 1000), @p286='?' (DbType = Int64), @p287='?' (Size = 4), @p288='?' (Size = 100), @p289='?' (Size = 2000), @p290='?' (Size = 100), @p291='?' (Size = 50), @p292='?' (Size = 50), @p293='?' (DbType = DateTime2), @p294='?' (Size = 1000), @p295='?' (DbType = Double), @p296='?' (Size = 4000), @p297='?' (Size = 50), @p298='?' (Size = 1000), @p299='?' (Size = 500), @p300='?' (Size = 50), @p301='?' (Size = 1000), @p302='?' (DbType = Int64), @p303='?' (Size = 4), @p304='?' (Size = 100), @p305='?' (Size = 2000), @p306='?' (Size = 100), @p307='?' (Size = 50), @p308='?' (Size = 50), @p309='?' (DbType = DateTime2), @p310='?' (Size = 1000), @p311='?' (DbType = Double), @p312='?' (Size = 4000), @p313='?' (Size = 50), @p314='?' (Size = 1000), @p315='?' (Size = 500), @p316='?' (Size = 50), @p317='?' (Size = 1000), @p318='?' (DbType = Int64), @p319='?' (Size = 4), @p320='?' (Size = 100), @p321='?' (Size = 2000), @p322='?' (Size = 100), @p323='?' (Size = 50), @p324='?' (Size = 50), @p325='?' (DbType = DateTime2), @p326='?' (Size = 1000), @p327='?' (DbType = Double), @p328='?' (Size = 4000), @p329='?' (Size = 50), @p330='?' (Size = 1000), @p331='?' (Size = 500), @p332='?' (Size = 50), @p333='?' (Size = 1000), @p334='?' (DbType = Int64), @p335='?' (Size = 4), @p336='?' (Size = 100), @p337='?' (Size = 2000), @p338='?' (Size = 100), @p339='?' (Size = 50), @p340='?' (Size = 50), @p341='?' (DbType = DateTime2), @p342='?' (Size = 1000), @p343='?' (DbType = Double), @p344='?' (Size = 4000), @p345='?' (Size = 50), @p346='?' (Size = 1000), @p347='?' (Size = 500), @p348='?' (Size = 50), @p349='?' (Size = 1000), @p350='?' (DbType = Int64), @p351='?' (Size = 4), @p352='?' (Size = 100), @p353='?' (Size = 2000), @p354='?' (Size = 100), @p355='?' (Size = 50), @p356='?' (Size = 50), @p357='?' (DbType = DateTime2), @p358='?' (Size = 1000), @p359='?' (DbType = Double), @p360='?' (Size = 4000), @p361='?' (Size = 50), @p362='?' (Size = 1000), @p363='?' (Size = 500), @p364='?' (Size = 50), @p365='?' (Size = 1000), @p366='?' (DbType = Int64), @p367='?' (Size = 4), @p368='?' (Size = 100), @p369='?' (Size = 2000), @p370='?' (Size = 100), @p371='?' (Size = 50), @p372='?' (Size = 50), @p373='?' (DbType = DateTime2), @p374='?' (Size = 1000), @p375='?' (DbType = Double), @p376='?' (Size = 4000), @p377='?' (Size = 50), @p378='?' (Size = 1000), @p379='?' (Size = 500), @p380='?' (Size = 50), @p381='?' (Size = 1000), @p382='?' (DbType = Int64), @p383='?' (Size = 4), @p384='?' (Size = 100), @p385='?' (Size = 2000), @p386='?' (Size = 100), @p387='?' (Size = 50), @p388='?' (Size = 50), @p389='?' (DbType = DateTime2), @p390='?' (Size = 1000), @p391='?' (DbType = Double), @p392='?' (Size = 4000), @p393='?' (Size = 50), @p394='?' (Size = 1000), @p395='?' (Size = 500), @p396='?' (Size = 50), @p397='?' (Size = 1000), @p398='?' (DbType = Int64), @p399='?' (Size = 4), @p400='?' (Size = 100), @p401='?' (Size = 2000), @p402='?' (Size = 100), @p403='?' (Size = 50), @p404='?' (Size = 50), @p405='?' (DbType = DateTime2), @p406='?' (Size = 1000), @p407='?' (DbType = Double), @p408='?' (Size = 4000), @p409='?' (Size = 50), @p410='?' (Size = 1000), @p411='?' (Size = 500), @p412='?' (Size = 50), @p413='?' (Size = 1000), @p414='?' (DbType = Int64), @p415='?' (Size = 4), @p416='?' (Size = 100), @p417='?' (Size = 2000), @p418='?' (Size = 100), @p419='?' (Size = 50), @p420='?' (Size = 50), @p421='?' (DbType = DateTime2), @p422='?' (Size = 1000), @p423='?' (DbType = Double), @p424='?' (Size = 4000), @p425='?' (Size = 50), @p426='?' (Size = 1000), @p427='?' (Size = 500), @p428='?' (Size = 50), @p429='?' (Size = 1000), @p430='?' (DbType = Int64), @p431='?' (Size = 4), @p432='?' (Size = 100), @p433='?' (Size = 2000), @p434='?' (Size = 100), @p435='?' (Size = 50), @p436='?' (Size = 50), @p437='?' (DbType = DateTime2), @p438='?' (Size = 1000), @p439='?' (DbType = Double), @p440='?' (Size = 4000), @p441='?' (Size = 50), @p442='?' (Size = 1000), @p443='?' (Size = 500), @p444='?' (Size = 50), @p445='?' (Size = 1000), @p446='?' (DbType = Int64), @p447='?' (Size = 4), @p448='?' (Size = 100), @p449='?' (Size = 2000), @p450='?' (Size = 100), @p451='?' (Size = 50), @p452='?' (Size = 50), @p453='?' (DbType = DateTime2), @p454='?' (Size = 1000), @p455='?' (DbType = Double), @p456='?' (Size = 4000), @p457='?' (Size = 50), @p458='?' (Size = 1000), @p459='?' (Size = 500), @p460='?' (Size = 50), @p461='?' (Size = 1000), @p462='?' (DbType = Int64), @p463='?' (Size = 4), @p464='?' (Size = 100), @p465='?' (Size = 2000), @p466='?' (Size = 100), @p467='?' (Size = 50), @p468='?' (Size = 50), @p469='?' (DbType = DateTime2), @p470='?' (Size = 1000), @p471='?' (DbType = Double), @p472='?' (Size = 4000), @p473='?' (Size = 50), @p474='?' (Size = 1000), @p475='?' (Size = 500), @p476='?' (Size = 50), @p477='?' (Size = 1000), @p478='?' (DbType = Int64), @p479='?' (Size = 4), @p480='?' (Size = 100), @p481='?' (Size = 2000), @p482='?' (Size = 100), @p483='?' (Size = 50), @p484='?' (Size = 50), @p485='?' (DbType = DateTime2), @p486='?' (Size = 1000), @p487='?' (DbType = Double), @p488='?' (Size = 4000), @p489='?' (Size = 50), @p490='?' (Size = 1000), @p491='?' (Size = 500), @p492='?' (Size = 50), @p493='?' (Size = 1000), @p494='?' (DbType = Int64), @p495='?' (Size = 4)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [CachedMovies] ([Slug], [Description], [Director], [Duration], [Language], [LastUpdated], [PosterUrl], [Rating], [RawData], [Resolution], [ThumbUrl], [Title], [TmdbId], [TrailerUrl], [Views], [Year])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15),
(@p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31),
(@p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47),
(@p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63),
(@p64, @p65, @p66, @p67, @p68, @p69, @p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79),
(@p80, @p81, @p82, @p83, @p84, @p85, @p86, @p87, @p88, @p89, @p90, @p91, @p92, @p93, @p94, @p95),
(@p96, @p97, @p98, @p99, @p100, @p101, @p102, @p103, @p104, @p105, @p106, @p107, @p108, @p109, @p110, @p111),
(@p112, @p113, @p114, @p115, @p116, @p117, @p118, @p119, @p120, @p121, @p122, @p123, @p124, @p125, @p126, @p127),
(@p128, @p129, @p130, @p131, @p132, @p133, @p134, @p135, @p136, @p137, @p138, @p139, @p140, @p141, @p142, @p143),
(@p144, @p145, @p146, @p147, @p148, @p149, @p150, @p151, @p152, @p153, @p154, @p155, @p156, @p157, @p158, @p159),
(@p160, @p161, @p162, @p163, @p164, @p165, @p166, @p167, @p168, @p169, @p170, @p171, @p172, @p173, @p174, @p175),
(@p176, @p177, @p178, @p179, @p180, @p181, @p182, @p183, @p184, @p185, @p186, @p187, @p188, @p189, @p190, @p191),
(@p192, @p193, @p194, @p195, @p196, @p197, @p198, @p199, @p200, @p201, @p202, @p203, @p204, @p205, @p206, @p207),
(@p208, @p209, @p210, @p211, @p212, @p213, @p214, @p215, @p216, @p217, @p218, @p219, @p220, @p221, @p222, @p223),
(@p224, @p225, @p226, @p227, @p228, @p229, @p230, @p231, @p232, @p233, @p234, @p235, @p236, @p237, @p238, @p239),
(@p240, @p241, @p242, @p243, @p244, @p245, @p246, @p247, @p248, @p249, @p250, @p251, @p252, @p253, @p254, @p255),
(@p256, @p257, @p258, @p259, @p260, @p261, @p262, @p263, @p264, @p265, @p266, @p267, @p268, @p269, @p270, @p271),
(@p272, @p273, @p274, @p275, @p276, @p277, @p278, @p279, @p280, @p281, @p282, @p283, @p284, @p285, @p286, @p287),
(@p288, @p289, @p290, @p291, @p292, @p293, @p294, @p295, @p296, @p297, @p298, @p299, @p300, @p301, @p302, @p303),
(@p304, @p305, @p306, @p307, @p308, @p309, @p310, @p311, @p312, @p313, @p314, @p315, @p316, @p317, @p318, @p319),
(@p320, @p321, @p322, @p323, @p324, @p325, @p326, @p327, @p328, @p329, @p330, @p331, @p332, @p333, @p334, @p335),
(@p336, @p337, @p338, @p339, @p340, @p341, @p342, @p343, @p344, @p345, @p346, @p347, @p348, @p349, @p350, @p351),
(@p352, @p353, @p354, @p355, @p356, @p357, @p358, @p359, @p360, @p361, @p362, @p363, @p364, @p365, @p366, @p367),
(@p368, @p369, @p370, @p371, @p372, @p373, @p374, @p375, @p376, @p377, @p378, @p379, @p380, @p381, @p382, @p383),
(@p384, @p385, @p386, @p387, @p388, @p389, @p390, @p391, @p392, @p393, @p394, @p395, @p396, @p397, @p398, @p399),
(@p400, @p401, @p402, @p403, @p404, @p405, @p406, @p407, @p408, @p409, @p410, @p411, @p412, @p413, @p414, @p415),
(@p416, @p417, @p418, @p419, @p420, @p421, @p422, @p423, @p424, @p425, @p426, @p427, @p428, @p429, @p430, @p431),
(@p432, @p433, @p434, @p435, @p436, @p437, @p438, @p439, @p440, @p441, @p442, @p443, @p444, @p445, @p446, @p447),
(@p448, @p449, @p450, @p451, @p452, @p453, @p454, @p455, @p456, @p457, @p458, @p459, @p460, @p461, @p462, @p463),
(@p464, @p465, @p466, @p467, @p468, @p469, @p470, @p471, @p472, @p473, @p474, @p475, @p476, @p477, @p478, @p479),
(@p480, @p481, @p482, @p483, @p484, @p485, @p486, @p487, @p488, @p489, @p490, @p491, @p492, @p493, @p494, @p495);
2025-05-29 13:46:09.128 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'WebAppApiPhim.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_CachedMovies'. Cannot insert duplicate key in object 'dbo.CachedMovies'. The duplicate key value is (doraemon-nobita-va-chuyen-phieu-luu-vao-xu-quy).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:cb70d326-45f0-4e96-bff4-1f0998d9bc5e
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_CachedMovies'. Cannot insert duplicate key in object 'dbo.CachedMovies'. The duplicate key value is (doraemon-nobita-va-chuyen-phieu-luu-vao-xu-quy).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:cb70d326-45f0-4e96-bff4-1f0998d9bc5e
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-29 13:46:09.191 +07:00 [ERR] Failed to sync page 2
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_CachedMovies'. Cannot insert duplicate key in object 'dbo.CachedMovies'. The duplicate key value is (doraemon-nobita-va-chuyen-phieu-luu-vao-xu-quy).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:cb70d326-45f0-4e96-bff4-1f0998d9bc5e
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at WebAppApiPhim.BackgroundServices.SyncMoviesService.SafeSyncMovies(CancellationToken stoppingToken) in C:\D\Leaning\API\APICode\WebAppApiPhim\Services\SyncMoviesService.cs:line 118
2025-05-29 13:46:09.205 +07:00 [INF] Calling API endpoint: phim-moi/v1?page=3&limit=20
2025-05-29 13:46:09.558 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '350.7665'
2025-05-29 13:46:09.563 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":"87faa3ca9f7c03da0bbb0ed17fefa346","name":"Zatsu Tabi: That's Journey","slug":"zatsu-tabi-thats-journey","year":"2025","loai_phim":"Phim b\u1ed9","quoc_gia":"Nh\u1eadt B\u1ea3n","modified":"2025-05-28 11:33:10"},{"id":"27a1e0e31bf1a18797d26f7796f1ae4e","name":"Thanh G\u01b0\u01a1m Di\u1ec7t Qu\u1ef7 (Ph\u1ea7n 5)","slug":"thanh-guom-diet-quy-dai-tru-dac-huan","year":"2024","loai_phim":"Phim b\u1ed9","quoc_gia":"Nh\u1eadt B\u1ea3n","modified":"2025-05-28 11:30:17"},{"id":"e1f236269...
2025-05-29 13:46:09.565 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 13:46:09.568 +07:00 [INF] Successfully cached 20 movies for page 3
2025-05-29 13:46:09.711 +07:00 [ERR] Failed executing DbCommand (72ms) [Parameters=[@p0='?' (Size = 100), @p1='?' (Size = 2000), @p2='?' (Size = 100), @p3='?' (Size = 50), @p4='?' (Size = 50), @p5='?' (DbType = DateTime2), @p6='?' (Size = 1000), @p7='?' (DbType = Double), @p8='?' (Size = 4000), @p9='?' (Size = 50), @p10='?' (Size = 1000), @p11='?' (Size = 500), @p12='?' (Size = 50), @p13='?' (Size = 1000), @p14='?' (DbType = Int64), @p15='?' (Size = 4), @p16='?' (Size = 100), @p17='?' (Size = 2000), @p18='?' (Size = 100), @p19='?' (Size = 50), @p20='?' (Size = 50), @p21='?' (DbType = DateTime2), @p22='?' (Size = 1000), @p23='?' (DbType = Double), @p24='?' (Size = 4000), @p25='?' (Size = 50), @p26='?' (Size = 1000), @p27='?' (Size = 500), @p28='?' (Size = 50), @p29='?' (Size = 1000), @p30='?' (DbType = Int64), @p31='?' (Size = 4), @p32='?' (Size = 100), @p33='?' (Size = 2000), @p34='?' (Size = 100), @p35='?' (Size = 50), @p36='?' (Size = 50), @p37='?' (DbType = DateTime2), @p38='?' (Size = 1000), @p39='?' (DbType = Double), @p40='?' (Size = 4000), @p41='?' (Size = 50), @p42='?' (Size = 1000), @p43='?' (Size = 500), @p44='?' (Size = 50), @p45='?' (Size = 1000), @p46='?' (DbType = Int64), @p47='?' (Size = 4), @p48='?' (Size = 100), @p49='?' (Size = 2000), @p50='?' (Size = 100), @p51='?' (Size = 50), @p52='?' (Size = 50), @p53='?' (DbType = DateTime2), @p54='?' (Size = 1000), @p55='?' (DbType = Double), @p56='?' (Size = 4000), @p57='?' (Size = 50), @p58='?' (Size = 1000), @p59='?' (Size = 500), @p60='?' (Size = 50), @p61='?' (Size = 1000), @p62='?' (DbType = Int64), @p63='?' (Size = 4), @p64='?' (Size = 100), @p65='?' (Size = 2000), @p66='?' (Size = 100), @p67='?' (Size = 50), @p68='?' (Size = 50), @p69='?' (DbType = DateTime2), @p70='?' (Size = 1000), @p71='?' (DbType = Double), @p72='?' (Size = 4000), @p73='?' (Size = 50), @p74='?' (Size = 1000), @p75='?' (Size = 500), @p76='?' (Size = 50), @p77='?' (Size = 1000), @p78='?' (DbType = Int64), @p79='?' (Size = 4), @p80='?' (Size = 100), @p81='?' (Size = 2000), @p82='?' (Size = 100), @p83='?' (Size = 50), @p84='?' (Size = 50), @p85='?' (DbType = DateTime2), @p86='?' (Size = 1000), @p87='?' (DbType = Double), @p88='?' (Size = 4000), @p89='?' (Size = 50), @p90='?' (Size = 1000), @p91='?' (Size = 500), @p92='?' (Size = 50), @p93='?' (Size = 1000), @p94='?' (DbType = Int64), @p95='?' (Size = 4), @p96='?' (Size = 100), @p97='?' (Size = 2000), @p98='?' (Size = 100), @p99='?' (Size = 50), @p100='?' (Size = 50), @p101='?' (DbType = DateTime2), @p102='?' (Size = 1000), @p103='?' (DbType = Double), @p104='?' (Size = 4000), @p105='?' (Size = 50), @p106='?' (Size = 1000), @p107='?' (Size = 500), @p108='?' (Size = 50), @p109='?' (Size = 1000), @p110='?' (DbType = Int64), @p111='?' (Size = 4), @p112='?' (Size = 100), @p113='?' (Size = 2000), @p114='?' (Size = 100), @p115='?' (Size = 50), @p116='?' (Size = 50), @p117='?' (DbType = DateTime2), @p118='?' (Size = 1000), @p119='?' (DbType = Double), @p120='?' (Size = 4000), @p121='?' (Size = 50), @p122='?' (Size = 1000), @p123='?' (Size = 500), @p124='?' (Size = 50), @p125='?' (Size = 1000), @p126='?' (DbType = Int64), @p127='?' (Size = 4), @p128='?' (Size = 100), @p129='?' (Size = 2000), @p130='?' (Size = 100), @p131='?' (Size = 50), @p132='?' (Size = 50), @p133='?' (DbType = DateTime2), @p134='?' (Size = 1000), @p135='?' (DbType = Double), @p136='?' (Size = 4000), @p137='?' (Size = 50), @p138='?' (Size = 1000), @p139='?' (Size = 500), @p140='?' (Size = 50), @p141='?' (Size = 1000), @p142='?' (DbType = Int64), @p143='?' (Size = 4), @p144='?' (Size = 100), @p145='?' (Size = 2000), @p146='?' (Size = 100), @p147='?' (Size = 50), @p148='?' (Size = 50), @p149='?' (DbType = DateTime2), @p150='?' (Size = 1000), @p151='?' (DbType = Double), @p152='?' (Size = 4000), @p153='?' (Size = 50), @p154='?' (Size = 1000), @p155='?' (Size = 500), @p156='?' (Size = 50), @p157='?' (Size = 1000), @p158='?' (DbType = Int64), @p159='?' (Size = 4), @p160='?' (Size = 100), @p161='?' (Size = 2000), @p162='?' (Size = 100), @p163='?' (Size = 50), @p164='?' (Size = 50), @p165='?' (DbType = DateTime2), @p166='?' (Size = 1000), @p167='?' (DbType = Double), @p168='?' (Size = 4000), @p169='?' (Size = 50), @p170='?' (Size = 1000), @p171='?' (Size = 500), @p172='?' (Size = 50), @p173='?' (Size = 1000), @p174='?' (DbType = Int64), @p175='?' (Size = 4), @p176='?' (Size = 100), @p177='?' (Size = 2000), @p178='?' (Size = 100), @p179='?' (Size = 50), @p180='?' (Size = 50), @p181='?' (DbType = DateTime2), @p182='?' (Size = 1000), @p183='?' (DbType = Double), @p184='?' (Size = 4000), @p185='?' (Size = 50), @p186='?' (Size = 1000), @p187='?' (Size = 500), @p188='?' (Size = 50), @p189='?' (Size = 1000), @p190='?' (DbType = Int64), @p191='?' (Size = 4), @p192='?' (Size = 100), @p193='?' (Size = 2000), @p194='?' (Size = 100), @p195='?' (Size = 50), @p196='?' (Size = 50), @p197='?' (DbType = DateTime2), @p198='?' (Size = 1000), @p199='?' (DbType = Double), @p200='?' (Size = 4000), @p201='?' (Size = 50), @p202='?' (Size = 1000), @p203='?' (Size = 500), @p204='?' (Size = 50), @p205='?' (Size = 1000), @p206='?' (DbType = Int64), @p207='?' (Size = 4), @p208='?' (Size = 100), @p209='?' (Size = 2000), @p210='?' (Size = 100), @p211='?' (Size = 50), @p212='?' (Size = 50), @p213='?' (DbType = DateTime2), @p214='?' (Size = 1000), @p215='?' (DbType = Double), @p216='?' (Size = 4000), @p217='?' (Size = 50), @p218='?' (Size = 1000), @p219='?' (Size = 500), @p220='?' (Size = 50), @p221='?' (Size = 1000), @p222='?' (DbType = Int64), @p223='?' (Size = 4), @p224='?' (Size = 100), @p225='?' (Size = 2000), @p226='?' (Size = 100), @p227='?' (Size = 50), @p228='?' (Size = 50), @p229='?' (DbType = DateTime2), @p230='?' (Size = 1000), @p231='?' (DbType = Double), @p232='?' (Size = 4000), @p233='?' (Size = 50), @p234='?' (Size = 1000), @p235='?' (Size = 500), @p236='?' (Size = 50), @p237='?' (Size = 1000), @p238='?' (DbType = Int64), @p239='?' (Size = 4), @p240='?' (Size = 100), @p241='?' (Size = 2000), @p242='?' (Size = 100), @p243='?' (Size = 50), @p244='?' (Size = 50), @p245='?' (DbType = DateTime2), @p246='?' (Size = 1000), @p247='?' (DbType = Double), @p248='?' (Size = 4000), @p249='?' (Size = 50), @p250='?' (Size = 1000), @p251='?' (Size = 500), @p252='?' (Size = 50), @p253='?' (Size = 1000), @p254='?' (DbType = Int64), @p255='?' (Size = 4), @p256='?' (Size = 100), @p257='?' (Size = 2000), @p258='?' (Size = 100), @p259='?' (Size = 50), @p260='?' (Size = 50), @p261='?' (DbType = DateTime2), @p262='?' (Size = 1000), @p263='?' (DbType = Double), @p264='?' (Size = 4000), @p265='?' (Size = 50), @p266='?' (Size = 1000), @p267='?' (Size = 500), @p268='?' (Size = 50), @p269='?' (Size = 1000), @p270='?' (DbType = Int64), @p271='?' (Size = 4), @p272='?' (Size = 100), @p273='?' (Size = 2000), @p274='?' (Size = 100), @p275='?' (Size = 50), @p276='?' (Size = 50), @p277='?' (DbType = DateTime2), @p278='?' (Size = 1000), @p279='?' (DbType = Double), @p280='?' (Size = 4000), @p281='?' (Size = 50), @p282='?' (Size = 1000), @p283='?' (Size = 500), @p284='?' (Size = 50), @p285='?' (Size = 1000), @p286='?' (DbType = Int64), @p287='?' (Size = 4), @p288='?' (Size = 100), @p289='?' (Size = 2000), @p290='?' (Size = 100), @p291='?' (Size = 50), @p292='?' (Size = 50), @p293='?' (DbType = DateTime2), @p294='?' (Size = 1000), @p295='?' (DbType = Double), @p296='?' (Size = 4000), @p297='?' (Size = 50), @p298='?' (Size = 1000), @p299='?' (Size = 500), @p300='?' (Size = 50), @p301='?' (Size = 1000), @p302='?' (DbType = Int64), @p303='?' (Size = 4), @p304='?' (Size = 100), @p305='?' (Size = 2000), @p306='?' (Size = 100), @p307='?' (Size = 50), @p308='?' (Size = 50), @p309='?' (DbType = DateTime2), @p310='?' (Size = 1000), @p311='?' (DbType = Double), @p312='?' (Size = 4000), @p313='?' (Size = 50), @p314='?' (Size = 1000), @p315='?' (Size = 500), @p316='?' (Size = 50), @p317='?' (Size = 1000), @p318='?' (DbType = Int64), @p319='?' (Size = 4), @p320='?' (Size = 100), @p321='?' (Size = 2000), @p322='?' (Size = 100), @p323='?' (Size = 50), @p324='?' (Size = 50), @p325='?' (DbType = DateTime2), @p326='?' (Size = 1000), @p327='?' (DbType = Double), @p328='?' (Size = 4000), @p329='?' (Size = 50), @p330='?' (Size = 1000), @p331='?' (Size = 500), @p332='?' (Size = 50), @p333='?' (Size = 1000), @p334='?' (DbType = Int64), @p335='?' (Size = 4), @p336='?' (Size = 100), @p337='?' (Size = 2000), @p338='?' (Size = 100), @p339='?' (Size = 50), @p340='?' (Size = 50), @p341='?' (DbType = DateTime2), @p342='?' (Size = 1000), @p343='?' (DbType = Double), @p344='?' (Size = 4000), @p345='?' (Size = 50), @p346='?' (Size = 1000), @p347='?' (Size = 500), @p348='?' (Size = 50), @p349='?' (Size = 1000), @p350='?' (DbType = Int64), @p351='?' (Size = 4), @p352='?' (Size = 100), @p353='?' (Size = 2000), @p354='?' (Size = 100), @p355='?' (Size = 50), @p356='?' (Size = 50), @p357='?' (DbType = DateTime2), @p358='?' (Size = 1000), @p359='?' (DbType = Double), @p360='?' (Size = 4000), @p361='?' (Size = 50), @p362='?' (Size = 1000), @p363='?' (Size = 500), @p364='?' (Size = 50), @p365='?' (Size = 1000), @p366='?' (DbType = Int64), @p367='?' (Size = 4), @p368='?' (Size = 100), @p369='?' (Size = 2000), @p370='?' (Size = 100), @p371='?' (Size = 50), @p372='?' (Size = 50), @p373='?' (DbType = DateTime2), @p374='?' (Size = 1000), @p375='?' (DbType = Double), @p376='?' (Size = 4000), @p377='?' (Size = 50), @p378='?' (Size = 1000), @p379='?' (Size = 500), @p380='?' (Size = 50), @p381='?' (Size = 1000), @p382='?' (DbType = Int64), @p383='?' (Size = 4), @p384='?' (Size = 100), @p385='?' (Size = 2000), @p386='?' (Size = 100), @p387='?' (Size = 50), @p388='?' (Size = 50), @p389='?' (DbType = DateTime2), @p390='?' (Size = 1000), @p391='?' (DbType = Double), @p392='?' (Size = 4000), @p393='?' (Size = 50), @p394='?' (Size = 1000), @p395='?' (Size = 500), @p396='?' (Size = 50), @p397='?' (Size = 1000), @p398='?' (DbType = Int64), @p399='?' (Size = 4), @p400='?' (Size = 100), @p401='?' (Size = 2000), @p402='?' (Size = 100), @p403='?' (Size = 50), @p404='?' (Size = 50), @p405='?' (DbType = DateTime2), @p406='?' (Size = 1000), @p407='?' (DbType = Double), @p408='?' (Size = 4000), @p409='?' (Size = 50), @p410='?' (Size = 1000), @p411='?' (Size = 500), @p412='?' (Size = 50), @p413='?' (Size = 1000), @p414='?' (DbType = Int64), @p415='?' (Size = 4), @p416='?' (Size = 100), @p417='?' (Size = 2000), @p418='?' (Size = 100), @p419='?' (Size = 50), @p420='?' (Size = 50), @p421='?' (DbType = DateTime2), @p422='?' (Size = 1000), @p423='?' (DbType = Double), @p424='?' (Size = 4000), @p425='?' (Size = 50), @p426='?' (Size = 1000), @p427='?' (Size = 500), @p428='?' (Size = 50), @p429='?' (Size = 1000), @p430='?' (DbType = Int64), @p431='?' (Size = 4), @p432='?' (Size = 100), @p433='?' (Size = 2000), @p434='?' (Size = 100), @p435='?' (Size = 50), @p436='?' (Size = 50), @p437='?' (DbType = DateTime2), @p438='?' (Size = 1000), @p439='?' (DbType = Double), @p440='?' (Size = 4000), @p441='?' (Size = 50), @p442='?' (Size = 1000), @p443='?' (Size = 500), @p444='?' (Size = 50), @p445='?' (Size = 1000), @p446='?' (DbType = Int64), @p447='?' (Size = 4), @p448='?' (Size = 100), @p449='?' (Size = 2000), @p450='?' (Size = 100), @p451='?' (Size = 50), @p452='?' (Size = 50), @p453='?' (DbType = DateTime2), @p454='?' (Size = 1000), @p455='?' (DbType = Double), @p456='?' (Size = 4000), @p457='?' (Size = 50), @p458='?' (Size = 1000), @p459='?' (Size = 500), @p460='?' (Size = 50), @p461='?' (Size = 1000), @p462='?' (DbType = Int64), @p463='?' (Size = 4), @p464='?' (Size = 100), @p465='?' (Size = 2000), @p466='?' (Size = 100), @p467='?' (Size = 50), @p468='?' (Size = 50), @p469='?' (DbType = DateTime2), @p470='?' (Size = 1000), @p471='?' (DbType = Double), @p472='?' (Size = 4000), @p473='?' (Size = 50), @p474='?' (Size = 1000), @p475='?' (Size = 500), @p476='?' (Size = 50), @p477='?' (Size = 1000), @p478='?' (DbType = Int64), @p479='?' (Size = 4), @p480='?' (Size = 100), @p481='?' (Size = 2000), @p482='?' (Size = 100), @p483='?' (Size = 50), @p484='?' (Size = 50), @p485='?' (DbType = DateTime2), @p486='?' (Size = 1000), @p487='?' (DbType = Double), @p488='?' (Size = 4000), @p489='?' (Size = 50), @p490='?' (Size = 1000), @p491='?' (Size = 500), @p492='?' (Size = 50), @p493='?' (Size = 1000), @p494='?' (DbType = Int64), @p495='?' (Size = 4), @p496='?' (Size = 100), @p497='?' (Size = 2000), @p498='?' (Size = 100), @p499='?' (Size = 50), @p500='?' (Size = 50), @p501='?' (DbType = DateTime2), @p502='?' (Size = 1000), @p503='?' (DbType = Double), @p504='?' (Size = 4000), @p505='?' (Size = 50), @p506='?' (Size = 1000), @p507='?' (Size = 500), @p508='?' (Size = 50), @p509='?' (Size = 1000), @p510='?' (DbType = Int64), @p511='?' (Size = 4), @p512='?' (Size = 100), @p513='?' (Size = 2000), @p514='?' (Size = 100), @p515='?' (Size = 50), @p516='?' (Size = 50), @p517='?' (DbType = DateTime2), @p518='?' (Size = 1000), @p519='?' (DbType = Double), @p520='?' (Size = 4000), @p521='?' (Size = 50), @p522='?' (Size = 1000), @p523='?' (Size = 500), @p524='?' (Size = 50), @p525='?' (Size = 1000), @p526='?' (DbType = Int64), @p527='?' (Size = 4), @p528='?' (Size = 100), @p529='?' (Size = 2000), @p530='?' (Size = 100), @p531='?' (Size = 50), @p532='?' (Size = 50), @p533='?' (DbType = DateTime2), @p534='?' (Size = 1000), @p535='?' (DbType = Double), @p536='?' (Size = 4000), @p537='?' (Size = 50), @p538='?' (Size = 1000), @p539='?' (Size = 500), @p540='?' (Size = 50), @p541='?' (Size = 1000), @p542='?' (DbType = Int64), @p543='?' (Size = 4), @p544='?' (Size = 100), @p545='?' (Size = 2000), @p546='?' (Size = 100), @p547='?' (Size = 50), @p548='?' (Size = 50), @p549='?' (DbType = DateTime2), @p550='?' (Size = 1000), @p551='?' (DbType = Double), @p552='?' (Size = 4000), @p553='?' (Size = 50), @p554='?' (Size = 1000), @p555='?' (Size = 500), @p556='?' (Size = 50), @p557='?' (Size = 1000), @p558='?' (DbType = Int64), @p559='?' (Size = 4), @p560='?' (Size = 100), @p561='?' (Size = 2000), @p562='?' (Size = 100), @p563='?' (Size = 50), @p564='?' (Size = 50), @p565='?' (DbType = DateTime2), @p566='?' (Size = 1000), @p567='?' (DbType = Double), @p568='?' (Size = 4000), @p569='?' (Size = 50), @p570='?' (Size = 1000), @p571='?' (Size = 500), @p572='?' (Size = 50), @p573='?' (Size = 1000), @p574='?' (DbType = Int64), @p575='?' (Size = 4), @p576='?' (Size = 100), @p577='?' (Size = 2000), @p578='?' (Size = 100), @p579='?' (Size = 50), @p580='?' (Size = 50), @p581='?' (DbType = DateTime2), @p582='?' (Size = 1000), @p583='?' (DbType = Double), @p584='?' (Size = 4000), @p585='?' (Size = 50), @p586='?' (Size = 1000), @p587='?' (Size = 500), @p588='?' (Size = 50), @p589='?' (Size = 1000), @p590='?' (DbType = Int64), @p591='?' (Size = 4), @p592='?' (Size = 100), @p593='?' (Size = 2000), @p594='?' (Size = 100), @p595='?' (Size = 50), @p596='?' (Size = 50), @p597='?' (DbType = DateTime2), @p598='?' (Size = 1000), @p599='?' (DbType = Double), @p600='?' (Size = 4000), @p601='?' (Size = 50), @p602='?' (Size = 1000), @p603='?' (Size = 500), @p604='?' (Size = 50), @p605='?' (Size = 1000), @p606='?' (DbType = Int64), @p607='?' (Size = 4), @p608='?' (Size = 100), @p609='?' (Size = 2000), @p610='?' (Size = 100), @p611='?' (Size = 50), @p612='?' (Size = 50), @p613='?' (DbType = DateTime2), @p614='?' (Size = 1000), @p615='?' (DbType = Double), @p616='?' (Size = 4000), @p617='?' (Size = 50), @p618='?' (Size = 1000), @p619='?' (Size = 500), @p620='?' (Size = 50), @p621='?' (Size = 1000), @p622='?' (DbType = Int64), @p623='?' (Size = 4), @p624='?' (Size = 100), @p625='?' (Size = 2000), @p626='?' (Size = 100), @p627='?' (Size = 50), @p628='?' (Size = 50), @p629='?' (DbType = DateTime2), @p630='?' (Size = 1000), @p631='?' (DbType = Double), @p632='?' (Size = 4000), @p633='?' (Size = 50), @p634='?' (Size = 1000), @p635='?' (Size = 500), @p636='?' (Size = 50), @p637='?' (Size = 1000), @p638='?' (DbType = Int64), @p639='?' (Size = 4), @p640='?' (Size = 100), @p641='?' (Size = 2000), @p642='?' (Size = 100), @p643='?' (Size = 50), @p644='?' (Size = 50), @p645='?' (DbType = DateTime2), @p646='?' (Size = 1000), @p647='?' (DbType = Double), @p648='?' (Size = 4000), @p649='?' (Size = 50), @p650='?' (Size = 1000), @p651='?' (Size = 500), @p652='?' (Size = 50), @p653='?' (Size = 1000), @p654='?' (DbType = Int64), @p655='?' (Size = 4), @p656='?' (Size = 100), @p657='?' (Size = 2000), @p658='?' (Size = 100), @p659='?' (Size = 50), @p660='?' (Size = 50), @p661='?' (DbType = DateTime2), @p662='?' (Size = 1000), @p663='?' (DbType = Double), @p664='?' (Size = 4000), @p665='?' (Size = 50), @p666='?' (Size = 1000), @p667='?' (Size = 500), @p668='?' (Size = 50), @p669='?' (Size = 1000), @p670='?' (DbType = Int64), @p671='?' (Size = 4)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [CachedMovies] ([Slug], [Description], [Director], [Duration], [Language], [LastUpdated], [PosterUrl], [Rating], [RawData], [Resolution], [ThumbUrl], [Title], [TmdbId], [TrailerUrl], [Views], [Year])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15),
(@p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31),
(@p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47),
(@p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63),
(@p64, @p65, @p66, @p67, @p68, @p69, @p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79),
(@p80, @p81, @p82, @p83, @p84, @p85, @p86, @p87, @p88, @p89, @p90, @p91, @p92, @p93, @p94, @p95),
(@p96, @p97, @p98, @p99, @p100, @p101, @p102, @p103, @p104, @p105, @p106, @p107, @p108, @p109, @p110, @p111),
(@p112, @p113, @p114, @p115, @p116, @p117, @p118, @p119, @p120, @p121, @p122, @p123, @p124, @p125, @p126, @p127),
(@p128, @p129, @p130, @p131, @p132, @p133, @p134, @p135, @p136, @p137, @p138, @p139, @p140, @p141, @p142, @p143),
(@p144, @p145, @p146, @p147, @p148, @p149, @p150, @p151, @p152, @p153, @p154, @p155, @p156, @p157, @p158, @p159),
(@p160, @p161, @p162, @p163, @p164, @p165, @p166, @p167, @p168, @p169, @p170, @p171, @p172, @p173, @p174, @p175),
(@p176, @p177, @p178, @p179, @p180, @p181, @p182, @p183, @p184, @p185, @p186, @p187, @p188, @p189, @p190, @p191),
(@p192, @p193, @p194, @p195, @p196, @p197, @p198, @p199, @p200, @p201, @p202, @p203, @p204, @p205, @p206, @p207),
(@p208, @p209, @p210, @p211, @p212, @p213, @p214, @p215, @p216, @p217, @p218, @p219, @p220, @p221, @p222, @p223),
(@p224, @p225, @p226, @p227, @p228, @p229, @p230, @p231, @p232, @p233, @p234, @p235, @p236, @p237, @p238, @p239),
(@p240, @p241, @p242, @p243, @p244, @p245, @p246, @p247, @p248, @p249, @p250, @p251, @p252, @p253, @p254, @p255),
(@p256, @p257, @p258, @p259, @p260, @p261, @p262, @p263, @p264, @p265, @p266, @p267, @p268, @p269, @p270, @p271),
(@p272, @p273, @p274, @p275, @p276, @p277, @p278, @p279, @p280, @p281, @p282, @p283, @p284, @p285, @p286, @p287),
(@p288, @p289, @p290, @p291, @p292, @p293, @p294, @p295, @p296, @p297, @p298, @p299, @p300, @p301, @p302, @p303),
(@p304, @p305, @p306, @p307, @p308, @p309, @p310, @p311, @p312, @p313, @p314, @p315, @p316, @p317, @p318, @p319),
(@p320, @p321, @p322, @p323, @p324, @p325, @p326, @p327, @p328, @p329, @p330, @p331, @p332, @p333, @p334, @p335),
(@p336, @p337, @p338, @p339, @p340, @p341, @p342, @p343, @p344, @p345, @p346, @p347, @p348, @p349, @p350, @p351),
(@p352, @p353, @p354, @p355, @p356, @p357, @p358, @p359, @p360, @p361, @p362, @p363, @p364, @p365, @p366, @p367),
(@p368, @p369, @p370, @p371, @p372, @p373, @p374, @p375, @p376, @p377, @p378, @p379, @p380, @p381, @p382, @p383),
(@p384, @p385, @p386, @p387, @p388, @p389, @p390, @p391, @p392, @p393, @p394, @p395, @p396, @p397, @p398, @p399),
(@p400, @p401, @p402, @p403, @p404, @p405, @p406, @p407, @p408, @p409, @p410, @p411, @p412, @p413, @p414, @p415),
(@p416, @p417, @p418, @p419, @p420, @p421, @p422, @p423, @p424, @p425, @p426, @p427, @p428, @p429, @p430, @p431),
(@p432, @p433, @p434, @p435, @p436, @p437, @p438, @p439, @p440, @p441, @p442, @p443, @p444, @p445, @p446, @p447),
(@p448, @p449, @p450, @p451, @p452, @p453, @p454, @p455, @p456, @p457, @p458, @p459, @p460, @p461, @p462, @p463),
(@p464, @p465, @p466, @p467, @p468, @p469, @p470, @p471, @p472, @p473, @p474, @p475, @p476, @p477, @p478, @p479),
(@p480, @p481, @p482, @p483, @p484, @p485, @p486, @p487, @p488, @p489, @p490, @p491, @p492, @p493, @p494, @p495),
(@p496, @p497, @p498, @p499, @p500, @p501, @p502, @p503, @p504, @p505, @p506, @p507, @p508, @p509, @p510, @p511),
(@p512, @p513, @p514, @p515, @p516, @p517, @p518, @p519, @p520, @p521, @p522, @p523, @p524, @p525, @p526, @p527),
(@p528, @p529, @p530, @p531, @p532, @p533, @p534, @p535, @p536, @p537, @p538, @p539, @p540, @p541, @p542, @p543),
(@p544, @p545, @p546, @p547, @p548, @p549, @p550, @p551, @p552, @p553, @p554, @p555, @p556, @p557, @p558, @p559),
(@p560, @p561, @p562, @p563, @p564, @p565, @p566, @p567, @p568, @p569, @p570, @p571, @p572, @p573, @p574, @p575),
(@p576, @p577, @p578, @p579, @p580, @p581, @p582, @p583, @p584, @p585, @p586, @p587, @p588, @p589, @p590, @p591),
(@p592, @p593, @p594, @p595, @p596, @p597, @p598, @p599, @p600, @p601, @p602, @p603, @p604, @p605, @p606, @p607),
(@p608, @p609, @p610, @p611, @p612, @p613, @p614, @p615, @p616, @p617, @p618, @p619, @p620, @p621, @p622, @p623),
(@p624, @p625, @p626, @p627, @p628, @p629, @p630, @p631, @p632, @p633, @p634, @p635, @p636, @p637, @p638, @p639),
(@p640, @p641, @p642, @p643, @p644, @p645, @p646, @p647, @p648, @p649, @p650, @p651, @p652, @p653, @p654, @p655),
(@p656, @p657, @p658, @p659, @p660, @p661, @p662, @p663, @p664, @p665, @p666, @p667, @p668, @p669, @p670, @p671);
2025-05-29 13:46:09.732 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'WebAppApiPhim.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_CachedMovies'. Cannot insert duplicate key in object 'dbo.CachedMovies'. The duplicate key value is (doraemon-nobita-va-chuyen-phieu-luu-vao-xu-quy).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:cb70d326-45f0-4e96-bff4-1f0998d9bc5e
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_CachedMovies'. Cannot insert duplicate key in object 'dbo.CachedMovies'. The duplicate key value is (doraemon-nobita-va-chuyen-phieu-luu-vao-xu-quy).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:cb70d326-45f0-4e96-bff4-1f0998d9bc5e
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-29 13:46:09.793 +07:00 [ERR] Failed to sync page 3
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_CachedMovies'. Cannot insert duplicate key in object 'dbo.CachedMovies'. The duplicate key value is (doraemon-nobita-va-chuyen-phieu-luu-vao-xu-quy).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:cb70d326-45f0-4e96-bff4-1f0998d9bc5e
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at WebAppApiPhim.BackgroundServices.SyncMoviesService.SafeSyncMovies(CancellationToken stoppingToken) in C:\D\Leaning\API\APICode\WebAppApiPhim\Services\SyncMoviesService.cs:line 118
2025-05-29 13:46:09.805 +07:00 [INF] Movie synchronization completed. Synced 45 new movies.
2025-05-29 14:04:51.245 +07:00 [INF] SyncMoviesService is starting.
2025-05-29 14:04:51.334 +07:00 [INF] CacheCleanupService is starting.
2025-05-29 14:04:52.514 +07:00 [WRN] Failed to determine the https port for redirect.
2025-05-29 14:05:43.959 +07:00 [INF] Fetching movie detail from: phim-chi-tiet/v2?slug=fallback-movie
2025-05-29 14:05:51.328 +07:00 [INF] Starting safe movie synchronization...
2025-05-29 14:05:51.334 +07:00 [INF] Calling API endpoint: phim-moi/v1?page=1&limit=20
2025-05-29 14:05:53.361 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '2015.1241'
2025-05-29 14:05:53.386 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":"2272f36ac8ee821bb87bfff301370308","name":"Ch\u1ecb D\u00e2u","slug":"chi-dau","year":"2024","loai_phim":"Phim l\u1ebb","quoc_gia":"Vi\u1ec7t Nam","modified":"2025-05-29 05:32:07"},{"id":"039b28c0e2a52524890797e9e0f29899","name":"Thanh Kh\u00e2m Ch\u00ed","slug":"thanh-kham-chi","year":"2025","loai_phim":"Phim b\u1ed9, Phim \u0111ang chi\u1ebfu","quoc_gia":"Trung Qu\u1ed1c","modified":"2025-05-29 04:28:59"},{"id":"5e13d1e382d895a5a58b40173eb7abfd","name":"Tri\u00eau D\u01b0\u01a1n...
2025-05-29 14:05:53.393 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 14:05:53.397 +07:00 [INF] Successfully cached 20 movies for page 1
2025-05-29 14:05:53.701 +07:00 [WRN] Failed to process movie: doraemon-nobita-va-chuyen-phieu-luu-vao-xu-quy
System.InvalidOperationException: The instance of entity type 'CachedMovie' cannot be tracked because another instance with the same key value for {'Slug'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.ThrowIdentityConflict(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry, Boolean updateDuplicate)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.NullableKeyIdentityMap`1.Add(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.StartTracking(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState oldState, EntityState newState, Boolean acceptChanges, Boolean modifyProperties)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState entityState, Boolean acceptChanges, Boolean modifyProperties, Nullable`1 forceStateWhenUnknownKey, Nullable`1 fallbackState)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.PaintAction(EntityEntryGraphNode`1 node)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityEntryGraphIterator.TraverseGraph[TState](EntityEntryGraphNode`1 node, Func`2 handleNode)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.AttachGraph(InternalEntityEntry rootEntry, EntityState targetState, EntityState storeGeneratedWithKeySetTargetState, Boolean forceStateWhenUnknownKey)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.SetEntityState(InternalEntityEntry entry, EntityState entityState)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.Add(TEntity entity)
   at WebAppApiPhim.BackgroundServices.SyncMoviesService.SafeSyncMovies(CancellationToken stoppingToken) in C:\D\Leaning\API\APICode\WebAppApiPhim\Services\SyncMoviesService.cs:line 105
2025-05-29 14:05:53.929 +07:00 [ERR] Failed executing DbCommand (32ms) [Parameters=[@p0='?' (Size = 100), @p1='?' (Size = 2000), @p2='?' (Size = 100), @p3='?' (Size = 50), @p4='?' (Size = 50), @p5='?' (DbType = DateTime2), @p6='?' (Size = 1000), @p7='?' (DbType = Double), @p8='?' (Size = 4000), @p9='?' (Size = 50), @p10='?' (Size = 1000), @p11='?' (Size = 500), @p12='?' (Size = 50), @p13='?' (Size = 1000), @p14='?' (DbType = Int64), @p15='?' (Size = 4), @p16='?' (Size = 100), @p17='?' (Size = 2000), @p18='?' (Size = 100), @p19='?' (Size = 50), @p20='?' (Size = 50), @p21='?' (DbType = DateTime2), @p22='?' (Size = 1000), @p23='?' (DbType = Double), @p24='?' (Size = 4000), @p25='?' (Size = 50), @p26='?' (Size = 1000), @p27='?' (Size = 500), @p28='?' (Size = 50), @p29='?' (Size = 1000), @p30='?' (DbType = Int64), @p31='?' (Size = 4), @p32='?' (Size = 100), @p33='?' (Size = 2000), @p34='?' (Size = 100), @p35='?' (Size = 50), @p36='?' (Size = 50), @p37='?' (DbType = DateTime2), @p38='?' (Size = 1000), @p39='?' (DbType = Double), @p40='?' (Size = 4000), @p41='?' (Size = 50), @p42='?' (Size = 1000), @p43='?' (Size = 500), @p44='?' (Size = 50), @p45='?' (Size = 1000), @p46='?' (DbType = Int64), @p47='?' (Size = 4), @p48='?' (Size = 100), @p49='?' (Size = 2000), @p50='?' (Size = 100), @p51='?' (Size = 50), @p52='?' (Size = 50), @p53='?' (DbType = DateTime2), @p54='?' (Size = 1000), @p55='?' (DbType = Double), @p56='?' (Size = 4000), @p57='?' (Size = 50), @p58='?' (Size = 1000), @p59='?' (Size = 500), @p60='?' (Size = 50), @p61='?' (Size = 1000), @p62='?' (DbType = Int64), @p63='?' (Size = 4), @p64='?' (Size = 100), @p65='?' (Size = 2000), @p66='?' (Size = 100), @p67='?' (Size = 50), @p68='?' (Size = 50), @p69='?' (DbType = DateTime2), @p70='?' (Size = 1000), @p71='?' (DbType = Double), @p72='?' (Size = 4000), @p73='?' (Size = 50), @p74='?' (Size = 1000), @p75='?' (Size = 500), @p76='?' (Size = 50), @p77='?' (Size = 1000), @p78='?' (DbType = Int64), @p79='?' (Size = 4), @p80='?' (Size = 100), @p81='?' (Size = 2000), @p82='?' (Size = 100), @p83='?' (Size = 50), @p84='?' (Size = 50), @p85='?' (DbType = DateTime2), @p86='?' (Size = 1000), @p87='?' (DbType = Double), @p88='?' (Size = 4000), @p89='?' (Size = 50), @p90='?' (Size = 1000), @p91='?' (Size = 500), @p92='?' (Size = 50), @p93='?' (Size = 1000), @p94='?' (DbType = Int64), @p95='?' (Size = 4), @p96='?' (Size = 100), @p97='?' (Size = 2000), @p98='?' (Size = 100), @p99='?' (Size = 50), @p100='?' (Size = 50), @p101='?' (DbType = DateTime2), @p102='?' (Size = 1000), @p103='?' (DbType = Double), @p104='?' (Size = 4000), @p105='?' (Size = 50), @p106='?' (Size = 1000), @p107='?' (Size = 500), @p108='?' (Size = 50), @p109='?' (Size = 1000), @p110='?' (DbType = Int64), @p111='?' (Size = 4), @p112='?' (Size = 100), @p113='?' (Size = 2000), @p114='?' (Size = 100), @p115='?' (Size = 50), @p116='?' (Size = 50), @p117='?' (DbType = DateTime2), @p118='?' (Size = 1000), @p119='?' (DbType = Double), @p120='?' (Size = 4000), @p121='?' (Size = 50), @p122='?' (Size = 1000), @p123='?' (Size = 500), @p124='?' (Size = 50), @p125='?' (Size = 1000), @p126='?' (DbType = Int64), @p127='?' (Size = 4), @p128='?' (Size = 100), @p129='?' (Size = 2000), @p130='?' (Size = 100), @p131='?' (Size = 50), @p132='?' (Size = 50), @p133='?' (DbType = DateTime2), @p134='?' (Size = 1000), @p135='?' (DbType = Double), @p136='?' (Size = 4000), @p137='?' (Size = 50), @p138='?' (Size = 1000), @p139='?' (Size = 500), @p140='?' (Size = 50), @p141='?' (Size = 1000), @p142='?' (DbType = Int64), @p143='?' (Size = 4), @p144='?' (Size = 100), @p145='?' (Size = 2000), @p146='?' (Size = 100), @p147='?' (Size = 50), @p148='?' (Size = 50), @p149='?' (DbType = DateTime2), @p150='?' (Size = 1000), @p151='?' (DbType = Double), @p152='?' (Size = 4000), @p153='?' (Size = 50), @p154='?' (Size = 1000), @p155='?' (Size = 500), @p156='?' (Size = 50), @p157='?' (Size = 1000), @p158='?' (DbType = Int64), @p159='?' (Size = 4), @p160='?' (Size = 100), @p161='?' (Size = 2000), @p162='?' (Size = 100), @p163='?' (Size = 50), @p164='?' (Size = 50), @p165='?' (DbType = DateTime2), @p166='?' (Size = 1000), @p167='?' (DbType = Double), @p168='?' (Size = 4000), @p169='?' (Size = 50), @p170='?' (Size = 1000), @p171='?' (Size = 500), @p172='?' (Size = 50), @p173='?' (Size = 1000), @p174='?' (DbType = Int64), @p175='?' (Size = 4), @p176='?' (Size = 100), @p177='?' (Size = 2000), @p178='?' (Size = 100), @p179='?' (Size = 50), @p180='?' (Size = 50), @p181='?' (DbType = DateTime2), @p182='?' (Size = 1000), @p183='?' (DbType = Double), @p184='?' (Size = 4000), @p185='?' (Size = 50), @p186='?' (Size = 1000), @p187='?' (Size = 500), @p188='?' (Size = 50), @p189='?' (Size = 1000), @p190='?' (DbType = Int64), @p191='?' (Size = 4), @p192='?' (Size = 100), @p193='?' (Size = 2000), @p194='?' (Size = 100), @p195='?' (Size = 50), @p196='?' (Size = 50), @p197='?' (DbType = DateTime2), @p198='?' (Size = 1000), @p199='?' (DbType = Double), @p200='?' (Size = 4000), @p201='?' (Size = 50), @p202='?' (Size = 1000), @p203='?' (Size = 500), @p204='?' (Size = 50), @p205='?' (Size = 1000), @p206='?' (DbType = Int64), @p207='?' (Size = 4), @p208='?' (Size = 100), @p209='?' (Size = 2000), @p210='?' (Size = 100), @p211='?' (Size = 50), @p212='?' (Size = 50), @p213='?' (DbType = DateTime2), @p214='?' (Size = 1000), @p215='?' (DbType = Double), @p216='?' (Size = 4000), @p217='?' (Size = 50), @p218='?' (Size = 1000), @p219='?' (Size = 500), @p220='?' (Size = 50), @p221='?' (Size = 1000), @p222='?' (DbType = Int64), @p223='?' (Size = 4)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [CachedMovies] ([Slug], [Description], [Director], [Duration], [Language], [LastUpdated], [PosterUrl], [Rating], [RawData], [Resolution], [ThumbUrl], [Title], [TmdbId], [TrailerUrl], [Views], [Year])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15),
(@p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31),
(@p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47),
(@p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63),
(@p64, @p65, @p66, @p67, @p68, @p69, @p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79),
(@p80, @p81, @p82, @p83, @p84, @p85, @p86, @p87, @p88, @p89, @p90, @p91, @p92, @p93, @p94, @p95),
(@p96, @p97, @p98, @p99, @p100, @p101, @p102, @p103, @p104, @p105, @p106, @p107, @p108, @p109, @p110, @p111),
(@p112, @p113, @p114, @p115, @p116, @p117, @p118, @p119, @p120, @p121, @p122, @p123, @p124, @p125, @p126, @p127),
(@p128, @p129, @p130, @p131, @p132, @p133, @p134, @p135, @p136, @p137, @p138, @p139, @p140, @p141, @p142, @p143),
(@p144, @p145, @p146, @p147, @p148, @p149, @p150, @p151, @p152, @p153, @p154, @p155, @p156, @p157, @p158, @p159),
(@p160, @p161, @p162, @p163, @p164, @p165, @p166, @p167, @p168, @p169, @p170, @p171, @p172, @p173, @p174, @p175),
(@p176, @p177, @p178, @p179, @p180, @p181, @p182, @p183, @p184, @p185, @p186, @p187, @p188, @p189, @p190, @p191),
(@p192, @p193, @p194, @p195, @p196, @p197, @p198, @p199, @p200, @p201, @p202, @p203, @p204, @p205, @p206, @p207),
(@p208, @p209, @p210, @p211, @p212, @p213, @p214, @p215, @p216, @p217, @p218, @p219, @p220, @p221, @p222, @p223);
2025-05-29 14:05:53.967 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'WebAppApiPhim.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_CachedMovies'. Cannot insert duplicate key in object 'dbo.CachedMovies'. The duplicate key value is (doraemon-nobita-va-chuyen-phieu-luu-vao-xu-quy).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:d11d48d5-3786-4d1a-a615-2fe8e021812a
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_CachedMovies'. Cannot insert duplicate key in object 'dbo.CachedMovies'. The duplicate key value is (doraemon-nobita-va-chuyen-phieu-luu-vao-xu-quy).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:d11d48d5-3786-4d1a-a615-2fe8e021812a
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-29 14:05:54.055 +07:00 [ERR] Failed to sync page 1
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_CachedMovies'. Cannot insert duplicate key in object 'dbo.CachedMovies'. The duplicate key value is (doraemon-nobita-va-chuyen-phieu-luu-vao-xu-quy).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:d11d48d5-3786-4d1a-a615-2fe8e021812a
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at WebAppApiPhim.BackgroundServices.SyncMoviesService.SafeSyncMovies(CancellationToken stoppingToken) in C:\D\Leaning\API\APICode\WebAppApiPhim\Services\SyncMoviesService.cs:line 118
2025-05-29 14:05:54.072 +07:00 [INF] Calling API endpoint: phim-moi/v1?page=2&limit=20
2025-05-29 14:05:54.098 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '10062.3052'
2025-05-29 14:05:54.107 +07:00 [INF] Fetched and cached movie detail for: fallback-movie
2025-05-29 14:05:54.429 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '354.6531'
2025-05-29 14:05:54.435 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":"8ac95544093983249829baf38f28cb25","name":"Khom L\u01b0ng (Phong Ho\u1ea3 H\u1ed3ng Ti\u00eau)","slug":"khom-lung","year":"2025","loai_phim":"Phim b\u1ed9, Phim \u0111ang chi\u1ebfu","quoc_gia":"Trung Qu\u1ed1c","modified":"2025-05-28 19:08:08"},{"id":"be068d693cfefdf2afe808d90e2a9031","name":"T\u00e0ng H\u1ea3i Truy\u1ec7n","slug":"tang-hai-truyen","year":"2025","loai_phim":"Phim b\u1ed9, Phim \u0111ang chi\u1ebfu","quoc_gia":"Trung Qu\u1ed1c","modified":"2025-05-28 19:07:44"},{"...
2025-05-29 14:05:54.437 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 14:05:54.439 +07:00 [INF] Successfully cached 20 movies for page 2
2025-05-29 14:05:54.553 +07:00 [ERR] Failed executing DbCommand (47ms) [Parameters=[@p0='?' (Size = 100), @p1='?' (Size = 2000), @p2='?' (Size = 100), @p3='?' (Size = 50), @p4='?' (Size = 50), @p5='?' (DbType = DateTime2), @p6='?' (Size = 1000), @p7='?' (DbType = Double), @p8='?' (Size = 4000), @p9='?' (Size = 50), @p10='?' (Size = 1000), @p11='?' (Size = 500), @p12='?' (Size = 50), @p13='?' (Size = 1000), @p14='?' (DbType = Int64), @p15='?' (Size = 4), @p16='?' (Size = 100), @p17='?' (Size = 2000), @p18='?' (Size = 100), @p19='?' (Size = 50), @p20='?' (Size = 50), @p21='?' (DbType = DateTime2), @p22='?' (Size = 1000), @p23='?' (DbType = Double), @p24='?' (Size = 4000), @p25='?' (Size = 50), @p26='?' (Size = 1000), @p27='?' (Size = 500), @p28='?' (Size = 50), @p29='?' (Size = 1000), @p30='?' (DbType = Int64), @p31='?' (Size = 4), @p32='?' (Size = 100), @p33='?' (Size = 2000), @p34='?' (Size = 100), @p35='?' (Size = 50), @p36='?' (Size = 50), @p37='?' (DbType = DateTime2), @p38='?' (Size = 1000), @p39='?' (DbType = Double), @p40='?' (Size = 4000), @p41='?' (Size = 50), @p42='?' (Size = 1000), @p43='?' (Size = 500), @p44='?' (Size = 50), @p45='?' (Size = 1000), @p46='?' (DbType = Int64), @p47='?' (Size = 4), @p48='?' (Size = 100), @p49='?' (Size = 2000), @p50='?' (Size = 100), @p51='?' (Size = 50), @p52='?' (Size = 50), @p53='?' (DbType = DateTime2), @p54='?' (Size = 1000), @p55='?' (DbType = Double), @p56='?' (Size = 4000), @p57='?' (Size = 50), @p58='?' (Size = 1000), @p59='?' (Size = 500), @p60='?' (Size = 50), @p61='?' (Size = 1000), @p62='?' (DbType = Int64), @p63='?' (Size = 4), @p64='?' (Size = 100), @p65='?' (Size = 2000), @p66='?' (Size = 100), @p67='?' (Size = 50), @p68='?' (Size = 50), @p69='?' (DbType = DateTime2), @p70='?' (Size = 1000), @p71='?' (DbType = Double), @p72='?' (Size = 4000), @p73='?' (Size = 50), @p74='?' (Size = 1000), @p75='?' (Size = 500), @p76='?' (Size = 50), @p77='?' (Size = 1000), @p78='?' (DbType = Int64), @p79='?' (Size = 4), @p80='?' (Size = 100), @p81='?' (Size = 2000), @p82='?' (Size = 100), @p83='?' (Size = 50), @p84='?' (Size = 50), @p85='?' (DbType = DateTime2), @p86='?' (Size = 1000), @p87='?' (DbType = Double), @p88='?' (Size = 4000), @p89='?' (Size = 50), @p90='?' (Size = 1000), @p91='?' (Size = 500), @p92='?' (Size = 50), @p93='?' (Size = 1000), @p94='?' (DbType = Int64), @p95='?' (Size = 4), @p96='?' (Size = 100), @p97='?' (Size = 2000), @p98='?' (Size = 100), @p99='?' (Size = 50), @p100='?' (Size = 50), @p101='?' (DbType = DateTime2), @p102='?' (Size = 1000), @p103='?' (DbType = Double), @p104='?' (Size = 4000), @p105='?' (Size = 50), @p106='?' (Size = 1000), @p107='?' (Size = 500), @p108='?' (Size = 50), @p109='?' (Size = 1000), @p110='?' (DbType = Int64), @p111='?' (Size = 4), @p112='?' (Size = 100), @p113='?' (Size = 2000), @p114='?' (Size = 100), @p115='?' (Size = 50), @p116='?' (Size = 50), @p117='?' (DbType = DateTime2), @p118='?' (Size = 1000), @p119='?' (DbType = Double), @p120='?' (Size = 4000), @p121='?' (Size = 50), @p122='?' (Size = 1000), @p123='?' (Size = 500), @p124='?' (Size = 50), @p125='?' (Size = 1000), @p126='?' (DbType = Int64), @p127='?' (Size = 4), @p128='?' (Size = 100), @p129='?' (Size = 2000), @p130='?' (Size = 100), @p131='?' (Size = 50), @p132='?' (Size = 50), @p133='?' (DbType = DateTime2), @p134='?' (Size = 1000), @p135='?' (DbType = Double), @p136='?' (Size = 4000), @p137='?' (Size = 50), @p138='?' (Size = 1000), @p139='?' (Size = 500), @p140='?' (Size = 50), @p141='?' (Size = 1000), @p142='?' (DbType = Int64), @p143='?' (Size = 4), @p144='?' (Size = 100), @p145='?' (Size = 2000), @p146='?' (Size = 100), @p147='?' (Size = 50), @p148='?' (Size = 50), @p149='?' (DbType = DateTime2), @p150='?' (Size = 1000), @p151='?' (DbType = Double), @p152='?' (Size = 4000), @p153='?' (Size = 50), @p154='?' (Size = 1000), @p155='?' (Size = 500), @p156='?' (Size = 50), @p157='?' (Size = 1000), @p158='?' (DbType = Int64), @p159='?' (Size = 4), @p160='?' (Size = 100), @p161='?' (Size = 2000), @p162='?' (Size = 100), @p163='?' (Size = 50), @p164='?' (Size = 50), @p165='?' (DbType = DateTime2), @p166='?' (Size = 1000), @p167='?' (DbType = Double), @p168='?' (Size = 4000), @p169='?' (Size = 50), @p170='?' (Size = 1000), @p171='?' (Size = 500), @p172='?' (Size = 50), @p173='?' (Size = 1000), @p174='?' (DbType = Int64), @p175='?' (Size = 4), @p176='?' (Size = 100), @p177='?' (Size = 2000), @p178='?' (Size = 100), @p179='?' (Size = 50), @p180='?' (Size = 50), @p181='?' (DbType = DateTime2), @p182='?' (Size = 1000), @p183='?' (DbType = Double), @p184='?' (Size = 4000), @p185='?' (Size = 50), @p186='?' (Size = 1000), @p187='?' (Size = 500), @p188='?' (Size = 50), @p189='?' (Size = 1000), @p190='?' (DbType = Int64), @p191='?' (Size = 4), @p192='?' (Size = 100), @p193='?' (Size = 2000), @p194='?' (Size = 100), @p195='?' (Size = 50), @p196='?' (Size = 50), @p197='?' (DbType = DateTime2), @p198='?' (Size = 1000), @p199='?' (DbType = Double), @p200='?' (Size = 4000), @p201='?' (Size = 50), @p202='?' (Size = 1000), @p203='?' (Size = 500), @p204='?' (Size = 50), @p205='?' (Size = 1000), @p206='?' (DbType = Int64), @p207='?' (Size = 4), @p208='?' (Size = 100), @p209='?' (Size = 2000), @p210='?' (Size = 100), @p211='?' (Size = 50), @p212='?' (Size = 50), @p213='?' (DbType = DateTime2), @p214='?' (Size = 1000), @p215='?' (DbType = Double), @p216='?' (Size = 4000), @p217='?' (Size = 50), @p218='?' (Size = 1000), @p219='?' (Size = 500), @p220='?' (Size = 50), @p221='?' (Size = 1000), @p222='?' (DbType = Int64), @p223='?' (Size = 4), @p224='?' (Size = 100), @p225='?' (Size = 2000), @p226='?' (Size = 100), @p227='?' (Size = 50), @p228='?' (Size = 50), @p229='?' (DbType = DateTime2), @p230='?' (Size = 1000), @p231='?' (DbType = Double), @p232='?' (Size = 4000), @p233='?' (Size = 50), @p234='?' (Size = 1000), @p235='?' (Size = 500), @p236='?' (Size = 50), @p237='?' (Size = 1000), @p238='?' (DbType = Int64), @p239='?' (Size = 4), @p240='?' (Size = 100), @p241='?' (Size = 2000), @p242='?' (Size = 100), @p243='?' (Size = 50), @p244='?' (Size = 50), @p245='?' (DbType = DateTime2), @p246='?' (Size = 1000), @p247='?' (DbType = Double), @p248='?' (Size = 4000), @p249='?' (Size = 50), @p250='?' (Size = 1000), @p251='?' (Size = 500), @p252='?' (Size = 50), @p253='?' (Size = 1000), @p254='?' (DbType = Int64), @p255='?' (Size = 4), @p256='?' (Size = 100), @p257='?' (Size = 2000), @p258='?' (Size = 100), @p259='?' (Size = 50), @p260='?' (Size = 50), @p261='?' (DbType = DateTime2), @p262='?' (Size = 1000), @p263='?' (DbType = Double), @p264='?' (Size = 4000), @p265='?' (Size = 50), @p266='?' (Size = 1000), @p267='?' (Size = 500), @p268='?' (Size = 50), @p269='?' (Size = 1000), @p270='?' (DbType = Int64), @p271='?' (Size = 4), @p272='?' (Size = 100), @p273='?' (Size = 2000), @p274='?' (Size = 100), @p275='?' (Size = 50), @p276='?' (Size = 50), @p277='?' (DbType = DateTime2), @p278='?' (Size = 1000), @p279='?' (DbType = Double), @p280='?' (Size = 4000), @p281='?' (Size = 50), @p282='?' (Size = 1000), @p283='?' (Size = 500), @p284='?' (Size = 50), @p285='?' (Size = 1000), @p286='?' (DbType = Int64), @p287='?' (Size = 4), @p288='?' (Size = 100), @p289='?' (Size = 2000), @p290='?' (Size = 100), @p291='?' (Size = 50), @p292='?' (Size = 50), @p293='?' (DbType = DateTime2), @p294='?' (Size = 1000), @p295='?' (DbType = Double), @p296='?' (Size = 4000), @p297='?' (Size = 50), @p298='?' (Size = 1000), @p299='?' (Size = 500), @p300='?' (Size = 50), @p301='?' (Size = 1000), @p302='?' (DbType = Int64), @p303='?' (Size = 4), @p304='?' (Size = 100), @p305='?' (Size = 2000), @p306='?' (Size = 100), @p307='?' (Size = 50), @p308='?' (Size = 50), @p309='?' (DbType = DateTime2), @p310='?' (Size = 1000), @p311='?' (DbType = Double), @p312='?' (Size = 4000), @p313='?' (Size = 50), @p314='?' (Size = 1000), @p315='?' (Size = 500), @p316='?' (Size = 50), @p317='?' (Size = 1000), @p318='?' (DbType = Int64), @p319='?' (Size = 4), @p320='?' (Size = 100), @p321='?' (Size = 2000), @p322='?' (Size = 100), @p323='?' (Size = 50), @p324='?' (Size = 50), @p325='?' (DbType = DateTime2), @p326='?' (Size = 1000), @p327='?' (DbType = Double), @p328='?' (Size = 4000), @p329='?' (Size = 50), @p330='?' (Size = 1000), @p331='?' (Size = 500), @p332='?' (Size = 50), @p333='?' (Size = 1000), @p334='?' (DbType = Int64), @p335='?' (Size = 4), @p336='?' (Size = 100), @p337='?' (Size = 2000), @p338='?' (Size = 100), @p339='?' (Size = 50), @p340='?' (Size = 50), @p341='?' (DbType = DateTime2), @p342='?' (Size = 1000), @p343='?' (DbType = Double), @p344='?' (Size = 4000), @p345='?' (Size = 50), @p346='?' (Size = 1000), @p347='?' (Size = 500), @p348='?' (Size = 50), @p349='?' (Size = 1000), @p350='?' (DbType = Int64), @p351='?' (Size = 4), @p352='?' (Size = 100), @p353='?' (Size = 2000), @p354='?' (Size = 100), @p355='?' (Size = 50), @p356='?' (Size = 50), @p357='?' (DbType = DateTime2), @p358='?' (Size = 1000), @p359='?' (DbType = Double), @p360='?' (Size = 4000), @p361='?' (Size = 50), @p362='?' (Size = 1000), @p363='?' (Size = 500), @p364='?' (Size = 50), @p365='?' (Size = 1000), @p366='?' (DbType = Int64), @p367='?' (Size = 4), @p368='?' (Size = 100), @p369='?' (Size = 2000), @p370='?' (Size = 100), @p371='?' (Size = 50), @p372='?' (Size = 50), @p373='?' (DbType = DateTime2), @p374='?' (Size = 1000), @p375='?' (DbType = Double), @p376='?' (Size = 4000), @p377='?' (Size = 50), @p378='?' (Size = 1000), @p379='?' (Size = 500), @p380='?' (Size = 50), @p381='?' (Size = 1000), @p382='?' (DbType = Int64), @p383='?' (Size = 4), @p384='?' (Size = 100), @p385='?' (Size = 2000), @p386='?' (Size = 100), @p387='?' (Size = 50), @p388='?' (Size = 50), @p389='?' (DbType = DateTime2), @p390='?' (Size = 1000), @p391='?' (DbType = Double), @p392='?' (Size = 4000), @p393='?' (Size = 50), @p394='?' (Size = 1000), @p395='?' (Size = 500), @p396='?' (Size = 50), @p397='?' (Size = 1000), @p398='?' (DbType = Int64), @p399='?' (Size = 4), @p400='?' (Size = 100), @p401='?' (Size = 2000), @p402='?' (Size = 100), @p403='?' (Size = 50), @p404='?' (Size = 50), @p405='?' (DbType = DateTime2), @p406='?' (Size = 1000), @p407='?' (DbType = Double), @p408='?' (Size = 4000), @p409='?' (Size = 50), @p410='?' (Size = 1000), @p411='?' (Size = 500), @p412='?' (Size = 50), @p413='?' (Size = 1000), @p414='?' (DbType = Int64), @p415='?' (Size = 4), @p416='?' (Size = 100), @p417='?' (Size = 2000), @p418='?' (Size = 100), @p419='?' (Size = 50), @p420='?' (Size = 50), @p421='?' (DbType = DateTime2), @p422='?' (Size = 1000), @p423='?' (DbType = Double), @p424='?' (Size = 4000), @p425='?' (Size = 50), @p426='?' (Size = 1000), @p427='?' (Size = 500), @p428='?' (Size = 50), @p429='?' (Size = 1000), @p430='?' (DbType = Int64), @p431='?' (Size = 4), @p432='?' (Size = 100), @p433='?' (Size = 2000), @p434='?' (Size = 100), @p435='?' (Size = 50), @p436='?' (Size = 50), @p437='?' (DbType = DateTime2), @p438='?' (Size = 1000), @p439='?' (DbType = Double), @p440='?' (Size = 4000), @p441='?' (Size = 50), @p442='?' (Size = 1000), @p443='?' (Size = 500), @p444='?' (Size = 50), @p445='?' (Size = 1000), @p446='?' (DbType = Int64), @p447='?' (Size = 4), @p448='?' (Size = 100), @p449='?' (Size = 2000), @p450='?' (Size = 100), @p451='?' (Size = 50), @p452='?' (Size = 50), @p453='?' (DbType = DateTime2), @p454='?' (Size = 1000), @p455='?' (DbType = Double), @p456='?' (Size = 4000), @p457='?' (Size = 50), @p458='?' (Size = 1000), @p459='?' (Size = 500), @p460='?' (Size = 50), @p461='?' (Size = 1000), @p462='?' (DbType = Int64), @p463='?' (Size = 4), @p464='?' (Size = 100), @p465='?' (Size = 2000), @p466='?' (Size = 100), @p467='?' (Size = 50), @p468='?' (Size = 50), @p469='?' (DbType = DateTime2), @p470='?' (Size = 1000), @p471='?' (DbType = Double), @p472='?' (Size = 4000), @p473='?' (Size = 50), @p474='?' (Size = 1000), @p475='?' (Size = 500), @p476='?' (Size = 50), @p477='?' (Size = 1000), @p478='?' (DbType = Int64), @p479='?' (Size = 4), @p480='?' (Size = 100), @p481='?' (Size = 2000), @p482='?' (Size = 100), @p483='?' (Size = 50), @p484='?' (Size = 50), @p485='?' (DbType = DateTime2), @p486='?' (Size = 1000), @p487='?' (DbType = Double), @p488='?' (Size = 4000), @p489='?' (Size = 50), @p490='?' (Size = 1000), @p491='?' (Size = 500), @p492='?' (Size = 50), @p493='?' (Size = 1000), @p494='?' (DbType = Int64), @p495='?' (Size = 4)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [CachedMovies] ([Slug], [Description], [Director], [Duration], [Language], [LastUpdated], [PosterUrl], [Rating], [RawData], [Resolution], [ThumbUrl], [Title], [TmdbId], [TrailerUrl], [Views], [Year])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15),
(@p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31),
(@p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47),
(@p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63),
(@p64, @p65, @p66, @p67, @p68, @p69, @p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79),
(@p80, @p81, @p82, @p83, @p84, @p85, @p86, @p87, @p88, @p89, @p90, @p91, @p92, @p93, @p94, @p95),
(@p96, @p97, @p98, @p99, @p100, @p101, @p102, @p103, @p104, @p105, @p106, @p107, @p108, @p109, @p110, @p111),
(@p112, @p113, @p114, @p115, @p116, @p117, @p118, @p119, @p120, @p121, @p122, @p123, @p124, @p125, @p126, @p127),
(@p128, @p129, @p130, @p131, @p132, @p133, @p134, @p135, @p136, @p137, @p138, @p139, @p140, @p141, @p142, @p143),
(@p144, @p145, @p146, @p147, @p148, @p149, @p150, @p151, @p152, @p153, @p154, @p155, @p156, @p157, @p158, @p159),
(@p160, @p161, @p162, @p163, @p164, @p165, @p166, @p167, @p168, @p169, @p170, @p171, @p172, @p173, @p174, @p175),
(@p176, @p177, @p178, @p179, @p180, @p181, @p182, @p183, @p184, @p185, @p186, @p187, @p188, @p189, @p190, @p191),
(@p192, @p193, @p194, @p195, @p196, @p197, @p198, @p199, @p200, @p201, @p202, @p203, @p204, @p205, @p206, @p207),
(@p208, @p209, @p210, @p211, @p212, @p213, @p214, @p215, @p216, @p217, @p218, @p219, @p220, @p221, @p222, @p223),
(@p224, @p225, @p226, @p227, @p228, @p229, @p230, @p231, @p232, @p233, @p234, @p235, @p236, @p237, @p238, @p239),
(@p240, @p241, @p242, @p243, @p244, @p245, @p246, @p247, @p248, @p249, @p250, @p251, @p252, @p253, @p254, @p255),
(@p256, @p257, @p258, @p259, @p260, @p261, @p262, @p263, @p264, @p265, @p266, @p267, @p268, @p269, @p270, @p271),
(@p272, @p273, @p274, @p275, @p276, @p277, @p278, @p279, @p280, @p281, @p282, @p283, @p284, @p285, @p286, @p287),
(@p288, @p289, @p290, @p291, @p292, @p293, @p294, @p295, @p296, @p297, @p298, @p299, @p300, @p301, @p302, @p303),
(@p304, @p305, @p306, @p307, @p308, @p309, @p310, @p311, @p312, @p313, @p314, @p315, @p316, @p317, @p318, @p319),
(@p320, @p321, @p322, @p323, @p324, @p325, @p326, @p327, @p328, @p329, @p330, @p331, @p332, @p333, @p334, @p335),
(@p336, @p337, @p338, @p339, @p340, @p341, @p342, @p343, @p344, @p345, @p346, @p347, @p348, @p349, @p350, @p351),
(@p352, @p353, @p354, @p355, @p356, @p357, @p358, @p359, @p360, @p361, @p362, @p363, @p364, @p365, @p366, @p367),
(@p368, @p369, @p370, @p371, @p372, @p373, @p374, @p375, @p376, @p377, @p378, @p379, @p380, @p381, @p382, @p383),
(@p384, @p385, @p386, @p387, @p388, @p389, @p390, @p391, @p392, @p393, @p394, @p395, @p396, @p397, @p398, @p399),
(@p400, @p401, @p402, @p403, @p404, @p405, @p406, @p407, @p408, @p409, @p410, @p411, @p412, @p413, @p414, @p415),
(@p416, @p417, @p418, @p419, @p420, @p421, @p422, @p423, @p424, @p425, @p426, @p427, @p428, @p429, @p430, @p431),
(@p432, @p433, @p434, @p435, @p436, @p437, @p438, @p439, @p440, @p441, @p442, @p443, @p444, @p445, @p446, @p447),
(@p448, @p449, @p450, @p451, @p452, @p453, @p454, @p455, @p456, @p457, @p458, @p459, @p460, @p461, @p462, @p463),
(@p464, @p465, @p466, @p467, @p468, @p469, @p470, @p471, @p472, @p473, @p474, @p475, @p476, @p477, @p478, @p479),
(@p480, @p481, @p482, @p483, @p484, @p485, @p486, @p487, @p488, @p489, @p490, @p491, @p492, @p493, @p494, @p495);
2025-05-29 14:05:54.568 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'WebAppApiPhim.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_CachedMovies'. Cannot insert duplicate key in object 'dbo.CachedMovies'. The duplicate key value is (doraemon-nobita-va-chuyen-phieu-luu-vao-xu-quy).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:d11d48d5-3786-4d1a-a615-2fe8e021812a
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_CachedMovies'. Cannot insert duplicate key in object 'dbo.CachedMovies'. The duplicate key value is (doraemon-nobita-va-chuyen-phieu-luu-vao-xu-quy).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:d11d48d5-3786-4d1a-a615-2fe8e021812a
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-29 14:05:54.623 +07:00 [ERR] Failed to sync page 2
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_CachedMovies'. Cannot insert duplicate key in object 'dbo.CachedMovies'. The duplicate key value is (doraemon-nobita-va-chuyen-phieu-luu-vao-xu-quy).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:d11d48d5-3786-4d1a-a615-2fe8e021812a
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at WebAppApiPhim.BackgroundServices.SyncMoviesService.SafeSyncMovies(CancellationToken stoppingToken) in C:\D\Leaning\API\APICode\WebAppApiPhim\Services\SyncMoviesService.cs:line 118
2025-05-29 14:05:54.638 +07:00 [INF] Calling API endpoint: phim-moi/v1?page=3&limit=20
2025-05-29 14:05:54.984 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '343.8678'
2025-05-29 14:05:55.995 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":"87faa3ca9f7c03da0bbb0ed17fefa346","name":"Zatsu Tabi: That's Journey","slug":"zatsu-tabi-thats-journey","year":"2025","loai_phim":"Phim b\u1ed9","quoc_gia":"Nh\u1eadt B\u1ea3n","modified":"2025-05-28 11:33:10"},{"id":"27a1e0e31bf1a18797d26f7796f1ae4e","name":"Thanh G\u01b0\u01a1m Di\u1ec7t Qu\u1ef7 (Ph\u1ea7n 5)","slug":"thanh-guom-diet-quy-dai-tru-dac-huan","year":"2024","loai_phim":"Phim b\u1ed9","quoc_gia":"Nh\u1eadt B\u1ea3n","modified":"2025-05-28 11:30:17"},{"id":"e1f236269...
2025-05-29 14:05:55.998 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 14:05:56.001 +07:00 [INF] Successfully cached 20 movies for page 3
2025-05-29 14:05:56.138 +07:00 [ERR] Failed executing DbCommand (57ms) [Parameters=[@p0='?' (Size = 100), @p1='?' (Size = 2000), @p2='?' (Size = 100), @p3='?' (Size = 50), @p4='?' (Size = 50), @p5='?' (DbType = DateTime2), @p6='?' (Size = 1000), @p7='?' (DbType = Double), @p8='?' (Size = 4000), @p9='?' (Size = 50), @p10='?' (Size = 1000), @p11='?' (Size = 500), @p12='?' (Size = 50), @p13='?' (Size = 1000), @p14='?' (DbType = Int64), @p15='?' (Size = 4), @p16='?' (Size = 100), @p17='?' (Size = 2000), @p18='?' (Size = 100), @p19='?' (Size = 50), @p20='?' (Size = 50), @p21='?' (DbType = DateTime2), @p22='?' (Size = 1000), @p23='?' (DbType = Double), @p24='?' (Size = 4000), @p25='?' (Size = 50), @p26='?' (Size = 1000), @p27='?' (Size = 500), @p28='?' (Size = 50), @p29='?' (Size = 1000), @p30='?' (DbType = Int64), @p31='?' (Size = 4), @p32='?' (Size = 100), @p33='?' (Size = 2000), @p34='?' (Size = 100), @p35='?' (Size = 50), @p36='?' (Size = 50), @p37='?' (DbType = DateTime2), @p38='?' (Size = 1000), @p39='?' (DbType = Double), @p40='?' (Size = 4000), @p41='?' (Size = 50), @p42='?' (Size = 1000), @p43='?' (Size = 500), @p44='?' (Size = 50), @p45='?' (Size = 1000), @p46='?' (DbType = Int64), @p47='?' (Size = 4), @p48='?' (Size = 100), @p49='?' (Size = 2000), @p50='?' (Size = 100), @p51='?' (Size = 50), @p52='?' (Size = 50), @p53='?' (DbType = DateTime2), @p54='?' (Size = 1000), @p55='?' (DbType = Double), @p56='?' (Size = 4000), @p57='?' (Size = 50), @p58='?' (Size = 1000), @p59='?' (Size = 500), @p60='?' (Size = 50), @p61='?' (Size = 1000), @p62='?' (DbType = Int64), @p63='?' (Size = 4), @p64='?' (Size = 100), @p65='?' (Size = 2000), @p66='?' (Size = 100), @p67='?' (Size = 50), @p68='?' (Size = 50), @p69='?' (DbType = DateTime2), @p70='?' (Size = 1000), @p71='?' (DbType = Double), @p72='?' (Size = 4000), @p73='?' (Size = 50), @p74='?' (Size = 1000), @p75='?' (Size = 500), @p76='?' (Size = 50), @p77='?' (Size = 1000), @p78='?' (DbType = Int64), @p79='?' (Size = 4), @p80='?' (Size = 100), @p81='?' (Size = 2000), @p82='?' (Size = 100), @p83='?' (Size = 50), @p84='?' (Size = 50), @p85='?' (DbType = DateTime2), @p86='?' (Size = 1000), @p87='?' (DbType = Double), @p88='?' (Size = 4000), @p89='?' (Size = 50), @p90='?' (Size = 1000), @p91='?' (Size = 500), @p92='?' (Size = 50), @p93='?' (Size = 1000), @p94='?' (DbType = Int64), @p95='?' (Size = 4), @p96='?' (Size = 100), @p97='?' (Size = 2000), @p98='?' (Size = 100), @p99='?' (Size = 50), @p100='?' (Size = 50), @p101='?' (DbType = DateTime2), @p102='?' (Size = 1000), @p103='?' (DbType = Double), @p104='?' (Size = 4000), @p105='?' (Size = 50), @p106='?' (Size = 1000), @p107='?' (Size = 500), @p108='?' (Size = 50), @p109='?' (Size = 1000), @p110='?' (DbType = Int64), @p111='?' (Size = 4), @p112='?' (Size = 100), @p113='?' (Size = 2000), @p114='?' (Size = 100), @p115='?' (Size = 50), @p116='?' (Size = 50), @p117='?' (DbType = DateTime2), @p118='?' (Size = 1000), @p119='?' (DbType = Double), @p120='?' (Size = 4000), @p121='?' (Size = 50), @p122='?' (Size = 1000), @p123='?' (Size = 500), @p124='?' (Size = 50), @p125='?' (Size = 1000), @p126='?' (DbType = Int64), @p127='?' (Size = 4), @p128='?' (Size = 100), @p129='?' (Size = 2000), @p130='?' (Size = 100), @p131='?' (Size = 50), @p132='?' (Size = 50), @p133='?' (DbType = DateTime2), @p134='?' (Size = 1000), @p135='?' (DbType = Double), @p136='?' (Size = 4000), @p137='?' (Size = 50), @p138='?' (Size = 1000), @p139='?' (Size = 500), @p140='?' (Size = 50), @p141='?' (Size = 1000), @p142='?' (DbType = Int64), @p143='?' (Size = 4), @p144='?' (Size = 100), @p145='?' (Size = 2000), @p146='?' (Size = 100), @p147='?' (Size = 50), @p148='?' (Size = 50), @p149='?' (DbType = DateTime2), @p150='?' (Size = 1000), @p151='?' (DbType = Double), @p152='?' (Size = 4000), @p153='?' (Size = 50), @p154='?' (Size = 1000), @p155='?' (Size = 500), @p156='?' (Size = 50), @p157='?' (Size = 1000), @p158='?' (DbType = Int64), @p159='?' (Size = 4), @p160='?' (Size = 100), @p161='?' (Size = 2000), @p162='?' (Size = 100), @p163='?' (Size = 50), @p164='?' (Size = 50), @p165='?' (DbType = DateTime2), @p166='?' (Size = 1000), @p167='?' (DbType = Double), @p168='?' (Size = 4000), @p169='?' (Size = 50), @p170='?' (Size = 1000), @p171='?' (Size = 500), @p172='?' (Size = 50), @p173='?' (Size = 1000), @p174='?' (DbType = Int64), @p175='?' (Size = 4), @p176='?' (Size = 100), @p177='?' (Size = 2000), @p178='?' (Size = 100), @p179='?' (Size = 50), @p180='?' (Size = 50), @p181='?' (DbType = DateTime2), @p182='?' (Size = 1000), @p183='?' (DbType = Double), @p184='?' (Size = 4000), @p185='?' (Size = 50), @p186='?' (Size = 1000), @p187='?' (Size = 500), @p188='?' (Size = 50), @p189='?' (Size = 1000), @p190='?' (DbType = Int64), @p191='?' (Size = 4), @p192='?' (Size = 100), @p193='?' (Size = 2000), @p194='?' (Size = 100), @p195='?' (Size = 50), @p196='?' (Size = 50), @p197='?' (DbType = DateTime2), @p198='?' (Size = 1000), @p199='?' (DbType = Double), @p200='?' (Size = 4000), @p201='?' (Size = 50), @p202='?' (Size = 1000), @p203='?' (Size = 500), @p204='?' (Size = 50), @p205='?' (Size = 1000), @p206='?' (DbType = Int64), @p207='?' (Size = 4), @p208='?' (Size = 100), @p209='?' (Size = 2000), @p210='?' (Size = 100), @p211='?' (Size = 50), @p212='?' (Size = 50), @p213='?' (DbType = DateTime2), @p214='?' (Size = 1000), @p215='?' (DbType = Double), @p216='?' (Size = 4000), @p217='?' (Size = 50), @p218='?' (Size = 1000), @p219='?' (Size = 500), @p220='?' (Size = 50), @p221='?' (Size = 1000), @p222='?' (DbType = Int64), @p223='?' (Size = 4), @p224='?' (Size = 100), @p225='?' (Size = 2000), @p226='?' (Size = 100), @p227='?' (Size = 50), @p228='?' (Size = 50), @p229='?' (DbType = DateTime2), @p230='?' (Size = 1000), @p231='?' (DbType = Double), @p232='?' (Size = 4000), @p233='?' (Size = 50), @p234='?' (Size = 1000), @p235='?' (Size = 500), @p236='?' (Size = 50), @p237='?' (Size = 1000), @p238='?' (DbType = Int64), @p239='?' (Size = 4), @p240='?' (Size = 100), @p241='?' (Size = 2000), @p242='?' (Size = 100), @p243='?' (Size = 50), @p244='?' (Size = 50), @p245='?' (DbType = DateTime2), @p246='?' (Size = 1000), @p247='?' (DbType = Double), @p248='?' (Size = 4000), @p249='?' (Size = 50), @p250='?' (Size = 1000), @p251='?' (Size = 500), @p252='?' (Size = 50), @p253='?' (Size = 1000), @p254='?' (DbType = Int64), @p255='?' (Size = 4), @p256='?' (Size = 100), @p257='?' (Size = 2000), @p258='?' (Size = 100), @p259='?' (Size = 50), @p260='?' (Size = 50), @p261='?' (DbType = DateTime2), @p262='?' (Size = 1000), @p263='?' (DbType = Double), @p264='?' (Size = 4000), @p265='?' (Size = 50), @p266='?' (Size = 1000), @p267='?' (Size = 500), @p268='?' (Size = 50), @p269='?' (Size = 1000), @p270='?' (DbType = Int64), @p271='?' (Size = 4), @p272='?' (Size = 100), @p273='?' (Size = 2000), @p274='?' (Size = 100), @p275='?' (Size = 50), @p276='?' (Size = 50), @p277='?' (DbType = DateTime2), @p278='?' (Size = 1000), @p279='?' (DbType = Double), @p280='?' (Size = 4000), @p281='?' (Size = 50), @p282='?' (Size = 1000), @p283='?' (Size = 500), @p284='?' (Size = 50), @p285='?' (Size = 1000), @p286='?' (DbType = Int64), @p287='?' (Size = 4), @p288='?' (Size = 100), @p289='?' (Size = 2000), @p290='?' (Size = 100), @p291='?' (Size = 50), @p292='?' (Size = 50), @p293='?' (DbType = DateTime2), @p294='?' (Size = 1000), @p295='?' (DbType = Double), @p296='?' (Size = 4000), @p297='?' (Size = 50), @p298='?' (Size = 1000), @p299='?' (Size = 500), @p300='?' (Size = 50), @p301='?' (Size = 1000), @p302='?' (DbType = Int64), @p303='?' (Size = 4), @p304='?' (Size = 100), @p305='?' (Size = 2000), @p306='?' (Size = 100), @p307='?' (Size = 50), @p308='?' (Size = 50), @p309='?' (DbType = DateTime2), @p310='?' (Size = 1000), @p311='?' (DbType = Double), @p312='?' (Size = 4000), @p313='?' (Size = 50), @p314='?' (Size = 1000), @p315='?' (Size = 500), @p316='?' (Size = 50), @p317='?' (Size = 1000), @p318='?' (DbType = Int64), @p319='?' (Size = 4), @p320='?' (Size = 100), @p321='?' (Size = 2000), @p322='?' (Size = 100), @p323='?' (Size = 50), @p324='?' (Size = 50), @p325='?' (DbType = DateTime2), @p326='?' (Size = 1000), @p327='?' (DbType = Double), @p328='?' (Size = 4000), @p329='?' (Size = 50), @p330='?' (Size = 1000), @p331='?' (Size = 500), @p332='?' (Size = 50), @p333='?' (Size = 1000), @p334='?' (DbType = Int64), @p335='?' (Size = 4), @p336='?' (Size = 100), @p337='?' (Size = 2000), @p338='?' (Size = 100), @p339='?' (Size = 50), @p340='?' (Size = 50), @p341='?' (DbType = DateTime2), @p342='?' (Size = 1000), @p343='?' (DbType = Double), @p344='?' (Size = 4000), @p345='?' (Size = 50), @p346='?' (Size = 1000), @p347='?' (Size = 500), @p348='?' (Size = 50), @p349='?' (Size = 1000), @p350='?' (DbType = Int64), @p351='?' (Size = 4), @p352='?' (Size = 100), @p353='?' (Size = 2000), @p354='?' (Size = 100), @p355='?' (Size = 50), @p356='?' (Size = 50), @p357='?' (DbType = DateTime2), @p358='?' (Size = 1000), @p359='?' (DbType = Double), @p360='?' (Size = 4000), @p361='?' (Size = 50), @p362='?' (Size = 1000), @p363='?' (Size = 500), @p364='?' (Size = 50), @p365='?' (Size = 1000), @p366='?' (DbType = Int64), @p367='?' (Size = 4), @p368='?' (Size = 100), @p369='?' (Size = 2000), @p370='?' (Size = 100), @p371='?' (Size = 50), @p372='?' (Size = 50), @p373='?' (DbType = DateTime2), @p374='?' (Size = 1000), @p375='?' (DbType = Double), @p376='?' (Size = 4000), @p377='?' (Size = 50), @p378='?' (Size = 1000), @p379='?' (Size = 500), @p380='?' (Size = 50), @p381='?' (Size = 1000), @p382='?' (DbType = Int64), @p383='?' (Size = 4), @p384='?' (Size = 100), @p385='?' (Size = 2000), @p386='?' (Size = 100), @p387='?' (Size = 50), @p388='?' (Size = 50), @p389='?' (DbType = DateTime2), @p390='?' (Size = 1000), @p391='?' (DbType = Double), @p392='?' (Size = 4000), @p393='?' (Size = 50), @p394='?' (Size = 1000), @p395='?' (Size = 500), @p396='?' (Size = 50), @p397='?' (Size = 1000), @p398='?' (DbType = Int64), @p399='?' (Size = 4), @p400='?' (Size = 100), @p401='?' (Size = 2000), @p402='?' (Size = 100), @p403='?' (Size = 50), @p404='?' (Size = 50), @p405='?' (DbType = DateTime2), @p406='?' (Size = 1000), @p407='?' (DbType = Double), @p408='?' (Size = 4000), @p409='?' (Size = 50), @p410='?' (Size = 1000), @p411='?' (Size = 500), @p412='?' (Size = 50), @p413='?' (Size = 1000), @p414='?' (DbType = Int64), @p415='?' (Size = 4), @p416='?' (Size = 100), @p417='?' (Size = 2000), @p418='?' (Size = 100), @p419='?' (Size = 50), @p420='?' (Size = 50), @p421='?' (DbType = DateTime2), @p422='?' (Size = 1000), @p423='?' (DbType = Double), @p424='?' (Size = 4000), @p425='?' (Size = 50), @p426='?' (Size = 1000), @p427='?' (Size = 500), @p428='?' (Size = 50), @p429='?' (Size = 1000), @p430='?' (DbType = Int64), @p431='?' (Size = 4), @p432='?' (Size = 100), @p433='?' (Size = 2000), @p434='?' (Size = 100), @p435='?' (Size = 50), @p436='?' (Size = 50), @p437='?' (DbType = DateTime2), @p438='?' (Size = 1000), @p439='?' (DbType = Double), @p440='?' (Size = 4000), @p441='?' (Size = 50), @p442='?' (Size = 1000), @p443='?' (Size = 500), @p444='?' (Size = 50), @p445='?' (Size = 1000), @p446='?' (DbType = Int64), @p447='?' (Size = 4), @p448='?' (Size = 100), @p449='?' (Size = 2000), @p450='?' (Size = 100), @p451='?' (Size = 50), @p452='?' (Size = 50), @p453='?' (DbType = DateTime2), @p454='?' (Size = 1000), @p455='?' (DbType = Double), @p456='?' (Size = 4000), @p457='?' (Size = 50), @p458='?' (Size = 1000), @p459='?' (Size = 500), @p460='?' (Size = 50), @p461='?' (Size = 1000), @p462='?' (DbType = Int64), @p463='?' (Size = 4), @p464='?' (Size = 100), @p465='?' (Size = 2000), @p466='?' (Size = 100), @p467='?' (Size = 50), @p468='?' (Size = 50), @p469='?' (DbType = DateTime2), @p470='?' (Size = 1000), @p471='?' (DbType = Double), @p472='?' (Size = 4000), @p473='?' (Size = 50), @p474='?' (Size = 1000), @p475='?' (Size = 500), @p476='?' (Size = 50), @p477='?' (Size = 1000), @p478='?' (DbType = Int64), @p479='?' (Size = 4), @p480='?' (Size = 100), @p481='?' (Size = 2000), @p482='?' (Size = 100), @p483='?' (Size = 50), @p484='?' (Size = 50), @p485='?' (DbType = DateTime2), @p486='?' (Size = 1000), @p487='?' (DbType = Double), @p488='?' (Size = 4000), @p489='?' (Size = 50), @p490='?' (Size = 1000), @p491='?' (Size = 500), @p492='?' (Size = 50), @p493='?' (Size = 1000), @p494='?' (DbType = Int64), @p495='?' (Size = 4), @p496='?' (Size = 100), @p497='?' (Size = 2000), @p498='?' (Size = 100), @p499='?' (Size = 50), @p500='?' (Size = 50), @p501='?' (DbType = DateTime2), @p502='?' (Size = 1000), @p503='?' (DbType = Double), @p504='?' (Size = 4000), @p505='?' (Size = 50), @p506='?' (Size = 1000), @p507='?' (Size = 500), @p508='?' (Size = 50), @p509='?' (Size = 1000), @p510='?' (DbType = Int64), @p511='?' (Size = 4), @p512='?' (Size = 100), @p513='?' (Size = 2000), @p514='?' (Size = 100), @p515='?' (Size = 50), @p516='?' (Size = 50), @p517='?' (DbType = DateTime2), @p518='?' (Size = 1000), @p519='?' (DbType = Double), @p520='?' (Size = 4000), @p521='?' (Size = 50), @p522='?' (Size = 1000), @p523='?' (Size = 500), @p524='?' (Size = 50), @p525='?' (Size = 1000), @p526='?' (DbType = Int64), @p527='?' (Size = 4), @p528='?' (Size = 100), @p529='?' (Size = 2000), @p530='?' (Size = 100), @p531='?' (Size = 50), @p532='?' (Size = 50), @p533='?' (DbType = DateTime2), @p534='?' (Size = 1000), @p535='?' (DbType = Double), @p536='?' (Size = 4000), @p537='?' (Size = 50), @p538='?' (Size = 1000), @p539='?' (Size = 500), @p540='?' (Size = 50), @p541='?' (Size = 1000), @p542='?' (DbType = Int64), @p543='?' (Size = 4), @p544='?' (Size = 100), @p545='?' (Size = 2000), @p546='?' (Size = 100), @p547='?' (Size = 50), @p548='?' (Size = 50), @p549='?' (DbType = DateTime2), @p550='?' (Size = 1000), @p551='?' (DbType = Double), @p552='?' (Size = 4000), @p553='?' (Size = 50), @p554='?' (Size = 1000), @p555='?' (Size = 500), @p556='?' (Size = 50), @p557='?' (Size = 1000), @p558='?' (DbType = Int64), @p559='?' (Size = 4), @p560='?' (Size = 100), @p561='?' (Size = 2000), @p562='?' (Size = 100), @p563='?' (Size = 50), @p564='?' (Size = 50), @p565='?' (DbType = DateTime2), @p566='?' (Size = 1000), @p567='?' (DbType = Double), @p568='?' (Size = 4000), @p569='?' (Size = 50), @p570='?' (Size = 1000), @p571='?' (Size = 500), @p572='?' (Size = 50), @p573='?' (Size = 1000), @p574='?' (DbType = Int64), @p575='?' (Size = 4), @p576='?' (Size = 100), @p577='?' (Size = 2000), @p578='?' (Size = 100), @p579='?' (Size = 50), @p580='?' (Size = 50), @p581='?' (DbType = DateTime2), @p582='?' (Size = 1000), @p583='?' (DbType = Double), @p584='?' (Size = 4000), @p585='?' (Size = 50), @p586='?' (Size = 1000), @p587='?' (Size = 500), @p588='?' (Size = 50), @p589='?' (Size = 1000), @p590='?' (DbType = Int64), @p591='?' (Size = 4), @p592='?' (Size = 100), @p593='?' (Size = 2000), @p594='?' (Size = 100), @p595='?' (Size = 50), @p596='?' (Size = 50), @p597='?' (DbType = DateTime2), @p598='?' (Size = 1000), @p599='?' (DbType = Double), @p600='?' (Size = 4000), @p601='?' (Size = 50), @p602='?' (Size = 1000), @p603='?' (Size = 500), @p604='?' (Size = 50), @p605='?' (Size = 1000), @p606='?' (DbType = Int64), @p607='?' (Size = 4), @p608='?' (Size = 100), @p609='?' (Size = 2000), @p610='?' (Size = 100), @p611='?' (Size = 50), @p612='?' (Size = 50), @p613='?' (DbType = DateTime2), @p614='?' (Size = 1000), @p615='?' (DbType = Double), @p616='?' (Size = 4000), @p617='?' (Size = 50), @p618='?' (Size = 1000), @p619='?' (Size = 500), @p620='?' (Size = 50), @p621='?' (Size = 1000), @p622='?' (DbType = Int64), @p623='?' (Size = 4), @p624='?' (Size = 100), @p625='?' (Size = 2000), @p626='?' (Size = 100), @p627='?' (Size = 50), @p628='?' (Size = 50), @p629='?' (DbType = DateTime2), @p630='?' (Size = 1000), @p631='?' (DbType = Double), @p632='?' (Size = 4000), @p633='?' (Size = 50), @p634='?' (Size = 1000), @p635='?' (Size = 500), @p636='?' (Size = 50), @p637='?' (Size = 1000), @p638='?' (DbType = Int64), @p639='?' (Size = 4), @p640='?' (Size = 100), @p641='?' (Size = 2000), @p642='?' (Size = 100), @p643='?' (Size = 50), @p644='?' (Size = 50), @p645='?' (DbType = DateTime2), @p646='?' (Size = 1000), @p647='?' (DbType = Double), @p648='?' (Size = 4000), @p649='?' (Size = 50), @p650='?' (Size = 1000), @p651='?' (Size = 500), @p652='?' (Size = 50), @p653='?' (Size = 1000), @p654='?' (DbType = Int64), @p655='?' (Size = 4), @p656='?' (Size = 100), @p657='?' (Size = 2000), @p658='?' (Size = 100), @p659='?' (Size = 50), @p660='?' (Size = 50), @p661='?' (DbType = DateTime2), @p662='?' (Size = 1000), @p663='?' (DbType = Double), @p664='?' (Size = 4000), @p665='?' (Size = 50), @p666='?' (Size = 1000), @p667='?' (Size = 500), @p668='?' (Size = 50), @p669='?' (Size = 1000), @p670='?' (DbType = Int64), @p671='?' (Size = 4)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [CachedMovies] ([Slug], [Description], [Director], [Duration], [Language], [LastUpdated], [PosterUrl], [Rating], [RawData], [Resolution], [ThumbUrl], [Title], [TmdbId], [TrailerUrl], [Views], [Year])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15),
(@p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31),
(@p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47),
(@p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63),
(@p64, @p65, @p66, @p67, @p68, @p69, @p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79),
(@p80, @p81, @p82, @p83, @p84, @p85, @p86, @p87, @p88, @p89, @p90, @p91, @p92, @p93, @p94, @p95),
(@p96, @p97, @p98, @p99, @p100, @p101, @p102, @p103, @p104, @p105, @p106, @p107, @p108, @p109, @p110, @p111),
(@p112, @p113, @p114, @p115, @p116, @p117, @p118, @p119, @p120, @p121, @p122, @p123, @p124, @p125, @p126, @p127),
(@p128, @p129, @p130, @p131, @p132, @p133, @p134, @p135, @p136, @p137, @p138, @p139, @p140, @p141, @p142, @p143),
(@p144, @p145, @p146, @p147, @p148, @p149, @p150, @p151, @p152, @p153, @p154, @p155, @p156, @p157, @p158, @p159),
(@p160, @p161, @p162, @p163, @p164, @p165, @p166, @p167, @p168, @p169, @p170, @p171, @p172, @p173, @p174, @p175),
(@p176, @p177, @p178, @p179, @p180, @p181, @p182, @p183, @p184, @p185, @p186, @p187, @p188, @p189, @p190, @p191),
(@p192, @p193, @p194, @p195, @p196, @p197, @p198, @p199, @p200, @p201, @p202, @p203, @p204, @p205, @p206, @p207),
(@p208, @p209, @p210, @p211, @p212, @p213, @p214, @p215, @p216, @p217, @p218, @p219, @p220, @p221, @p222, @p223),
(@p224, @p225, @p226, @p227, @p228, @p229, @p230, @p231, @p232, @p233, @p234, @p235, @p236, @p237, @p238, @p239),
(@p240, @p241, @p242, @p243, @p244, @p245, @p246, @p247, @p248, @p249, @p250, @p251, @p252, @p253, @p254, @p255),
(@p256, @p257, @p258, @p259, @p260, @p261, @p262, @p263, @p264, @p265, @p266, @p267, @p268, @p269, @p270, @p271),
(@p272, @p273, @p274, @p275, @p276, @p277, @p278, @p279, @p280, @p281, @p282, @p283, @p284, @p285, @p286, @p287),
(@p288, @p289, @p290, @p291, @p292, @p293, @p294, @p295, @p296, @p297, @p298, @p299, @p300, @p301, @p302, @p303),
(@p304, @p305, @p306, @p307, @p308, @p309, @p310, @p311, @p312, @p313, @p314, @p315, @p316, @p317, @p318, @p319),
(@p320, @p321, @p322, @p323, @p324, @p325, @p326, @p327, @p328, @p329, @p330, @p331, @p332, @p333, @p334, @p335),
(@p336, @p337, @p338, @p339, @p340, @p341, @p342, @p343, @p344, @p345, @p346, @p347, @p348, @p349, @p350, @p351),
(@p352, @p353, @p354, @p355, @p356, @p357, @p358, @p359, @p360, @p361, @p362, @p363, @p364, @p365, @p366, @p367),
(@p368, @p369, @p370, @p371, @p372, @p373, @p374, @p375, @p376, @p377, @p378, @p379, @p380, @p381, @p382, @p383),
(@p384, @p385, @p386, @p387, @p388, @p389, @p390, @p391, @p392, @p393, @p394, @p395, @p396, @p397, @p398, @p399),
(@p400, @p401, @p402, @p403, @p404, @p405, @p406, @p407, @p408, @p409, @p410, @p411, @p412, @p413, @p414, @p415),
(@p416, @p417, @p418, @p419, @p420, @p421, @p422, @p423, @p424, @p425, @p426, @p427, @p428, @p429, @p430, @p431),
(@p432, @p433, @p434, @p435, @p436, @p437, @p438, @p439, @p440, @p441, @p442, @p443, @p444, @p445, @p446, @p447),
(@p448, @p449, @p450, @p451, @p452, @p453, @p454, @p455, @p456, @p457, @p458, @p459, @p460, @p461, @p462, @p463),
(@p464, @p465, @p466, @p467, @p468, @p469, @p470, @p471, @p472, @p473, @p474, @p475, @p476, @p477, @p478, @p479),
(@p480, @p481, @p482, @p483, @p484, @p485, @p486, @p487, @p488, @p489, @p490, @p491, @p492, @p493, @p494, @p495),
(@p496, @p497, @p498, @p499, @p500, @p501, @p502, @p503, @p504, @p505, @p506, @p507, @p508, @p509, @p510, @p511),
(@p512, @p513, @p514, @p515, @p516, @p517, @p518, @p519, @p520, @p521, @p522, @p523, @p524, @p525, @p526, @p527),
(@p528, @p529, @p530, @p531, @p532, @p533, @p534, @p535, @p536, @p537, @p538, @p539, @p540, @p541, @p542, @p543),
(@p544, @p545, @p546, @p547, @p548, @p549, @p550, @p551, @p552, @p553, @p554, @p555, @p556, @p557, @p558, @p559),
(@p560, @p561, @p562, @p563, @p564, @p565, @p566, @p567, @p568, @p569, @p570, @p571, @p572, @p573, @p574, @p575),
(@p576, @p577, @p578, @p579, @p580, @p581, @p582, @p583, @p584, @p585, @p586, @p587, @p588, @p589, @p590, @p591),
(@p592, @p593, @p594, @p595, @p596, @p597, @p598, @p599, @p600, @p601, @p602, @p603, @p604, @p605, @p606, @p607),
(@p608, @p609, @p610, @p611, @p612, @p613, @p614, @p615, @p616, @p617, @p618, @p619, @p620, @p621, @p622, @p623),
(@p624, @p625, @p626, @p627, @p628, @p629, @p630, @p631, @p632, @p633, @p634, @p635, @p636, @p637, @p638, @p639),
(@p640, @p641, @p642, @p643, @p644, @p645, @p646, @p647, @p648, @p649, @p650, @p651, @p652, @p653, @p654, @p655),
(@p656, @p657, @p658, @p659, @p660, @p661, @p662, @p663, @p664, @p665, @p666, @p667, @p668, @p669, @p670, @p671);
2025-05-29 14:05:56.163 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'WebAppApiPhim.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_CachedMovies'. Cannot insert duplicate key in object 'dbo.CachedMovies'. The duplicate key value is (doraemon-nobita-va-chuyen-phieu-luu-vao-xu-quy).
The statement has been terminated.
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:d11d48d5-3786-4d1a-a615-2fe8e021812a
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_CachedMovies'. Cannot insert duplicate key in object 'dbo.CachedMovies'. The duplicate key value is (doraemon-nobita-va-chuyen-phieu-luu-vao-xu-quy).
The statement has been terminated.
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:d11d48d5-3786-4d1a-a615-2fe8e021812a
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-29 14:05:56.242 +07:00 [ERR] Failed to sync page 3
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_CachedMovies'. Cannot insert duplicate key in object 'dbo.CachedMovies'. The duplicate key value is (doraemon-nobita-va-chuyen-phieu-luu-vao-xu-quy).
The statement has been terminated.
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:d11d48d5-3786-4d1a-a615-2fe8e021812a
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at WebAppApiPhim.BackgroundServices.SyncMoviesService.SafeSyncMovies(CancellationToken stoppingToken) in C:\D\Leaning\API\APICode\WebAppApiPhim\Services\SyncMoviesService.cs:line 118
2025-05-29 14:05:56.256 +07:00 [INF] Movie synchronization completed. Synced 45 new movies.
2025-05-29 14:13:21.969 +07:00 [ERR] Hosting failed to start
System.ArgumentNullException: Value cannot be null. (Parameter 'logger')
   at System.ThrowHelper.Throw(String paramName)
   at Microsoft.Extensions.Logging.LoggerExtensions.Log(ILogger logger, LogLevel logLevel, EventId eventId, Exception exception, String message, Object[] args)
   at Microsoft.Extensions.Logging.LoggerExtensions.LogError(ILogger logger, Exception exception, String message, Object[] args)
   at SyncMoviesService.ExecuteAsync(CancellationToken stoppingToken) in C:\D\Leaning\API\APICode\WebAppApiPhim\Services\SyncMoviesService.cs:line 21
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__15_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
2025-05-29 14:13:44.816 +07:00 [ERR] Hosting failed to start
System.ArgumentNullException: Value cannot be null. (Parameter 'logger')
   at System.ThrowHelper.Throw(String paramName)
   at Microsoft.Extensions.Logging.LoggerExtensions.Log(ILogger logger, LogLevel logLevel, EventId eventId, Exception exception, String message, Object[] args)
   at Microsoft.Extensions.Logging.LoggerExtensions.LogError(ILogger logger, Exception exception, String message, Object[] args)
   at SyncMoviesService.ExecuteAsync(CancellationToken stoppingToken) in C:\D\Leaning\API\APICode\WebAppApiPhim\Services\SyncMoviesService.cs:line 21
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__15_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
2025-05-29 14:14:04.906 +07:00 [ERR] Hosting failed to start
System.ArgumentNullException: Value cannot be null. (Parameter 'logger')
   at System.ThrowHelper.Throw(String paramName)
   at Microsoft.Extensions.Logging.LoggerExtensions.Log(ILogger logger, LogLevel logLevel, EventId eventId, Exception exception, String message, Object[] args)
   at Microsoft.Extensions.Logging.LoggerExtensions.LogError(ILogger logger, Exception exception, String message, Object[] args)
   at SyncMoviesService.ExecuteAsync(CancellationToken stoppingToken) in C:\D\Leaning\API\APICode\WebAppApiPhim\Services\SyncMoviesService.cs:line 21
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__15_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
2025-05-29 14:14:54.434 +07:00 [INF] SyncMoviesService is starting.
2025-05-29 14:14:54.497 +07:00 [INF] CacheCleanupService is starting.
2025-05-29 14:14:54.994 +07:00 [WRN] Failed to determine the https port for redirect.
2025-05-29 14:15:42.633 +07:00 [INF] Fetching movie detail from: phim-chi-tiet/v2?slug=fallback-movie
2025-05-29 14:15:45.306 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '2567.653'
2025-05-29 14:15:45.328 +07:00 [INF] Fetched and cached movie detail for: fallback-movie
2025-05-29 14:15:45.482 +07:00 [INF] Cache hit for movie detail: fallback-movie
2025-05-29 14:15:45.498 +07:00 [INF] Cache hit for movie detail: fallback-movie
2025-05-29 14:15:54.507 +07:00 [INF] Starting safe movie synchronization...
2025-05-29 14:15:54.512 +07:00 [INF] Calling API endpoint: phim-moi/v1?page=1&limit=20
2025-05-29 14:15:54.883 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '367.5348'
2025-05-29 14:15:54.890 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":"2272f36ac8ee821bb87bfff301370308","name":"Ch\u1ecb D\u00e2u","slug":"chi-dau","year":"2024","loai_phim":"Phim l\u1ebb","quoc_gia":"Vi\u1ec7t Nam","modified":"2025-05-29 05:32:07"},{"id":"039b28c0e2a52524890797e9e0f29899","name":"Thanh Kh\u00e2m Ch\u00ed","slug":"thanh-kham-chi","year":"2025","loai_phim":"Phim b\u1ed9, Phim \u0111ang chi\u1ebfu","quoc_gia":"Trung Qu\u1ed1c","modified":"2025-05-29 04:28:59"},{"id":"5e13d1e382d895a5a58b40173eb7abfd","name":"Tri\u00eau D\u01b0\u01a1n...
2025-05-29 14:15:54.895 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 14:15:54.897 +07:00 [INF] Successfully cached 20 movies for page 1
2025-05-29 14:15:55.079 +07:00 [WRN] Failed to process movie: doraemon-nobita-va-chuyen-phieu-luu-vao-xu-quy
System.InvalidOperationException: The instance of entity type 'CachedMovie' cannot be tracked because another instance with the same key value for {'Slug'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.ThrowIdentityConflict(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry, Boolean updateDuplicate)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.NullableKeyIdentityMap`1.Add(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.StartTracking(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState oldState, EntityState newState, Boolean acceptChanges, Boolean modifyProperties)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState entityState, Boolean acceptChanges, Boolean modifyProperties, Nullable`1 forceStateWhenUnknownKey, Nullable`1 fallbackState)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.PaintAction(EntityEntryGraphNode`1 node)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityEntryGraphIterator.TraverseGraph[TState](EntityEntryGraphNode`1 node, Func`2 handleNode)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.AttachGraph(InternalEntityEntry rootEntry, EntityState targetState, EntityState storeGeneratedWithKeySetTargetState, Boolean forceStateWhenUnknownKey)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.SetEntityState(InternalEntityEntry entry, EntityState entityState)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.Add(TEntity entity)
   at WebAppApiPhim.BackgroundServices.SyncMoviesService.SafeSyncMovies(CancellationToken stoppingToken) in C:\D\Leaning\API\APICode\WebAppApiPhim\Services\SyncMoviesService.cs:line 105
2025-05-29 14:15:55.355 +07:00 [ERR] Failed executing DbCommand (72ms) [Parameters=[@p0='?' (Size = 100), @p1='?' (Size = 2000), @p2='?' (Size = 100), @p3='?' (Size = 50), @p4='?' (Size = 50), @p5='?' (DbType = DateTime2), @p6='?' (Size = 1000), @p7='?' (DbType = Double), @p8='?' (Size = 4000), @p9='?' (Size = 50), @p10='?' (Size = 1000), @p11='?' (Size = 500), @p12='?' (Size = 50), @p13='?' (Size = 1000), @p14='?' (DbType = Int64), @p15='?' (Size = 4), @p16='?' (Size = 100), @p17='?' (Size = 2000), @p18='?' (Size = 100), @p19='?' (Size = 50), @p20='?' (Size = 50), @p21='?' (DbType = DateTime2), @p22='?' (Size = 1000), @p23='?' (DbType = Double), @p24='?' (Size = 4000), @p25='?' (Size = 50), @p26='?' (Size = 1000), @p27='?' (Size = 500), @p28='?' (Size = 50), @p29='?' (Size = 1000), @p30='?' (DbType = Int64), @p31='?' (Size = 4), @p32='?' (Size = 100), @p33='?' (Size = 2000), @p34='?' (Size = 100), @p35='?' (Size = 50), @p36='?' (Size = 50), @p37='?' (DbType = DateTime2), @p38='?' (Size = 1000), @p39='?' (DbType = Double), @p40='?' (Size = 4000), @p41='?' (Size = 50), @p42='?' (Size = 1000), @p43='?' (Size = 500), @p44='?' (Size = 50), @p45='?' (Size = 1000), @p46='?' (DbType = Int64), @p47='?' (Size = 4), @p48='?' (Size = 100), @p49='?' (Size = 2000), @p50='?' (Size = 100), @p51='?' (Size = 50), @p52='?' (Size = 50), @p53='?' (DbType = DateTime2), @p54='?' (Size = 1000), @p55='?' (DbType = Double), @p56='?' (Size = 4000), @p57='?' (Size = 50), @p58='?' (Size = 1000), @p59='?' (Size = 500), @p60='?' (Size = 50), @p61='?' (Size = 1000), @p62='?' (DbType = Int64), @p63='?' (Size = 4), @p64='?' (Size = 100), @p65='?' (Size = 2000), @p66='?' (Size = 100), @p67='?' (Size = 50), @p68='?' (Size = 50), @p69='?' (DbType = DateTime2), @p70='?' (Size = 1000), @p71='?' (DbType = Double), @p72='?' (Size = 4000), @p73='?' (Size = 50), @p74='?' (Size = 1000), @p75='?' (Size = 500), @p76='?' (Size = 50), @p77='?' (Size = 1000), @p78='?' (DbType = Int64), @p79='?' (Size = 4), @p80='?' (Size = 100), @p81='?' (Size = 2000), @p82='?' (Size = 100), @p83='?' (Size = 50), @p84='?' (Size = 50), @p85='?' (DbType = DateTime2), @p86='?' (Size = 1000), @p87='?' (DbType = Double), @p88='?' (Size = 4000), @p89='?' (Size = 50), @p90='?' (Size = 1000), @p91='?' (Size = 500), @p92='?' (Size = 50), @p93='?' (Size = 1000), @p94='?' (DbType = Int64), @p95='?' (Size = 4), @p96='?' (Size = 100), @p97='?' (Size = 2000), @p98='?' (Size = 100), @p99='?' (Size = 50), @p100='?' (Size = 50), @p101='?' (DbType = DateTime2), @p102='?' (Size = 1000), @p103='?' (DbType = Double), @p104='?' (Size = 4000), @p105='?' (Size = 50), @p106='?' (Size = 1000), @p107='?' (Size = 500), @p108='?' (Size = 50), @p109='?' (Size = 1000), @p110='?' (DbType = Int64), @p111='?' (Size = 4), @p112='?' (Size = 100), @p113='?' (Size = 2000), @p114='?' (Size = 100), @p115='?' (Size = 50), @p116='?' (Size = 50), @p117='?' (DbType = DateTime2), @p118='?' (Size = 1000), @p119='?' (DbType = Double), @p120='?' (Size = 4000), @p121='?' (Size = 50), @p122='?' (Size = 1000), @p123='?' (Size = 500), @p124='?' (Size = 50), @p125='?' (Size = 1000), @p126='?' (DbType = Int64), @p127='?' (Size = 4), @p128='?' (Size = 100), @p129='?' (Size = 2000), @p130='?' (Size = 100), @p131='?' (Size = 50), @p132='?' (Size = 50), @p133='?' (DbType = DateTime2), @p134='?' (Size = 1000), @p135='?' (DbType = Double), @p136='?' (Size = 4000), @p137='?' (Size = 50), @p138='?' (Size = 1000), @p139='?' (Size = 500), @p140='?' (Size = 50), @p141='?' (Size = 1000), @p142='?' (DbType = Int64), @p143='?' (Size = 4), @p144='?' (Size = 100), @p145='?' (Size = 2000), @p146='?' (Size = 100), @p147='?' (Size = 50), @p148='?' (Size = 50), @p149='?' (DbType = DateTime2), @p150='?' (Size = 1000), @p151='?' (DbType = Double), @p152='?' (Size = 4000), @p153='?' (Size = 50), @p154='?' (Size = 1000), @p155='?' (Size = 500), @p156='?' (Size = 50), @p157='?' (Size = 1000), @p158='?' (DbType = Int64), @p159='?' (Size = 4), @p160='?' (Size = 100), @p161='?' (Size = 2000), @p162='?' (Size = 100), @p163='?' (Size = 50), @p164='?' (Size = 50), @p165='?' (DbType = DateTime2), @p166='?' (Size = 1000), @p167='?' (DbType = Double), @p168='?' (Size = 4000), @p169='?' (Size = 50), @p170='?' (Size = 1000), @p171='?' (Size = 500), @p172='?' (Size = 50), @p173='?' (Size = 1000), @p174='?' (DbType = Int64), @p175='?' (Size = 4), @p176='?' (Size = 100), @p177='?' (Size = 2000), @p178='?' (Size = 100), @p179='?' (Size = 50), @p180='?' (Size = 50), @p181='?' (DbType = DateTime2), @p182='?' (Size = 1000), @p183='?' (DbType = Double), @p184='?' (Size = 4000), @p185='?' (Size = 50), @p186='?' (Size = 1000), @p187='?' (Size = 500), @p188='?' (Size = 50), @p189='?' (Size = 1000), @p190='?' (DbType = Int64), @p191='?' (Size = 4), @p192='?' (Size = 100), @p193='?' (Size = 2000), @p194='?' (Size = 100), @p195='?' (Size = 50), @p196='?' (Size = 50), @p197='?' (DbType = DateTime2), @p198='?' (Size = 1000), @p199='?' (DbType = Double), @p200='?' (Size = 4000), @p201='?' (Size = 50), @p202='?' (Size = 1000), @p203='?' (Size = 500), @p204='?' (Size = 50), @p205='?' (Size = 1000), @p206='?' (DbType = Int64), @p207='?' (Size = 4), @p208='?' (Size = 100), @p209='?' (Size = 2000), @p210='?' (Size = 100), @p211='?' (Size = 50), @p212='?' (Size = 50), @p213='?' (DbType = DateTime2), @p214='?' (Size = 1000), @p215='?' (DbType = Double), @p216='?' (Size = 4000), @p217='?' (Size = 50), @p218='?' (Size = 1000), @p219='?' (Size = 500), @p220='?' (Size = 50), @p221='?' (Size = 1000), @p222='?' (DbType = Int64), @p223='?' (Size = 4)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [CachedMovies] ([Slug], [Description], [Director], [Duration], [Language], [LastUpdated], [PosterUrl], [Rating], [RawData], [Resolution], [ThumbUrl], [Title], [TmdbId], [TrailerUrl], [Views], [Year])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15),
(@p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31),
(@p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47),
(@p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63),
(@p64, @p65, @p66, @p67, @p68, @p69, @p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79),
(@p80, @p81, @p82, @p83, @p84, @p85, @p86, @p87, @p88, @p89, @p90, @p91, @p92, @p93, @p94, @p95),
(@p96, @p97, @p98, @p99, @p100, @p101, @p102, @p103, @p104, @p105, @p106, @p107, @p108, @p109, @p110, @p111),
(@p112, @p113, @p114, @p115, @p116, @p117, @p118, @p119, @p120, @p121, @p122, @p123, @p124, @p125, @p126, @p127),
(@p128, @p129, @p130, @p131, @p132, @p133, @p134, @p135, @p136, @p137, @p138, @p139, @p140, @p141, @p142, @p143),
(@p144, @p145, @p146, @p147, @p148, @p149, @p150, @p151, @p152, @p153, @p154, @p155, @p156, @p157, @p158, @p159),
(@p160, @p161, @p162, @p163, @p164, @p165, @p166, @p167, @p168, @p169, @p170, @p171, @p172, @p173, @p174, @p175),
(@p176, @p177, @p178, @p179, @p180, @p181, @p182, @p183, @p184, @p185, @p186, @p187, @p188, @p189, @p190, @p191),
(@p192, @p193, @p194, @p195, @p196, @p197, @p198, @p199, @p200, @p201, @p202, @p203, @p204, @p205, @p206, @p207),
(@p208, @p209, @p210, @p211, @p212, @p213, @p214, @p215, @p216, @p217, @p218, @p219, @p220, @p221, @p222, @p223);
2025-05-29 14:15:55.394 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'WebAppApiPhim.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_CachedMovies'. Cannot insert duplicate key in object 'dbo.CachedMovies'. The duplicate key value is (doraemon-nobita-va-chuyen-phieu-luu-vao-xu-quy).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:fe4f86b6-7860-4e5f-8d1a-fd3450121e09
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_CachedMovies'. Cannot insert duplicate key in object 'dbo.CachedMovies'. The duplicate key value is (doraemon-nobita-va-chuyen-phieu-luu-vao-xu-quy).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:fe4f86b6-7860-4e5f-8d1a-fd3450121e09
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-29 14:15:55.483 +07:00 [ERR] Failed to sync page 1
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_CachedMovies'. Cannot insert duplicate key in object 'dbo.CachedMovies'. The duplicate key value is (doraemon-nobita-va-chuyen-phieu-luu-vao-xu-quy).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:fe4f86b6-7860-4e5f-8d1a-fd3450121e09
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at WebAppApiPhim.BackgroundServices.SyncMoviesService.SafeSyncMovies(CancellationToken stoppingToken) in C:\D\Leaning\API\APICode\WebAppApiPhim\Services\SyncMoviesService.cs:line 118
2025-05-29 14:15:55.497 +07:00 [INF] Calling API endpoint: phim-moi/v1?page=2&limit=20
2025-05-29 14:15:56.503 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '1003.2059'
2025-05-29 14:15:56.511 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":"8ac95544093983249829baf38f28cb25","name":"Khom L\u01b0ng (Phong Ho\u1ea3 H\u1ed3ng Ti\u00eau)","slug":"khom-lung","year":"2025","loai_phim":"Phim b\u1ed9, Phim \u0111ang chi\u1ebfu","quoc_gia":"Trung Qu\u1ed1c","modified":"2025-05-28 19:08:08"},{"id":"be068d693cfefdf2afe808d90e2a9031","name":"T\u00e0ng H\u1ea3i Truy\u1ec7n","slug":"tang-hai-truyen","year":"2025","loai_phim":"Phim b\u1ed9, Phim \u0111ang chi\u1ebfu","quoc_gia":"Trung Qu\u1ed1c","modified":"2025-05-28 19:07:44"},{"...
2025-05-29 14:15:56.513 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 14:15:56.516 +07:00 [INF] Successfully cached 20 movies for page 2
2025-05-29 14:15:56.641 +07:00 [ERR] Failed executing DbCommand (58ms) [Parameters=[@p0='?' (Size = 100), @p1='?' (Size = 2000), @p2='?' (Size = 100), @p3='?' (Size = 50), @p4='?' (Size = 50), @p5='?' (DbType = DateTime2), @p6='?' (Size = 1000), @p7='?' (DbType = Double), @p8='?' (Size = 4000), @p9='?' (Size = 50), @p10='?' (Size = 1000), @p11='?' (Size = 500), @p12='?' (Size = 50), @p13='?' (Size = 1000), @p14='?' (DbType = Int64), @p15='?' (Size = 4), @p16='?' (Size = 100), @p17='?' (Size = 2000), @p18='?' (Size = 100), @p19='?' (Size = 50), @p20='?' (Size = 50), @p21='?' (DbType = DateTime2), @p22='?' (Size = 1000), @p23='?' (DbType = Double), @p24='?' (Size = 4000), @p25='?' (Size = 50), @p26='?' (Size = 1000), @p27='?' (Size = 500), @p28='?' (Size = 50), @p29='?' (Size = 1000), @p30='?' (DbType = Int64), @p31='?' (Size = 4), @p32='?' (Size = 100), @p33='?' (Size = 2000), @p34='?' (Size = 100), @p35='?' (Size = 50), @p36='?' (Size = 50), @p37='?' (DbType = DateTime2), @p38='?' (Size = 1000), @p39='?' (DbType = Double), @p40='?' (Size = 4000), @p41='?' (Size = 50), @p42='?' (Size = 1000), @p43='?' (Size = 500), @p44='?' (Size = 50), @p45='?' (Size = 1000), @p46='?' (DbType = Int64), @p47='?' (Size = 4), @p48='?' (Size = 100), @p49='?' (Size = 2000), @p50='?' (Size = 100), @p51='?' (Size = 50), @p52='?' (Size = 50), @p53='?' (DbType = DateTime2), @p54='?' (Size = 1000), @p55='?' (DbType = Double), @p56='?' (Size = 4000), @p57='?' (Size = 50), @p58='?' (Size = 1000), @p59='?' (Size = 500), @p60='?' (Size = 50), @p61='?' (Size = 1000), @p62='?' (DbType = Int64), @p63='?' (Size = 4), @p64='?' (Size = 100), @p65='?' (Size = 2000), @p66='?' (Size = 100), @p67='?' (Size = 50), @p68='?' (Size = 50), @p69='?' (DbType = DateTime2), @p70='?' (Size = 1000), @p71='?' (DbType = Double), @p72='?' (Size = 4000), @p73='?' (Size = 50), @p74='?' (Size = 1000), @p75='?' (Size = 500), @p76='?' (Size = 50), @p77='?' (Size = 1000), @p78='?' (DbType = Int64), @p79='?' (Size = 4), @p80='?' (Size = 100), @p81='?' (Size = 2000), @p82='?' (Size = 100), @p83='?' (Size = 50), @p84='?' (Size = 50), @p85='?' (DbType = DateTime2), @p86='?' (Size = 1000), @p87='?' (DbType = Double), @p88='?' (Size = 4000), @p89='?' (Size = 50), @p90='?' (Size = 1000), @p91='?' (Size = 500), @p92='?' (Size = 50), @p93='?' (Size = 1000), @p94='?' (DbType = Int64), @p95='?' (Size = 4), @p96='?' (Size = 100), @p97='?' (Size = 2000), @p98='?' (Size = 100), @p99='?' (Size = 50), @p100='?' (Size = 50), @p101='?' (DbType = DateTime2), @p102='?' (Size = 1000), @p103='?' (DbType = Double), @p104='?' (Size = 4000), @p105='?' (Size = 50), @p106='?' (Size = 1000), @p107='?' (Size = 500), @p108='?' (Size = 50), @p109='?' (Size = 1000), @p110='?' (DbType = Int64), @p111='?' (Size = 4), @p112='?' (Size = 100), @p113='?' (Size = 2000), @p114='?' (Size = 100), @p115='?' (Size = 50), @p116='?' (Size = 50), @p117='?' (DbType = DateTime2), @p118='?' (Size = 1000), @p119='?' (DbType = Double), @p120='?' (Size = 4000), @p121='?' (Size = 50), @p122='?' (Size = 1000), @p123='?' (Size = 500), @p124='?' (Size = 50), @p125='?' (Size = 1000), @p126='?' (DbType = Int64), @p127='?' (Size = 4), @p128='?' (Size = 100), @p129='?' (Size = 2000), @p130='?' (Size = 100), @p131='?' (Size = 50), @p132='?' (Size = 50), @p133='?' (DbType = DateTime2), @p134='?' (Size = 1000), @p135='?' (DbType = Double), @p136='?' (Size = 4000), @p137='?' (Size = 50), @p138='?' (Size = 1000), @p139='?' (Size = 500), @p140='?' (Size = 50), @p141='?' (Size = 1000), @p142='?' (DbType = Int64), @p143='?' (Size = 4), @p144='?' (Size = 100), @p145='?' (Size = 2000), @p146='?' (Size = 100), @p147='?' (Size = 50), @p148='?' (Size = 50), @p149='?' (DbType = DateTime2), @p150='?' (Size = 1000), @p151='?' (DbType = Double), @p152='?' (Size = 4000), @p153='?' (Size = 50), @p154='?' (Size = 1000), @p155='?' (Size = 500), @p156='?' (Size = 50), @p157='?' (Size = 1000), @p158='?' (DbType = Int64), @p159='?' (Size = 4), @p160='?' (Size = 100), @p161='?' (Size = 2000), @p162='?' (Size = 100), @p163='?' (Size = 50), @p164='?' (Size = 50), @p165='?' (DbType = DateTime2), @p166='?' (Size = 1000), @p167='?' (DbType = Double), @p168='?' (Size = 4000), @p169='?' (Size = 50), @p170='?' (Size = 1000), @p171='?' (Size = 500), @p172='?' (Size = 50), @p173='?' (Size = 1000), @p174='?' (DbType = Int64), @p175='?' (Size = 4), @p176='?' (Size = 100), @p177='?' (Size = 2000), @p178='?' (Size = 100), @p179='?' (Size = 50), @p180='?' (Size = 50), @p181='?' (DbType = DateTime2), @p182='?' (Size = 1000), @p183='?' (DbType = Double), @p184='?' (Size = 4000), @p185='?' (Size = 50), @p186='?' (Size = 1000), @p187='?' (Size = 500), @p188='?' (Size = 50), @p189='?' (Size = 1000), @p190='?' (DbType = Int64), @p191='?' (Size = 4), @p192='?' (Size = 100), @p193='?' (Size = 2000), @p194='?' (Size = 100), @p195='?' (Size = 50), @p196='?' (Size = 50), @p197='?' (DbType = DateTime2), @p198='?' (Size = 1000), @p199='?' (DbType = Double), @p200='?' (Size = 4000), @p201='?' (Size = 50), @p202='?' (Size = 1000), @p203='?' (Size = 500), @p204='?' (Size = 50), @p205='?' (Size = 1000), @p206='?' (DbType = Int64), @p207='?' (Size = 4), @p208='?' (Size = 100), @p209='?' (Size = 2000), @p210='?' (Size = 100), @p211='?' (Size = 50), @p212='?' (Size = 50), @p213='?' (DbType = DateTime2), @p214='?' (Size = 1000), @p215='?' (DbType = Double), @p216='?' (Size = 4000), @p217='?' (Size = 50), @p218='?' (Size = 1000), @p219='?' (Size = 500), @p220='?' (Size = 50), @p221='?' (Size = 1000), @p222='?' (DbType = Int64), @p223='?' (Size = 4), @p224='?' (Size = 100), @p225='?' (Size = 2000), @p226='?' (Size = 100), @p227='?' (Size = 50), @p228='?' (Size = 50), @p229='?' (DbType = DateTime2), @p230='?' (Size = 1000), @p231='?' (DbType = Double), @p232='?' (Size = 4000), @p233='?' (Size = 50), @p234='?' (Size = 1000), @p235='?' (Size = 500), @p236='?' (Size = 50), @p237='?' (Size = 1000), @p238='?' (DbType = Int64), @p239='?' (Size = 4), @p240='?' (Size = 100), @p241='?' (Size = 2000), @p242='?' (Size = 100), @p243='?' (Size = 50), @p244='?' (Size = 50), @p245='?' (DbType = DateTime2), @p246='?' (Size = 1000), @p247='?' (DbType = Double), @p248='?' (Size = 4000), @p249='?' (Size = 50), @p250='?' (Size = 1000), @p251='?' (Size = 500), @p252='?' (Size = 50), @p253='?' (Size = 1000), @p254='?' (DbType = Int64), @p255='?' (Size = 4), @p256='?' (Size = 100), @p257='?' (Size = 2000), @p258='?' (Size = 100), @p259='?' (Size = 50), @p260='?' (Size = 50), @p261='?' (DbType = DateTime2), @p262='?' (Size = 1000), @p263='?' (DbType = Double), @p264='?' (Size = 4000), @p265='?' (Size = 50), @p266='?' (Size = 1000), @p267='?' (Size = 500), @p268='?' (Size = 50), @p269='?' (Size = 1000), @p270='?' (DbType = Int64), @p271='?' (Size = 4), @p272='?' (Size = 100), @p273='?' (Size = 2000), @p274='?' (Size = 100), @p275='?' (Size = 50), @p276='?' (Size = 50), @p277='?' (DbType = DateTime2), @p278='?' (Size = 1000), @p279='?' (DbType = Double), @p280='?' (Size = 4000), @p281='?' (Size = 50), @p282='?' (Size = 1000), @p283='?' (Size = 500), @p284='?' (Size = 50), @p285='?' (Size = 1000), @p286='?' (DbType = Int64), @p287='?' (Size = 4), @p288='?' (Size = 100), @p289='?' (Size = 2000), @p290='?' (Size = 100), @p291='?' (Size = 50), @p292='?' (Size = 50), @p293='?' (DbType = DateTime2), @p294='?' (Size = 1000), @p295='?' (DbType = Double), @p296='?' (Size = 4000), @p297='?' (Size = 50), @p298='?' (Size = 1000), @p299='?' (Size = 500), @p300='?' (Size = 50), @p301='?' (Size = 1000), @p302='?' (DbType = Int64), @p303='?' (Size = 4), @p304='?' (Size = 100), @p305='?' (Size = 2000), @p306='?' (Size = 100), @p307='?' (Size = 50), @p308='?' (Size = 50), @p309='?' (DbType = DateTime2), @p310='?' (Size = 1000), @p311='?' (DbType = Double), @p312='?' (Size = 4000), @p313='?' (Size = 50), @p314='?' (Size = 1000), @p315='?' (Size = 500), @p316='?' (Size = 50), @p317='?' (Size = 1000), @p318='?' (DbType = Int64), @p319='?' (Size = 4), @p320='?' (Size = 100), @p321='?' (Size = 2000), @p322='?' (Size = 100), @p323='?' (Size = 50), @p324='?' (Size = 50), @p325='?' (DbType = DateTime2), @p326='?' (Size = 1000), @p327='?' (DbType = Double), @p328='?' (Size = 4000), @p329='?' (Size = 50), @p330='?' (Size = 1000), @p331='?' (Size = 500), @p332='?' (Size = 50), @p333='?' (Size = 1000), @p334='?' (DbType = Int64), @p335='?' (Size = 4), @p336='?' (Size = 100), @p337='?' (Size = 2000), @p338='?' (Size = 100), @p339='?' (Size = 50), @p340='?' (Size = 50), @p341='?' (DbType = DateTime2), @p342='?' (Size = 1000), @p343='?' (DbType = Double), @p344='?' (Size = 4000), @p345='?' (Size = 50), @p346='?' (Size = 1000), @p347='?' (Size = 500), @p348='?' (Size = 50), @p349='?' (Size = 1000), @p350='?' (DbType = Int64), @p351='?' (Size = 4), @p352='?' (Size = 100), @p353='?' (Size = 2000), @p354='?' (Size = 100), @p355='?' (Size = 50), @p356='?' (Size = 50), @p357='?' (DbType = DateTime2), @p358='?' (Size = 1000), @p359='?' (DbType = Double), @p360='?' (Size = 4000), @p361='?' (Size = 50), @p362='?' (Size = 1000), @p363='?' (Size = 500), @p364='?' (Size = 50), @p365='?' (Size = 1000), @p366='?' (DbType = Int64), @p367='?' (Size = 4), @p368='?' (Size = 100), @p369='?' (Size = 2000), @p370='?' (Size = 100), @p371='?' (Size = 50), @p372='?' (Size = 50), @p373='?' (DbType = DateTime2), @p374='?' (Size = 1000), @p375='?' (DbType = Double), @p376='?' (Size = 4000), @p377='?' (Size = 50), @p378='?' (Size = 1000), @p379='?' (Size = 500), @p380='?' (Size = 50), @p381='?' (Size = 1000), @p382='?' (DbType = Int64), @p383='?' (Size = 4), @p384='?' (Size = 100), @p385='?' (Size = 2000), @p386='?' (Size = 100), @p387='?' (Size = 50), @p388='?' (Size = 50), @p389='?' (DbType = DateTime2), @p390='?' (Size = 1000), @p391='?' (DbType = Double), @p392='?' (Size = 4000), @p393='?' (Size = 50), @p394='?' (Size = 1000), @p395='?' (Size = 500), @p396='?' (Size = 50), @p397='?' (Size = 1000), @p398='?' (DbType = Int64), @p399='?' (Size = 4), @p400='?' (Size = 100), @p401='?' (Size = 2000), @p402='?' (Size = 100), @p403='?' (Size = 50), @p404='?' (Size = 50), @p405='?' (DbType = DateTime2), @p406='?' (Size = 1000), @p407='?' (DbType = Double), @p408='?' (Size = 4000), @p409='?' (Size = 50), @p410='?' (Size = 1000), @p411='?' (Size = 500), @p412='?' (Size = 50), @p413='?' (Size = 1000), @p414='?' (DbType = Int64), @p415='?' (Size = 4), @p416='?' (Size = 100), @p417='?' (Size = 2000), @p418='?' (Size = 100), @p419='?' (Size = 50), @p420='?' (Size = 50), @p421='?' (DbType = DateTime2), @p422='?' (Size = 1000), @p423='?' (DbType = Double), @p424='?' (Size = 4000), @p425='?' (Size = 50), @p426='?' (Size = 1000), @p427='?' (Size = 500), @p428='?' (Size = 50), @p429='?' (Size = 1000), @p430='?' (DbType = Int64), @p431='?' (Size = 4), @p432='?' (Size = 100), @p433='?' (Size = 2000), @p434='?' (Size = 100), @p435='?' (Size = 50), @p436='?' (Size = 50), @p437='?' (DbType = DateTime2), @p438='?' (Size = 1000), @p439='?' (DbType = Double), @p440='?' (Size = 4000), @p441='?' (Size = 50), @p442='?' (Size = 1000), @p443='?' (Size = 500), @p444='?' (Size = 50), @p445='?' (Size = 1000), @p446='?' (DbType = Int64), @p447='?' (Size = 4), @p448='?' (Size = 100), @p449='?' (Size = 2000), @p450='?' (Size = 100), @p451='?' (Size = 50), @p452='?' (Size = 50), @p453='?' (DbType = DateTime2), @p454='?' (Size = 1000), @p455='?' (DbType = Double), @p456='?' (Size = 4000), @p457='?' (Size = 50), @p458='?' (Size = 1000), @p459='?' (Size = 500), @p460='?' (Size = 50), @p461='?' (Size = 1000), @p462='?' (DbType = Int64), @p463='?' (Size = 4), @p464='?' (Size = 100), @p465='?' (Size = 2000), @p466='?' (Size = 100), @p467='?' (Size = 50), @p468='?' (Size = 50), @p469='?' (DbType = DateTime2), @p470='?' (Size = 1000), @p471='?' (DbType = Double), @p472='?' (Size = 4000), @p473='?' (Size = 50), @p474='?' (Size = 1000), @p475='?' (Size = 500), @p476='?' (Size = 50), @p477='?' (Size = 1000), @p478='?' (DbType = Int64), @p479='?' (Size = 4), @p480='?' (Size = 100), @p481='?' (Size = 2000), @p482='?' (Size = 100), @p483='?' (Size = 50), @p484='?' (Size = 50), @p485='?' (DbType = DateTime2), @p486='?' (Size = 1000), @p487='?' (DbType = Double), @p488='?' (Size = 4000), @p489='?' (Size = 50), @p490='?' (Size = 1000), @p491='?' (Size = 500), @p492='?' (Size = 50), @p493='?' (Size = 1000), @p494='?' (DbType = Int64), @p495='?' (Size = 4)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [CachedMovies] ([Slug], [Description], [Director], [Duration], [Language], [LastUpdated], [PosterUrl], [Rating], [RawData], [Resolution], [ThumbUrl], [Title], [TmdbId], [TrailerUrl], [Views], [Year])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15),
(@p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31),
(@p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47),
(@p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63),
(@p64, @p65, @p66, @p67, @p68, @p69, @p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79),
(@p80, @p81, @p82, @p83, @p84, @p85, @p86, @p87, @p88, @p89, @p90, @p91, @p92, @p93, @p94, @p95),
(@p96, @p97, @p98, @p99, @p100, @p101, @p102, @p103, @p104, @p105, @p106, @p107, @p108, @p109, @p110, @p111),
(@p112, @p113, @p114, @p115, @p116, @p117, @p118, @p119, @p120, @p121, @p122, @p123, @p124, @p125, @p126, @p127),
(@p128, @p129, @p130, @p131, @p132, @p133, @p134, @p135, @p136, @p137, @p138, @p139, @p140, @p141, @p142, @p143),
(@p144, @p145, @p146, @p147, @p148, @p149, @p150, @p151, @p152, @p153, @p154, @p155, @p156, @p157, @p158, @p159),
(@p160, @p161, @p162, @p163, @p164, @p165, @p166, @p167, @p168, @p169, @p170, @p171, @p172, @p173, @p174, @p175),
(@p176, @p177, @p178, @p179, @p180, @p181, @p182, @p183, @p184, @p185, @p186, @p187, @p188, @p189, @p190, @p191),
(@p192, @p193, @p194, @p195, @p196, @p197, @p198, @p199, @p200, @p201, @p202, @p203, @p204, @p205, @p206, @p207),
(@p208, @p209, @p210, @p211, @p212, @p213, @p214, @p215, @p216, @p217, @p218, @p219, @p220, @p221, @p222, @p223),
(@p224, @p225, @p226, @p227, @p228, @p229, @p230, @p231, @p232, @p233, @p234, @p235, @p236, @p237, @p238, @p239),
(@p240, @p241, @p242, @p243, @p244, @p245, @p246, @p247, @p248, @p249, @p250, @p251, @p252, @p253, @p254, @p255),
(@p256, @p257, @p258, @p259, @p260, @p261, @p262, @p263, @p264, @p265, @p266, @p267, @p268, @p269, @p270, @p271),
(@p272, @p273, @p274, @p275, @p276, @p277, @p278, @p279, @p280, @p281, @p282, @p283, @p284, @p285, @p286, @p287),
(@p288, @p289, @p290, @p291, @p292, @p293, @p294, @p295, @p296, @p297, @p298, @p299, @p300, @p301, @p302, @p303),
(@p304, @p305, @p306, @p307, @p308, @p309, @p310, @p311, @p312, @p313, @p314, @p315, @p316, @p317, @p318, @p319),
(@p320, @p321, @p322, @p323, @p324, @p325, @p326, @p327, @p328, @p329, @p330, @p331, @p332, @p333, @p334, @p335),
(@p336, @p337, @p338, @p339, @p340, @p341, @p342, @p343, @p344, @p345, @p346, @p347, @p348, @p349, @p350, @p351),
(@p352, @p353, @p354, @p355, @p356, @p357, @p358, @p359, @p360, @p361, @p362, @p363, @p364, @p365, @p366, @p367),
(@p368, @p369, @p370, @p371, @p372, @p373, @p374, @p375, @p376, @p377, @p378, @p379, @p380, @p381, @p382, @p383),
(@p384, @p385, @p386, @p387, @p388, @p389, @p390, @p391, @p392, @p393, @p394, @p395, @p396, @p397, @p398, @p399),
(@p400, @p401, @p402, @p403, @p404, @p405, @p406, @p407, @p408, @p409, @p410, @p411, @p412, @p413, @p414, @p415),
(@p416, @p417, @p418, @p419, @p420, @p421, @p422, @p423, @p424, @p425, @p426, @p427, @p428, @p429, @p430, @p431),
(@p432, @p433, @p434, @p435, @p436, @p437, @p438, @p439, @p440, @p441, @p442, @p443, @p444, @p445, @p446, @p447),
(@p448, @p449, @p450, @p451, @p452, @p453, @p454, @p455, @p456, @p457, @p458, @p459, @p460, @p461, @p462, @p463),
(@p464, @p465, @p466, @p467, @p468, @p469, @p470, @p471, @p472, @p473, @p474, @p475, @p476, @p477, @p478, @p479),
(@p480, @p481, @p482, @p483, @p484, @p485, @p486, @p487, @p488, @p489, @p490, @p491, @p492, @p493, @p494, @p495);
2025-05-29 14:15:56.654 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'WebAppApiPhim.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_CachedMovies'. Cannot insert duplicate key in object 'dbo.CachedMovies'. The duplicate key value is (doraemon-nobita-va-chuyen-phieu-luu-vao-xu-quy).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:fe4f86b6-7860-4e5f-8d1a-fd3450121e09
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_CachedMovies'. Cannot insert duplicate key in object 'dbo.CachedMovies'. The duplicate key value is (doraemon-nobita-va-chuyen-phieu-luu-vao-xu-quy).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:fe4f86b6-7860-4e5f-8d1a-fd3450121e09
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-29 14:15:56.719 +07:00 [ERR] Failed to sync page 2
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_CachedMovies'. Cannot insert duplicate key in object 'dbo.CachedMovies'. The duplicate key value is (doraemon-nobita-va-chuyen-phieu-luu-vao-xu-quy).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:fe4f86b6-7860-4e5f-8d1a-fd3450121e09
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at WebAppApiPhim.BackgroundServices.SyncMoviesService.SafeSyncMovies(CancellationToken stoppingToken) in C:\D\Leaning\API\APICode\WebAppApiPhim\Services\SyncMoviesService.cs:line 118
2025-05-29 14:15:56.736 +07:00 [INF] Calling API endpoint: phim-moi/v1?page=3&limit=20
2025-05-29 14:15:57.086 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '346.778'
2025-05-29 14:15:57.092 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":"87faa3ca9f7c03da0bbb0ed17fefa346","name":"Zatsu Tabi: That's Journey","slug":"zatsu-tabi-thats-journey","year":"2025","loai_phim":"Phim b\u1ed9","quoc_gia":"Nh\u1eadt B\u1ea3n","modified":"2025-05-28 11:33:10"},{"id":"27a1e0e31bf1a18797d26f7796f1ae4e","name":"Thanh G\u01b0\u01a1m Di\u1ec7t Qu\u1ef7 (Ph\u1ea7n 5)","slug":"thanh-guom-diet-quy-dai-tru-dac-huan","year":"2024","loai_phim":"Phim b\u1ed9","quoc_gia":"Nh\u1eadt B\u1ea3n","modified":"2025-05-28 11:30:17"},{"id":"e1f236269...
2025-05-29 14:15:57.095 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 14:15:57.097 +07:00 [INF] Successfully cached 20 movies for page 3
2025-05-29 14:15:57.246 +07:00 [ERR] Failed executing DbCommand (69ms) [Parameters=[@p0='?' (Size = 100), @p1='?' (Size = 2000), @p2='?' (Size = 100), @p3='?' (Size = 50), @p4='?' (Size = 50), @p5='?' (DbType = DateTime2), @p6='?' (Size = 1000), @p7='?' (DbType = Double), @p8='?' (Size = 4000), @p9='?' (Size = 50), @p10='?' (Size = 1000), @p11='?' (Size = 500), @p12='?' (Size = 50), @p13='?' (Size = 1000), @p14='?' (DbType = Int64), @p15='?' (Size = 4), @p16='?' (Size = 100), @p17='?' (Size = 2000), @p18='?' (Size = 100), @p19='?' (Size = 50), @p20='?' (Size = 50), @p21='?' (DbType = DateTime2), @p22='?' (Size = 1000), @p23='?' (DbType = Double), @p24='?' (Size = 4000), @p25='?' (Size = 50), @p26='?' (Size = 1000), @p27='?' (Size = 500), @p28='?' (Size = 50), @p29='?' (Size = 1000), @p30='?' (DbType = Int64), @p31='?' (Size = 4), @p32='?' (Size = 100), @p33='?' (Size = 2000), @p34='?' (Size = 100), @p35='?' (Size = 50), @p36='?' (Size = 50), @p37='?' (DbType = DateTime2), @p38='?' (Size = 1000), @p39='?' (DbType = Double), @p40='?' (Size = 4000), @p41='?' (Size = 50), @p42='?' (Size = 1000), @p43='?' (Size = 500), @p44='?' (Size = 50), @p45='?' (Size = 1000), @p46='?' (DbType = Int64), @p47='?' (Size = 4), @p48='?' (Size = 100), @p49='?' (Size = 2000), @p50='?' (Size = 100), @p51='?' (Size = 50), @p52='?' (Size = 50), @p53='?' (DbType = DateTime2), @p54='?' (Size = 1000), @p55='?' (DbType = Double), @p56='?' (Size = 4000), @p57='?' (Size = 50), @p58='?' (Size = 1000), @p59='?' (Size = 500), @p60='?' (Size = 50), @p61='?' (Size = 1000), @p62='?' (DbType = Int64), @p63='?' (Size = 4), @p64='?' (Size = 100), @p65='?' (Size = 2000), @p66='?' (Size = 100), @p67='?' (Size = 50), @p68='?' (Size = 50), @p69='?' (DbType = DateTime2), @p70='?' (Size = 1000), @p71='?' (DbType = Double), @p72='?' (Size = 4000), @p73='?' (Size = 50), @p74='?' (Size = 1000), @p75='?' (Size = 500), @p76='?' (Size = 50), @p77='?' (Size = 1000), @p78='?' (DbType = Int64), @p79='?' (Size = 4), @p80='?' (Size = 100), @p81='?' (Size = 2000), @p82='?' (Size = 100), @p83='?' (Size = 50), @p84='?' (Size = 50), @p85='?' (DbType = DateTime2), @p86='?' (Size = 1000), @p87='?' (DbType = Double), @p88='?' (Size = 4000), @p89='?' (Size = 50), @p90='?' (Size = 1000), @p91='?' (Size = 500), @p92='?' (Size = 50), @p93='?' (Size = 1000), @p94='?' (DbType = Int64), @p95='?' (Size = 4), @p96='?' (Size = 100), @p97='?' (Size = 2000), @p98='?' (Size = 100), @p99='?' (Size = 50), @p100='?' (Size = 50), @p101='?' (DbType = DateTime2), @p102='?' (Size = 1000), @p103='?' (DbType = Double), @p104='?' (Size = 4000), @p105='?' (Size = 50), @p106='?' (Size = 1000), @p107='?' (Size = 500), @p108='?' (Size = 50), @p109='?' (Size = 1000), @p110='?' (DbType = Int64), @p111='?' (Size = 4), @p112='?' (Size = 100), @p113='?' (Size = 2000), @p114='?' (Size = 100), @p115='?' (Size = 50), @p116='?' (Size = 50), @p117='?' (DbType = DateTime2), @p118='?' (Size = 1000), @p119='?' (DbType = Double), @p120='?' (Size = 4000), @p121='?' (Size = 50), @p122='?' (Size = 1000), @p123='?' (Size = 500), @p124='?' (Size = 50), @p125='?' (Size = 1000), @p126='?' (DbType = Int64), @p127='?' (Size = 4), @p128='?' (Size = 100), @p129='?' (Size = 2000), @p130='?' (Size = 100), @p131='?' (Size = 50), @p132='?' (Size = 50), @p133='?' (DbType = DateTime2), @p134='?' (Size = 1000), @p135='?' (DbType = Double), @p136='?' (Size = 4000), @p137='?' (Size = 50), @p138='?' (Size = 1000), @p139='?' (Size = 500), @p140='?' (Size = 50), @p141='?' (Size = 1000), @p142='?' (DbType = Int64), @p143='?' (Size = 4), @p144='?' (Size = 100), @p145='?' (Size = 2000), @p146='?' (Size = 100), @p147='?' (Size = 50), @p148='?' (Size = 50), @p149='?' (DbType = DateTime2), @p150='?' (Size = 1000), @p151='?' (DbType = Double), @p152='?' (Size = 4000), @p153='?' (Size = 50), @p154='?' (Size = 1000), @p155='?' (Size = 500), @p156='?' (Size = 50), @p157='?' (Size = 1000), @p158='?' (DbType = Int64), @p159='?' (Size = 4), @p160='?' (Size = 100), @p161='?' (Size = 2000), @p162='?' (Size = 100), @p163='?' (Size = 50), @p164='?' (Size = 50), @p165='?' (DbType = DateTime2), @p166='?' (Size = 1000), @p167='?' (DbType = Double), @p168='?' (Size = 4000), @p169='?' (Size = 50), @p170='?' (Size = 1000), @p171='?' (Size = 500), @p172='?' (Size = 50), @p173='?' (Size = 1000), @p174='?' (DbType = Int64), @p175='?' (Size = 4), @p176='?' (Size = 100), @p177='?' (Size = 2000), @p178='?' (Size = 100), @p179='?' (Size = 50), @p180='?' (Size = 50), @p181='?' (DbType = DateTime2), @p182='?' (Size = 1000), @p183='?' (DbType = Double), @p184='?' (Size = 4000), @p185='?' (Size = 50), @p186='?' (Size = 1000), @p187='?' (Size = 500), @p188='?' (Size = 50), @p189='?' (Size = 1000), @p190='?' (DbType = Int64), @p191='?' (Size = 4), @p192='?' (Size = 100), @p193='?' (Size = 2000), @p194='?' (Size = 100), @p195='?' (Size = 50), @p196='?' (Size = 50), @p197='?' (DbType = DateTime2), @p198='?' (Size = 1000), @p199='?' (DbType = Double), @p200='?' (Size = 4000), @p201='?' (Size = 50), @p202='?' (Size = 1000), @p203='?' (Size = 500), @p204='?' (Size = 50), @p205='?' (Size = 1000), @p206='?' (DbType = Int64), @p207='?' (Size = 4), @p208='?' (Size = 100), @p209='?' (Size = 2000), @p210='?' (Size = 100), @p211='?' (Size = 50), @p212='?' (Size = 50), @p213='?' (DbType = DateTime2), @p214='?' (Size = 1000), @p215='?' (DbType = Double), @p216='?' (Size = 4000), @p217='?' (Size = 50), @p218='?' (Size = 1000), @p219='?' (Size = 500), @p220='?' (Size = 50), @p221='?' (Size = 1000), @p222='?' (DbType = Int64), @p223='?' (Size = 4), @p224='?' (Size = 100), @p225='?' (Size = 2000), @p226='?' (Size = 100), @p227='?' (Size = 50), @p228='?' (Size = 50), @p229='?' (DbType = DateTime2), @p230='?' (Size = 1000), @p231='?' (DbType = Double), @p232='?' (Size = 4000), @p233='?' (Size = 50), @p234='?' (Size = 1000), @p235='?' (Size = 500), @p236='?' (Size = 50), @p237='?' (Size = 1000), @p238='?' (DbType = Int64), @p239='?' (Size = 4), @p240='?' (Size = 100), @p241='?' (Size = 2000), @p242='?' (Size = 100), @p243='?' (Size = 50), @p244='?' (Size = 50), @p245='?' (DbType = DateTime2), @p246='?' (Size = 1000), @p247='?' (DbType = Double), @p248='?' (Size = 4000), @p249='?' (Size = 50), @p250='?' (Size = 1000), @p251='?' (Size = 500), @p252='?' (Size = 50), @p253='?' (Size = 1000), @p254='?' (DbType = Int64), @p255='?' (Size = 4), @p256='?' (Size = 100), @p257='?' (Size = 2000), @p258='?' (Size = 100), @p259='?' (Size = 50), @p260='?' (Size = 50), @p261='?' (DbType = DateTime2), @p262='?' (Size = 1000), @p263='?' (DbType = Double), @p264='?' (Size = 4000), @p265='?' (Size = 50), @p266='?' (Size = 1000), @p267='?' (Size = 500), @p268='?' (Size = 50), @p269='?' (Size = 1000), @p270='?' (DbType = Int64), @p271='?' (Size = 4), @p272='?' (Size = 100), @p273='?' (Size = 2000), @p274='?' (Size = 100), @p275='?' (Size = 50), @p276='?' (Size = 50), @p277='?' (DbType = DateTime2), @p278='?' (Size = 1000), @p279='?' (DbType = Double), @p280='?' (Size = 4000), @p281='?' (Size = 50), @p282='?' (Size = 1000), @p283='?' (Size = 500), @p284='?' (Size = 50), @p285='?' (Size = 1000), @p286='?' (DbType = Int64), @p287='?' (Size = 4), @p288='?' (Size = 100), @p289='?' (Size = 2000), @p290='?' (Size = 100), @p291='?' (Size = 50), @p292='?' (Size = 50), @p293='?' (DbType = DateTime2), @p294='?' (Size = 1000), @p295='?' (DbType = Double), @p296='?' (Size = 4000), @p297='?' (Size = 50), @p298='?' (Size = 1000), @p299='?' (Size = 500), @p300='?' (Size = 50), @p301='?' (Size = 1000), @p302='?' (DbType = Int64), @p303='?' (Size = 4), @p304='?' (Size = 100), @p305='?' (Size = 2000), @p306='?' (Size = 100), @p307='?' (Size = 50), @p308='?' (Size = 50), @p309='?' (DbType = DateTime2), @p310='?' (Size = 1000), @p311='?' (DbType = Double), @p312='?' (Size = 4000), @p313='?' (Size = 50), @p314='?' (Size = 1000), @p315='?' (Size = 500), @p316='?' (Size = 50), @p317='?' (Size = 1000), @p318='?' (DbType = Int64), @p319='?' (Size = 4), @p320='?' (Size = 100), @p321='?' (Size = 2000), @p322='?' (Size = 100), @p323='?' (Size = 50), @p324='?' (Size = 50), @p325='?' (DbType = DateTime2), @p326='?' (Size = 1000), @p327='?' (DbType = Double), @p328='?' (Size = 4000), @p329='?' (Size = 50), @p330='?' (Size = 1000), @p331='?' (Size = 500), @p332='?' (Size = 50), @p333='?' (Size = 1000), @p334='?' (DbType = Int64), @p335='?' (Size = 4), @p336='?' (Size = 100), @p337='?' (Size = 2000), @p338='?' (Size = 100), @p339='?' (Size = 50), @p340='?' (Size = 50), @p341='?' (DbType = DateTime2), @p342='?' (Size = 1000), @p343='?' (DbType = Double), @p344='?' (Size = 4000), @p345='?' (Size = 50), @p346='?' (Size = 1000), @p347='?' (Size = 500), @p348='?' (Size = 50), @p349='?' (Size = 1000), @p350='?' (DbType = Int64), @p351='?' (Size = 4), @p352='?' (Size = 100), @p353='?' (Size = 2000), @p354='?' (Size = 100), @p355='?' (Size = 50), @p356='?' (Size = 50), @p357='?' (DbType = DateTime2), @p358='?' (Size = 1000), @p359='?' (DbType = Double), @p360='?' (Size = 4000), @p361='?' (Size = 50), @p362='?' (Size = 1000), @p363='?' (Size = 500), @p364='?' (Size = 50), @p365='?' (Size = 1000), @p366='?' (DbType = Int64), @p367='?' (Size = 4), @p368='?' (Size = 100), @p369='?' (Size = 2000), @p370='?' (Size = 100), @p371='?' (Size = 50), @p372='?' (Size = 50), @p373='?' (DbType = DateTime2), @p374='?' (Size = 1000), @p375='?' (DbType = Double), @p376='?' (Size = 4000), @p377='?' (Size = 50), @p378='?' (Size = 1000), @p379='?' (Size = 500), @p380='?' (Size = 50), @p381='?' (Size = 1000), @p382='?' (DbType = Int64), @p383='?' (Size = 4), @p384='?' (Size = 100), @p385='?' (Size = 2000), @p386='?' (Size = 100), @p387='?' (Size = 50), @p388='?' (Size = 50), @p389='?' (DbType = DateTime2), @p390='?' (Size = 1000), @p391='?' (DbType = Double), @p392='?' (Size = 4000), @p393='?' (Size = 50), @p394='?' (Size = 1000), @p395='?' (Size = 500), @p396='?' (Size = 50), @p397='?' (Size = 1000), @p398='?' (DbType = Int64), @p399='?' (Size = 4), @p400='?' (Size = 100), @p401='?' (Size = 2000), @p402='?' (Size = 100), @p403='?' (Size = 50), @p404='?' (Size = 50), @p405='?' (DbType = DateTime2), @p406='?' (Size = 1000), @p407='?' (DbType = Double), @p408='?' (Size = 4000), @p409='?' (Size = 50), @p410='?' (Size = 1000), @p411='?' (Size = 500), @p412='?' (Size = 50), @p413='?' (Size = 1000), @p414='?' (DbType = Int64), @p415='?' (Size = 4), @p416='?' (Size = 100), @p417='?' (Size = 2000), @p418='?' (Size = 100), @p419='?' (Size = 50), @p420='?' (Size = 50), @p421='?' (DbType = DateTime2), @p422='?' (Size = 1000), @p423='?' (DbType = Double), @p424='?' (Size = 4000), @p425='?' (Size = 50), @p426='?' (Size = 1000), @p427='?' (Size = 500), @p428='?' (Size = 50), @p429='?' (Size = 1000), @p430='?' (DbType = Int64), @p431='?' (Size = 4), @p432='?' (Size = 100), @p433='?' (Size = 2000), @p434='?' (Size = 100), @p435='?' (Size = 50), @p436='?' (Size = 50), @p437='?' (DbType = DateTime2), @p438='?' (Size = 1000), @p439='?' (DbType = Double), @p440='?' (Size = 4000), @p441='?' (Size = 50), @p442='?' (Size = 1000), @p443='?' (Size = 500), @p444='?' (Size = 50), @p445='?' (Size = 1000), @p446='?' (DbType = Int64), @p447='?' (Size = 4), @p448='?' (Size = 100), @p449='?' (Size = 2000), @p450='?' (Size = 100), @p451='?' (Size = 50), @p452='?' (Size = 50), @p453='?' (DbType = DateTime2), @p454='?' (Size = 1000), @p455='?' (DbType = Double), @p456='?' (Size = 4000), @p457='?' (Size = 50), @p458='?' (Size = 1000), @p459='?' (Size = 500), @p460='?' (Size = 50), @p461='?' (Size = 1000), @p462='?' (DbType = Int64), @p463='?' (Size = 4), @p464='?' (Size = 100), @p465='?' (Size = 2000), @p466='?' (Size = 100), @p467='?' (Size = 50), @p468='?' (Size = 50), @p469='?' (DbType = DateTime2), @p470='?' (Size = 1000), @p471='?' (DbType = Double), @p472='?' (Size = 4000), @p473='?' (Size = 50), @p474='?' (Size = 1000), @p475='?' (Size = 500), @p476='?' (Size = 50), @p477='?' (Size = 1000), @p478='?' (DbType = Int64), @p479='?' (Size = 4), @p480='?' (Size = 100), @p481='?' (Size = 2000), @p482='?' (Size = 100), @p483='?' (Size = 50), @p484='?' (Size = 50), @p485='?' (DbType = DateTime2), @p486='?' (Size = 1000), @p487='?' (DbType = Double), @p488='?' (Size = 4000), @p489='?' (Size = 50), @p490='?' (Size = 1000), @p491='?' (Size = 500), @p492='?' (Size = 50), @p493='?' (Size = 1000), @p494='?' (DbType = Int64), @p495='?' (Size = 4), @p496='?' (Size = 100), @p497='?' (Size = 2000), @p498='?' (Size = 100), @p499='?' (Size = 50), @p500='?' (Size = 50), @p501='?' (DbType = DateTime2), @p502='?' (Size = 1000), @p503='?' (DbType = Double), @p504='?' (Size = 4000), @p505='?' (Size = 50), @p506='?' (Size = 1000), @p507='?' (Size = 500), @p508='?' (Size = 50), @p509='?' (Size = 1000), @p510='?' (DbType = Int64), @p511='?' (Size = 4), @p512='?' (Size = 100), @p513='?' (Size = 2000), @p514='?' (Size = 100), @p515='?' (Size = 50), @p516='?' (Size = 50), @p517='?' (DbType = DateTime2), @p518='?' (Size = 1000), @p519='?' (DbType = Double), @p520='?' (Size = 4000), @p521='?' (Size = 50), @p522='?' (Size = 1000), @p523='?' (Size = 500), @p524='?' (Size = 50), @p525='?' (Size = 1000), @p526='?' (DbType = Int64), @p527='?' (Size = 4), @p528='?' (Size = 100), @p529='?' (Size = 2000), @p530='?' (Size = 100), @p531='?' (Size = 50), @p532='?' (Size = 50), @p533='?' (DbType = DateTime2), @p534='?' (Size = 1000), @p535='?' (DbType = Double), @p536='?' (Size = 4000), @p537='?' (Size = 50), @p538='?' (Size = 1000), @p539='?' (Size = 500), @p540='?' (Size = 50), @p541='?' (Size = 1000), @p542='?' (DbType = Int64), @p543='?' (Size = 4), @p544='?' (Size = 100), @p545='?' (Size = 2000), @p546='?' (Size = 100), @p547='?' (Size = 50), @p548='?' (Size = 50), @p549='?' (DbType = DateTime2), @p550='?' (Size = 1000), @p551='?' (DbType = Double), @p552='?' (Size = 4000), @p553='?' (Size = 50), @p554='?' (Size = 1000), @p555='?' (Size = 500), @p556='?' (Size = 50), @p557='?' (Size = 1000), @p558='?' (DbType = Int64), @p559='?' (Size = 4), @p560='?' (Size = 100), @p561='?' (Size = 2000), @p562='?' (Size = 100), @p563='?' (Size = 50), @p564='?' (Size = 50), @p565='?' (DbType = DateTime2), @p566='?' (Size = 1000), @p567='?' (DbType = Double), @p568='?' (Size = 4000), @p569='?' (Size = 50), @p570='?' (Size = 1000), @p571='?' (Size = 500), @p572='?' (Size = 50), @p573='?' (Size = 1000), @p574='?' (DbType = Int64), @p575='?' (Size = 4), @p576='?' (Size = 100), @p577='?' (Size = 2000), @p578='?' (Size = 100), @p579='?' (Size = 50), @p580='?' (Size = 50), @p581='?' (DbType = DateTime2), @p582='?' (Size = 1000), @p583='?' (DbType = Double), @p584='?' (Size = 4000), @p585='?' (Size = 50), @p586='?' (Size = 1000), @p587='?' (Size = 500), @p588='?' (Size = 50), @p589='?' (Size = 1000), @p590='?' (DbType = Int64), @p591='?' (Size = 4), @p592='?' (Size = 100), @p593='?' (Size = 2000), @p594='?' (Size = 100), @p595='?' (Size = 50), @p596='?' (Size = 50), @p597='?' (DbType = DateTime2), @p598='?' (Size = 1000), @p599='?' (DbType = Double), @p600='?' (Size = 4000), @p601='?' (Size = 50), @p602='?' (Size = 1000), @p603='?' (Size = 500), @p604='?' (Size = 50), @p605='?' (Size = 1000), @p606='?' (DbType = Int64), @p607='?' (Size = 4), @p608='?' (Size = 100), @p609='?' (Size = 2000), @p610='?' (Size = 100), @p611='?' (Size = 50), @p612='?' (Size = 50), @p613='?' (DbType = DateTime2), @p614='?' (Size = 1000), @p615='?' (DbType = Double), @p616='?' (Size = 4000), @p617='?' (Size = 50), @p618='?' (Size = 1000), @p619='?' (Size = 500), @p620='?' (Size = 50), @p621='?' (Size = 1000), @p622='?' (DbType = Int64), @p623='?' (Size = 4), @p624='?' (Size = 100), @p625='?' (Size = 2000), @p626='?' (Size = 100), @p627='?' (Size = 50), @p628='?' (Size = 50), @p629='?' (DbType = DateTime2), @p630='?' (Size = 1000), @p631='?' (DbType = Double), @p632='?' (Size = 4000), @p633='?' (Size = 50), @p634='?' (Size = 1000), @p635='?' (Size = 500), @p636='?' (Size = 50), @p637='?' (Size = 1000), @p638='?' (DbType = Int64), @p639='?' (Size = 4), @p640='?' (Size = 100), @p641='?' (Size = 2000), @p642='?' (Size = 100), @p643='?' (Size = 50), @p644='?' (Size = 50), @p645='?' (DbType = DateTime2), @p646='?' (Size = 1000), @p647='?' (DbType = Double), @p648='?' (Size = 4000), @p649='?' (Size = 50), @p650='?' (Size = 1000), @p651='?' (Size = 500), @p652='?' (Size = 50), @p653='?' (Size = 1000), @p654='?' (DbType = Int64), @p655='?' (Size = 4), @p656='?' (Size = 100), @p657='?' (Size = 2000), @p658='?' (Size = 100), @p659='?' (Size = 50), @p660='?' (Size = 50), @p661='?' (DbType = DateTime2), @p662='?' (Size = 1000), @p663='?' (DbType = Double), @p664='?' (Size = 4000), @p665='?' (Size = 50), @p666='?' (Size = 1000), @p667='?' (Size = 500), @p668='?' (Size = 50), @p669='?' (Size = 1000), @p670='?' (DbType = Int64), @p671='?' (Size = 4)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [CachedMovies] ([Slug], [Description], [Director], [Duration], [Language], [LastUpdated], [PosterUrl], [Rating], [RawData], [Resolution], [ThumbUrl], [Title], [TmdbId], [TrailerUrl], [Views], [Year])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15),
(@p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31),
(@p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47),
(@p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63),
(@p64, @p65, @p66, @p67, @p68, @p69, @p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79),
(@p80, @p81, @p82, @p83, @p84, @p85, @p86, @p87, @p88, @p89, @p90, @p91, @p92, @p93, @p94, @p95),
(@p96, @p97, @p98, @p99, @p100, @p101, @p102, @p103, @p104, @p105, @p106, @p107, @p108, @p109, @p110, @p111),
(@p112, @p113, @p114, @p115, @p116, @p117, @p118, @p119, @p120, @p121, @p122, @p123, @p124, @p125, @p126, @p127),
(@p128, @p129, @p130, @p131, @p132, @p133, @p134, @p135, @p136, @p137, @p138, @p139, @p140, @p141, @p142, @p143),
(@p144, @p145, @p146, @p147, @p148, @p149, @p150, @p151, @p152, @p153, @p154, @p155, @p156, @p157, @p158, @p159),
(@p160, @p161, @p162, @p163, @p164, @p165, @p166, @p167, @p168, @p169, @p170, @p171, @p172, @p173, @p174, @p175),
(@p176, @p177, @p178, @p179, @p180, @p181, @p182, @p183, @p184, @p185, @p186, @p187, @p188, @p189, @p190, @p191),
(@p192, @p193, @p194, @p195, @p196, @p197, @p198, @p199, @p200, @p201, @p202, @p203, @p204, @p205, @p206, @p207),
(@p208, @p209, @p210, @p211, @p212, @p213, @p214, @p215, @p216, @p217, @p218, @p219, @p220, @p221, @p222, @p223),
(@p224, @p225, @p226, @p227, @p228, @p229, @p230, @p231, @p232, @p233, @p234, @p235, @p236, @p237, @p238, @p239),
(@p240, @p241, @p242, @p243, @p244, @p245, @p246, @p247, @p248, @p249, @p250, @p251, @p252, @p253, @p254, @p255),
(@p256, @p257, @p258, @p259, @p260, @p261, @p262, @p263, @p264, @p265, @p266, @p267, @p268, @p269, @p270, @p271),
(@p272, @p273, @p274, @p275, @p276, @p277, @p278, @p279, @p280, @p281, @p282, @p283, @p284, @p285, @p286, @p287),
(@p288, @p289, @p290, @p291, @p292, @p293, @p294, @p295, @p296, @p297, @p298, @p299, @p300, @p301, @p302, @p303),
(@p304, @p305, @p306, @p307, @p308, @p309, @p310, @p311, @p312, @p313, @p314, @p315, @p316, @p317, @p318, @p319),
(@p320, @p321, @p322, @p323, @p324, @p325, @p326, @p327, @p328, @p329, @p330, @p331, @p332, @p333, @p334, @p335),
(@p336, @p337, @p338, @p339, @p340, @p341, @p342, @p343, @p344, @p345, @p346, @p347, @p348, @p349, @p350, @p351),
(@p352, @p353, @p354, @p355, @p356, @p357, @p358, @p359, @p360, @p361, @p362, @p363, @p364, @p365, @p366, @p367),
(@p368, @p369, @p370, @p371, @p372, @p373, @p374, @p375, @p376, @p377, @p378, @p379, @p380, @p381, @p382, @p383),
(@p384, @p385, @p386, @p387, @p388, @p389, @p390, @p391, @p392, @p393, @p394, @p395, @p396, @p397, @p398, @p399),
(@p400, @p401, @p402, @p403, @p404, @p405, @p406, @p407, @p408, @p409, @p410, @p411, @p412, @p413, @p414, @p415),
(@p416, @p417, @p418, @p419, @p420, @p421, @p422, @p423, @p424, @p425, @p426, @p427, @p428, @p429, @p430, @p431),
(@p432, @p433, @p434, @p435, @p436, @p437, @p438, @p439, @p440, @p441, @p442, @p443, @p444, @p445, @p446, @p447),
(@p448, @p449, @p450, @p451, @p452, @p453, @p454, @p455, @p456, @p457, @p458, @p459, @p460, @p461, @p462, @p463),
(@p464, @p465, @p466, @p467, @p468, @p469, @p470, @p471, @p472, @p473, @p474, @p475, @p476, @p477, @p478, @p479),
(@p480, @p481, @p482, @p483, @p484, @p485, @p486, @p487, @p488, @p489, @p490, @p491, @p492, @p493, @p494, @p495),
(@p496, @p497, @p498, @p499, @p500, @p501, @p502, @p503, @p504, @p505, @p506, @p507, @p508, @p509, @p510, @p511),
(@p512, @p513, @p514, @p515, @p516, @p517, @p518, @p519, @p520, @p521, @p522, @p523, @p524, @p525, @p526, @p527),
(@p528, @p529, @p530, @p531, @p532, @p533, @p534, @p535, @p536, @p537, @p538, @p539, @p540, @p541, @p542, @p543),
(@p544, @p545, @p546, @p547, @p548, @p549, @p550, @p551, @p552, @p553, @p554, @p555, @p556, @p557, @p558, @p559),
(@p560, @p561, @p562, @p563, @p564, @p565, @p566, @p567, @p568, @p569, @p570, @p571, @p572, @p573, @p574, @p575),
(@p576, @p577, @p578, @p579, @p580, @p581, @p582, @p583, @p584, @p585, @p586, @p587, @p588, @p589, @p590, @p591),
(@p592, @p593, @p594, @p595, @p596, @p597, @p598, @p599, @p600, @p601, @p602, @p603, @p604, @p605, @p606, @p607),
(@p608, @p609, @p610, @p611, @p612, @p613, @p614, @p615, @p616, @p617, @p618, @p619, @p620, @p621, @p622, @p623),
(@p624, @p625, @p626, @p627, @p628, @p629, @p630, @p631, @p632, @p633, @p634, @p635, @p636, @p637, @p638, @p639),
(@p640, @p641, @p642, @p643, @p644, @p645, @p646, @p647, @p648, @p649, @p650, @p651, @p652, @p653, @p654, @p655),
(@p656, @p657, @p658, @p659, @p660, @p661, @p662, @p663, @p664, @p665, @p666, @p667, @p668, @p669, @p670, @p671);
2025-05-29 14:15:57.271 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'WebAppApiPhim.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_CachedMovies'. Cannot insert duplicate key in object 'dbo.CachedMovies'. The duplicate key value is (doraemon-nobita-va-chuyen-phieu-luu-vao-xu-quy).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:fe4f86b6-7860-4e5f-8d1a-fd3450121e09
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_CachedMovies'. Cannot insert duplicate key in object 'dbo.CachedMovies'. The duplicate key value is (doraemon-nobita-va-chuyen-phieu-luu-vao-xu-quy).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:fe4f86b6-7860-4e5f-8d1a-fd3450121e09
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-29 14:15:57.346 +07:00 [ERR] Failed to sync page 3
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_CachedMovies'. Cannot insert duplicate key in object 'dbo.CachedMovies'. The duplicate key value is (doraemon-nobita-va-chuyen-phieu-luu-vao-xu-quy).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:fe4f86b6-7860-4e5f-8d1a-fd3450121e09
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at WebAppApiPhim.BackgroundServices.SyncMoviesService.SafeSyncMovies(CancellationToken stoppingToken) in C:\D\Leaning\API\APICode\WebAppApiPhim\Services\SyncMoviesService.cs:line 118
2025-05-29 14:15:57.363 +07:00 [INF] Movie synchronization completed. Synced 45 new movies.
2025-05-29 14:19:04.840 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '2109.115'
2025-05-29 14:27:08.789 +07:00 [INF] SyncMoviesService is starting.
2025-05-29 14:27:08.883 +07:00 [INF] CacheCleanupService is starting.
2025-05-29 14:27:10.158 +07:00 [WRN] Failed to determine the https port for redirect.
2025-05-29 14:28:08.876 +07:00 [INF] Starting safe movie synchronization...
2025-05-29 14:28:08.954 +07:00 [INF] Calling API endpoint: phim-moi/v1?page=1&limit=20
2025-05-29 14:28:10.156 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '1129.4918'
2025-05-29 14:28:10.176 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":"16475e51b4ac5c7c9d726d9efb3642f2","name":"Ch\u00e0ng Trai Xinh \u0110\u1eb9p","slug":"chang-trai-xinh-dep","year":"2021","loai_phim":"Phim b\u1ed9","quoc_gia":"Nh\u1eadt B\u1ea3n","modified":"2025-05-29 07:18:49"},{"id":"251ac3d1e0619a1166fa15753157ea11","name":"Chuy\u1ec7n T\u00ecnh Nh\u00e0 V\u0103n (Ph\u1ea7n 2)","slug":"chuyen-tinh-nha-van-phan-2","year":"2019","loai_phim":"Phim b\u1ed9","quoc_gia":"Nh\u1eadt B\u1ea3n","modified":"2025-05-29 07:18:42"},{"id":"c1f0986fd7eefc02...
2025-05-29 14:28:10.181 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 14:28:10.184 +07:00 [INF] Successfully cached 20 movies for page 1
2025-05-29 14:28:10.550 +07:00 [INF] Synced page 1, total movies: 14
2025-05-29 14:28:13.553 +07:00 [INF] Calling API endpoint: phim-moi/v1?page=2&limit=20
2025-05-29 14:28:13.914 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '357.7927'
2025-05-29 14:28:13.919 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":"372f8774202fcaef20fb3917607999a8","name":"Doraemon: Nobita Th\u00e1m Hi\u1ec3m V\u00f9ng \u0110\u1ea5t M\u1edbi","slug":"doraemon-nobita-tham-hiem-vung-dat-moi","year":"1982","loai_phim":"Phim l\u1ebb","quoc_gia":"Nh\u1eadt B\u1ea3n","modified":"2025-05-28 20:15:35"},{"id":"80e0f2352f868abb3e8fe7238c6103ac","name":"Doraemon: Ch\u00fa Kh\u1ee7ng Long c\u1ee7a Nobita","slug":"doraemon-chu-khung-long-cua-nobita","year":"1980","loai_phim":"Phim l\u1ebb","quoc_gia":"Nh\u1eadt B\u1ea3n...
2025-05-29 14:28:13.922 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 14:28:13.924 +07:00 [INF] Successfully cached 20 movies for page 2
2025-05-29 14:28:14.003 +07:00 [INF] Synced page 2, total movies: 30
2025-05-29 14:28:17.011 +07:00 [INF] Calling API endpoint: phim-moi/v1?page=3&limit=20
2025-05-29 14:28:18.631 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '1617.4609'
2025-05-29 14:28:18.636 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":"9b0005630544ac4e9a1a1f619f539b51","name":"Doraemon: Nobita v\u00e0 M\u00ea Cung Thi\u1ebfc","slug":"doraemon-nobita-va-me-cung-thiec","year":"1993","loai_phim":"Phim l\u1ebb","quoc_gia":"Nh\u1eadt B\u1ea3n","modified":"2025-05-28 13:47:19"},{"id":"a38c443284e98427195669e68a0016cb","name":"Doraemon: Nobita v\u00e0 V\u01b0\u01a1ng Qu\u1ed1c Robot","slug":"doraemon-nobita-va-vuong-quoc-robot","year":"2002","loai_phim":"Phim l\u1ebb","quoc_gia":"Nh\u1eadt B\u1ea3n","modified":"2025-0...
2025-05-29 14:28:18.639 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 14:28:18.641 +07:00 [INF] Successfully cached 20 movies for page 3
2025-05-29 14:28:18.726 +07:00 [INF] Synced page 3, total movies: 48
2025-05-29 14:28:21.734 +07:00 [INF] Movie synchronization completed. Synced 48 new movies.
2025-05-29 14:39:03.459 +07:00 [INF] SyncMoviesService is starting.
2025-05-29 14:39:03.555 +07:00 [INF] CacheCleanupService is starting.
2025-05-29 14:39:04.672 +07:00 [WRN] Failed to determine the https port for redirect.
2025-05-29 14:40:03.549 +07:00 [INF] Starting safe movie synchronization...
2025-05-29 14:40:03.660 +07:00 [INF] Processing page 1...
2025-05-29 14:40:03.670 +07:00 [INF] Calling API endpoint: phim-moi/v1?page=1&limit=20
2025-05-29 14:40:04.899 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '1159.1135'
2025-05-29 14:40:04.917 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":"16475e51b4ac5c7c9d726d9efb3642f2","name":"Ch\u00e0ng Trai Xinh \u0110\u1eb9p","slug":"chang-trai-xinh-dep","year":"2021","loai_phim":"Phim b\u1ed9","quoc_gia":"Nh\u1eadt B\u1ea3n","modified":"2025-05-29 07:18:49"},{"id":"251ac3d1e0619a1166fa15753157ea11","name":"Chuy\u1ec7n T\u00ecnh Nh\u00e0 V\u0103n (Ph\u1ea7n 2)","slug":"chuyen-tinh-nha-van-phan-2","year":"2019","loai_phim":"Phim b\u1ed9","quoc_gia":"Nh\u1eadt B\u1ea3n","modified":"2025-05-29 07:18:42"},{"id":"c1f0986fd7eefc02...
2025-05-29 14:40:04.922 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 14:40:04.925 +07:00 [INF] Successfully cached 20 movies for page 1
2025-05-29 14:40:05.113 +07:00 [INF] Page 1: Found 20 movies, 20 already exist, 0 new movies to add
2025-05-29 14:40:05.117 +07:00 [INF] Completed page 1: 0 synced, 20 skipped, 0 errors
2025-05-29 14:40:07.121 +07:00 [INF] Processing page 2...
2025-05-29 14:40:07.123 +07:00 [INF] Calling API endpoint: phim-moi/v1?page=2&limit=20
2025-05-29 14:40:07.471 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '345.621'
2025-05-29 14:40:07.477 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":"372f8774202fcaef20fb3917607999a8","name":"Doraemon: Nobita Th\u00e1m Hi\u1ec3m V\u00f9ng \u0110\u1ea5t M\u1edbi","slug":"doraemon-nobita-tham-hiem-vung-dat-moi","year":"1982","loai_phim":"Phim l\u1ebb","quoc_gia":"Nh\u1eadt B\u1ea3n","modified":"2025-05-28 20:15:35"},{"id":"80e0f2352f868abb3e8fe7238c6103ac","name":"Doraemon: Ch\u00fa Kh\u1ee7ng Long c\u1ee7a Nobita","slug":"doraemon-chu-khung-long-cua-nobita","year":"1980","loai_phim":"Phim l\u1ebb","quoc_gia":"Nh\u1eadt B\u1ea3n...
2025-05-29 14:40:07.479 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 14:40:07.481 +07:00 [INF] Successfully cached 20 movies for page 2
2025-05-29 14:40:07.490 +07:00 [INF] Page 2: Found 20 movies, 20 already exist, 0 new movies to add
2025-05-29 14:40:07.494 +07:00 [INF] Completed page 2: 0 synced, 20 skipped, 0 errors
2025-05-29 14:40:09.503 +07:00 [INF] Processing page 3...
2025-05-29 14:40:09.505 +07:00 [INF] Calling API endpoint: phim-moi/v1?page=3&limit=20
2025-05-29 14:40:09.862 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '353.8645'
2025-05-29 14:40:09.868 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":"9b0005630544ac4e9a1a1f619f539b51","name":"Doraemon: Nobita v\u00e0 M\u00ea Cung Thi\u1ebfc","slug":"doraemon-nobita-va-me-cung-thiec","year":"1993","loai_phim":"Phim l\u1ebb","quoc_gia":"Nh\u1eadt B\u1ea3n","modified":"2025-05-28 13:47:19"},{"id":"a38c443284e98427195669e68a0016cb","name":"Doraemon: Nobita v\u00e0 V\u01b0\u01a1ng Qu\u1ed1c Robot","slug":"doraemon-nobita-va-vuong-quoc-robot","year":"2002","loai_phim":"Phim l\u1ebb","quoc_gia":"Nh\u1eadt B\u1ea3n","modified":"2025-0...
2025-05-29 14:40:09.870 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 14:40:09.872 +07:00 [INF] Successfully cached 20 movies for page 3
2025-05-29 14:40:09.882 +07:00 [INF] Page 3: Found 20 movies, 20 already exist, 0 new movies to add
2025-05-29 14:40:09.886 +07:00 [INF] Completed page 3: 0 synced, 20 skipped, 0 errors
2025-05-29 14:40:11.895 +07:00 [INF] Movie synchronization completed. Total: 0 synced, 60 skipped, 0 errors
2025-05-29 15:26:40.713 +07:00 [INF] Database seeded successfully.
2025-05-29 15:26:40.914 +07:00 [INF] SyncMoviesService is starting.
2025-05-29 15:26:40.921 +07:00 [INF] CacheCleanupService is starting.
2025-05-29 15:26:42.891 +07:00 [WRN] Failed to determine the https port for redirect.
2025-05-29 15:27:40.909 +07:00 [INF] Starting safe movie synchronization...
2025-05-29 15:27:41.008 +07:00 [INF] Processing page 1...
2025-05-29 15:27:41.019 +07:00 [INF] Calling API endpoint: phim-moi/v1?page=1&limit=20
2025-05-29 15:27:46.395 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '5290.436'
2025-05-29 15:27:46.415 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":"16475e51b4ac5c7c9d726d9efb3642f2","name":"Ch\u00e0ng Trai Xinh \u0110\u1eb9p","slug":"chang-trai-xinh-dep","year":"2021","loai_phim":"Phim b\u1ed9","quoc_gia":"Nh\u1eadt B\u1ea3n","modified":"2025-05-29 07:18:49"},{"id":"251ac3d1e0619a1166fa15753157ea11","name":"Chuy\u1ec7n T\u00ecnh Nh\u00e0 V\u0103n (Ph\u1ea7n 2)","slug":"chuyen-tinh-nha-van-phan-2","year":"2019","loai_phim":"Phim b\u1ed9","quoc_gia":"Nh\u1eadt B\u1ea3n","modified":"2025-05-29 07:18:42"},{"id":"c1f0986fd7eefc02...
2025-05-29 15:27:46.422 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 15:27:46.424 +07:00 [INF] Successfully cached 20 movies for page 1
2025-05-29 15:27:46.619 +07:00 [INF] Page 1: Found 20 movies, 20 already exist, 0 new movies to add
2025-05-29 15:27:46.623 +07:00 [INF] Completed page 1: 0 synced, 20 skipped, 0 errors
2025-05-29 15:27:48.640 +07:00 [INF] Processing page 2...
2025-05-29 15:27:48.644 +07:00 [INF] Calling API endpoint: phim-moi/v1?page=2&limit=20
2025-05-29 15:27:49.658 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '1011.9255'
2025-05-29 15:27:49.665 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":"372f8774202fcaef20fb3917607999a8","name":"Doraemon: Nobita Th\u00e1m Hi\u1ec3m V\u00f9ng \u0110\u1ea5t M\u1edbi","slug":"doraemon-nobita-tham-hiem-vung-dat-moi","year":"1982","loai_phim":"Phim l\u1ebb","quoc_gia":"Nh\u1eadt B\u1ea3n","modified":"2025-05-28 20:15:35"},{"id":"80e0f2352f868abb3e8fe7238c6103ac","name":"Doraemon: Ch\u00fa Kh\u1ee7ng Long c\u1ee7a Nobita","slug":"doraemon-chu-khung-long-cua-nobita","year":"1980","loai_phim":"Phim l\u1ebb","quoc_gia":"Nh\u1eadt B\u1ea3n...
2025-05-29 15:27:49.668 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 15:27:49.670 +07:00 [INF] Successfully cached 20 movies for page 2
2025-05-29 15:27:49.692 +07:00 [INF] Page 2: Found 20 movies, 20 already exist, 0 new movies to add
2025-05-29 15:27:49.696 +07:00 [INF] Completed page 2: 0 synced, 20 skipped, 0 errors
2025-05-29 15:27:51.706 +07:00 [INF] Processing page 3...
2025-05-29 15:27:51.708 +07:00 [INF] Calling API endpoint: phim-moi/v1?page=3&limit=20
2025-05-29 15:27:52.063 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '352.3414'
2025-05-29 15:27:52.068 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":"9b0005630544ac4e9a1a1f619f539b51","name":"Doraemon: Nobita v\u00e0 M\u00ea Cung Thi\u1ebfc","slug":"doraemon-nobita-va-me-cung-thiec","year":"1993","loai_phim":"Phim l\u1ebb","quoc_gia":"Nh\u1eadt B\u1ea3n","modified":"2025-05-28 13:47:19"},{"id":"a38c443284e98427195669e68a0016cb","name":"Doraemon: Nobita v\u00e0 V\u01b0\u01a1ng Qu\u1ed1c Robot","slug":"doraemon-nobita-va-vuong-quoc-robot","year":"2002","loai_phim":"Phim l\u1ebb","quoc_gia":"Nh\u1eadt B\u1ea3n","modified":"2025-0...
2025-05-29 15:27:52.070 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 15:27:52.072 +07:00 [INF] Successfully cached 20 movies for page 3
2025-05-29 15:27:52.089 +07:00 [INF] Page 3: Found 20 movies, 20 already exist, 0 new movies to add
2025-05-29 15:27:52.093 +07:00 [INF] Completed page 3: 0 synced, 20 skipped, 0 errors
2025-05-29 15:27:54.103 +07:00 [INF] Movie synchronization completed. Total: 0 synced, 60 skipped, 0 errors
2025-05-29 15:28:37.908 +07:00 [INF] Calling API endpoint: phim-moi/v2?page=1&limit=20
2025-05-29 15:28:38.373 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '461.6051'
2025-05-29 15:28:38.771 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":560693,"name":"Th\u1ebf Gi\u1edbi C\u1ee7a N\u1eef Chi\u1ebfn Binh \u0110\u01b0\u1eddng Ph\u1ed1","slug":"the-gioi-cua-nu-chien-binh-duong-pho","year":"2025","loai_phim":"Tvshows","tmdb_id":"292614","quoc_gia":"Ha\u0300n Qu\u00f4\u0301c","modified_time":"2025-05-29 13:13:15"},{"id":560672,"name":"Gi\u1ecdng H\u00e1t M\u1edbi Ch\u00e2u \u00c1","slug":"giong-hat-moi-chau-a","year":"2025","loai_phim":"Tvshows","tmdb_id":"292197","quoc_gia":"Trung Qu\u1ed1c","modified_time":"2025-05-2...
2025-05-29 15:28:38.773 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 15:28:38.775 +07:00 [INF] Successfully cached 20 movies for page 1
2025-05-29 15:28:39.098 +07:00 [INF] Synced page 1: 11 new, 9 skipped
2025-05-29 15:28:39.100 +07:00 [INF] Calling API endpoint: phim-moi/v2?page=2&limit=20
2025-05-29 15:28:39.487 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '385.0208'
2025-05-29 15:28:39.494 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":556013,"name":"G\u1ea3 Nh\u1ea7m Th\u1ebf T\u1eed Phi","slug":"ga-nham-the-tu-phi","year":"2025","loai_phim":"Phim b\u1ed9","tmdb_id":"283164","quoc_gia":"Trung Qu\u1ed1c","modified_time":"2025-05-28 17:41:06"},{"id":521847,"name":"V\u1ebd Th\u00f4i N\u00e0o! Thi\u1ebfu N\u1eef Truy\u1ec7n Tranh","slug":"ve-thoi-nao-thieu-nu-truyen-tranh","year":"2025","loai_phim":"Phim b\u1ed9","tmdb_id":"253769","quoc_gia":"Trung Qu\u1ed1c","modified_time":"2025-05-28 17:29:40"},{"id":505171,"na...
2025-05-29 15:28:39.496 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 15:28:39.498 +07:00 [INF] Successfully cached 20 movies for page 2
2025-05-29 15:28:39.550 +07:00 [INF] Synced page 2: 9 new, 11 skipped
2025-05-29 15:28:39.553 +07:00 [INF] Calling API endpoint: phim-moi/v2?page=3&limit=20
2025-05-29 15:28:39.931 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '375.887'
2025-05-29 15:28:39.936 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":472092,"name":"M\u1ed9t Ch\u00e9n Say T\u00ecnh","slug":"mot-chen-say-tinh","year":"2025","loai_phim":"Phim b\u1ed9","tmdb_id":"261981","quoc_gia":"H\u00e0n Qu\u1ed1c","modified_time":"2025-05-28 15:13:13"},{"id":37048,"name":"Tinh Th\u1ea7n Bi\u1ebfn (Ph\u1ea7n 6)","slug":"tinh-than-bien-phan-6","year":"2025","loai_phim":"Phim b\u1ed9","tmdb_id":"83708","quoc_gia":"Trung Qu\u1ed1c","modified_time":"2025-05-28 15:11:43"},{"id":307145,"name":"S\u01b0 Huynh C\u1ee7a Ta Qu\u00e1 M\u1...
2025-05-29 15:28:39.937 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 15:28:39.939 +07:00 [INF] Successfully cached 20 movies for page 3
2025-05-29 15:28:39.985 +07:00 [INF] Synced page 3: 10 new, 10 skipped
2025-05-29 15:29:50.194 +07:00 [INF] User test1 logged in successfully.
2025-05-29 15:30:35.094 +07:00 [WRN] No watch history found for user 4902dd81-682b-4d18-8e84-d238b959eac4.
2025-05-29 15:33:50.867 +07:00 [INF] User admin@movieapi.com logged in successfully.
2025-05-29 15:34:01.494 +07:00 [INF] Calling API endpoint: phim-moi/v1?page=1&limit=1
2025-05-29 15:34:03.668 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '2170.9004'
2025-05-29 15:34:03.673 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":"16475e51b4ac5c7c9d726d9efb3642f2","name":"Ch\u00e0ng Trai Xinh \u0110\u1eb9p","slug":"chang-trai-xinh-dep","year":"2021","loai_phim":"Phim b\u1ed9","quoc_gia":"Nh\u1eadt B\u1ea3n","modified":"2025-05-29 07:18:49"}],"pagination":{"current_page":1,"total_pages":29720,"total_items":29720,"limit":1}}
2025-05-29 15:34:03.675 +07:00 [INF] Parsed 1 movies from API response
2025-05-29 15:34:03.676 +07:00 [INF] Successfully cached 1 movies for page 1
2025-05-29 15:34:18.360 +07:00 [INF] Cache hit for latest movies: page 1, version v1
2025-05-29 15:34:18.418 +07:00 [INF] Cache hit for latest movies: page 2, version v1
2025-05-29 15:34:18.460 +07:00 [INF] Cache hit for latest movies: page 3, version v1
2025-05-29 15:34:18.502 +07:00 [INF] Calling API endpoint: phim-moi/v1?page=4&limit=20
2025-05-29 15:34:18.915 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '410.3521'
2025-05-29 15:34:20.036 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":"08d32c7b011f031f15cf135dc6360f20","name":"Th\u00f4n Thi\u00ean K\u00fd","slug":"thon-thien-ky","year":"2025","loai_phim":"Phim b\u1ed9","quoc_gia":"Trung Qu\u1ed1c","modified":"2025-05-28 04:04:19"},{"id":"1baba510b5b8db4473eb73e7b9784b20","name":"Thi\u1ebfu Ni\u00ean Ca H\u00e0nh (Ph\u1ea7n 4)","slug":"thieu-nien-ca-hanh-phan-4","year":"2025","loai_phim":"Phim b\u1ed9","quoc_gia":"Trung Qu\u1ed1c","modified":"2025-05-28 04:04:14"},{"id":"eacbec704544fb3e45efadf8eedbf9c8","name":...
2025-05-29 15:34:20.039 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 15:34:20.040 +07:00 [INF] Successfully cached 20 movies for page 4
2025-05-29 15:34:20.117 +07:00 [ERR] Failed executing DbCommand (21ms) [Parameters=[@p0='?' (Size = 100), @p1='?' (Size = 2000), @p2='?' (Size = 100), @p3='?' (Size = 50), @p4='?' (Size = 50), @p5='?' (DbType = DateTime2), @p6='?' (Size = 1000), @p7='?' (DbType = Double), @p8='?' (Size = 4000), @p9='?' (Size = 50), @p10='?' (Size = 1000), @p11='?' (Size = 500), @p12='?' (Size = 50), @p13='?' (Size = 1000), @p14='?' (DbType = Int64), @p15='?' (Size = 4)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [CachedMovies] ([Slug], [Description], [Director], [Duration], [Language], [LastUpdated], [PosterUrl], [Rating], [RawData], [Resolution], [ThumbUrl], [Title], [TmdbId], [TrailerUrl], [Views], [Year])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
2025-05-29 15:34:20.148 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'WebAppApiPhim.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'ThumbUrl', table 'Phim.dbo.CachedMovies'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:5ce0bf00-6c18-41a0-b4f8-dbc7c6e1edf7
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'ThumbUrl', table 'Phim.dbo.CachedMovies'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:5ce0bf00-6c18-41a0-b4f8-dbc7c6e1edf7
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-29 15:34:20.309 +07:00 [ERR] Error in force sync
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'ThumbUrl', table 'Phim.dbo.CachedMovies'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:5ce0bf00-6c18-41a0-b4f8-dbc7c6e1edf7
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at WebAppApiPhim.Controllers.AdminController.ForceSync(Int32 pages) in C:\D\Leaning\API\APICode\WebAppApiPhim\Controllers\AdminController.cs:line 92
2025-05-29 15:34:27.946 +07:00 [INF] Cache hit for latest movies: page 1, version v1
2025-05-29 15:34:28.001 +07:00 [INF] Cache hit for latest movies: page 2, version v1
2025-05-29 16:13:52.109 +07:00 [INF] Database seeded successfully.
2025-05-29 16:13:52.420 +07:00 [INF] SyncMoviesService is starting.
2025-05-29 16:13:52.425 +07:00 [INF] CacheCleanupService is starting.
2025-05-29 16:13:53.870 +07:00 [WRN] Failed to determine the https port for redirect.
2025-05-29 16:14:52.431 +07:00 [INF] Starting safe movie synchronization...
2025-05-29 16:14:52.514 +07:00 [INF] Processing page 1...
2025-05-29 16:14:52.523 +07:00 [INF] Calling API endpoint: phim-moi/v1?page=1&limit=20
2025-05-29 16:14:53.836 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '1228.31'
2025-05-29 16:14:53.854 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":"16475e51b4ac5c7c9d726d9efb3642f2","name":"Ch\u00e0ng Trai Xinh \u0110\u1eb9p","slug":"chang-trai-xinh-dep","year":"2021","loai_phim":"Phim b\u1ed9","quoc_gia":"Nh\u1eadt B\u1ea3n","modified":"2025-05-29 07:18:49"},{"id":"251ac3d1e0619a1166fa15753157ea11","name":"Chuy\u1ec7n T\u00ecnh Nh\u00e0 V\u0103n (Ph\u1ea7n 2)","slug":"chuyen-tinh-nha-van-phan-2","year":"2019","loai_phim":"Phim b\u1ed9","quoc_gia":"Nh\u1eadt B\u1ea3n","modified":"2025-05-29 07:18:42"},{"id":"c1f0986fd7eefc02...
2025-05-29 16:14:53.863 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 16:14:53.865 +07:00 [INF] Successfully cached 20 movies for page 1
2025-05-29 16:14:53.952 +07:00 [INF] Page 1: Found 20 movies, 0 already exist, 20 new movies to add
2025-05-29 16:14:54.442 +07:00 [INF] Completed page 1: 20 synced, 0 skipped, 0 errors
2025-05-29 16:14:56.454 +07:00 [INF] Processing page 2...
2025-05-29 16:14:56.457 +07:00 [INF] Calling API endpoint: phim-moi/v1?page=2&limit=20
2025-05-29 16:14:56.806 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '347.2296'
2025-05-29 16:14:58.688 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":"372f8774202fcaef20fb3917607999a8","name":"Doraemon: Nobita Th\u00e1m Hi\u1ec3m V\u00f9ng \u0110\u1ea5t M\u1edbi","slug":"doraemon-nobita-tham-hiem-vung-dat-moi","year":"1982","loai_phim":"Phim l\u1ebb","quoc_gia":"Nh\u1eadt B\u1ea3n","modified":"2025-05-28 20:15:35"},{"id":"80e0f2352f868abb3e8fe7238c6103ac","name":"Doraemon: Ch\u00fa Kh\u1ee7ng Long c\u1ee7a Nobita","slug":"doraemon-chu-khung-long-cua-nobita","year":"1980","loai_phim":"Phim l\u1ebb","quoc_gia":"Nh\u1eadt B\u1ea3n...
2025-05-29 16:14:58.691 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 16:14:58.693 +07:00 [INF] Successfully cached 20 movies for page 2
2025-05-29 16:14:58.709 +07:00 [INF] Page 2: Found 20 movies, 1 already exist, 19 new movies to add
2025-05-29 16:14:58.914 +07:00 [INF] Completed page 2: 19 synced, 1 skipped, 0 errors
2025-05-29 16:15:00.922 +07:00 [INF] Processing page 3...
2025-05-29 16:15:00.925 +07:00 [INF] Calling API endpoint: phim-moi/v1?page=3&limit=20
2025-05-29 16:15:01.969 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '1042.9914'
2025-05-29 16:15:01.975 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":"9b0005630544ac4e9a1a1f619f539b51","name":"Doraemon: Nobita v\u00e0 M\u00ea Cung Thi\u1ebfc","slug":"doraemon-nobita-va-me-cung-thiec","year":"1993","loai_phim":"Phim l\u1ebb","quoc_gia":"Nh\u1eadt B\u1ea3n","modified":"2025-05-28 13:47:19"},{"id":"a38c443284e98427195669e68a0016cb","name":"Doraemon: Nobita v\u00e0 V\u01b0\u01a1ng Qu\u1ed1c Robot","slug":"doraemon-nobita-va-vuong-quoc-robot","year":"2002","loai_phim":"Phim l\u1ebb","quoc_gia":"Nh\u1eadt B\u1ea3n","modified":"2025-0...
2025-05-29 16:15:01.977 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 16:15:01.979 +07:00 [INF] Successfully cached 20 movies for page 3
2025-05-29 16:15:01.991 +07:00 [INF] Page 3: Found 20 movies, 0 already exist, 20 new movies to add
2025-05-29 16:15:02.114 +07:00 [INF] Completed page 3: 20 synced, 0 skipped, 0 errors
2025-05-29 16:15:04.126 +07:00 [INF] Movie synchronization completed. Total: 59 synced, 1 skipped, 0 errors
2025-05-29 19:23:58.905 +07:00 [INF] Database seeded successfully.
2025-05-29 19:23:59.210 +07:00 [INF] SyncMoviesService is starting.
2025-05-29 19:23:59.217 +07:00 [INF] CacheCleanupService is starting.
2025-05-29 19:24:00.743 +07:00 [WRN] Failed to determine the https port for redirect.
2025-05-29 19:24:59.223 +07:00 [INF] Starting safe movie synchronization...
2025-05-29 19:24:59.232 +07:00 [INF] Processing page 1...
2025-05-29 19:24:59.239 +07:00 [INF] Calling API endpoint: phim-moi/v1?page=1&limit=20
2025-05-29 19:24:59.682 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '352.1674'
2025-05-29 19:24:59.701 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":"e1fc9c082df6cfff8cbcfff2b5a722ef","name":"Th\u1ecb Tr\u1ea5n T\u00ecnh Y\u00eau","slug":"thi-tran-tinh-yeu","year":"2005","loai_phim":"Phim l\u1ebb","quoc_gia":"\u00c2u M\u1ef9","modified":"2025-05-29 11:06:56"},{"id":"15709800bdacf685676ca21dad559a45","name":"N\u1eef Ho\u00e0ng Elizabeth \u0110\u1ec7 Nh\u1ea5t: Th\u1eddi \u0110\u1ea1i Ho\u00e0ng Kim","slug":"nu-hoang-elizabeth-de-nhat-thoi-dai-hoang-kim","year":"2007","loai_phim":"Phim l\u1ebb","quoc_gia":"\u00c2u M\u1ef9","modi...
2025-05-29 19:24:59.708 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 19:24:59.711 +07:00 [INF] Successfully cached 20 movies for page 1
2025-05-29 19:24:59.951 +07:00 [INF] Page 1: Found 20 movies, 10 already exist, 10 new movies to add
2025-05-29 19:25:00.313 +07:00 [INF] Completed page 1: 10 synced, 10 skipped, 0 errors
2025-05-29 19:25:02.317 +07:00 [INF] Processing page 2...
2025-05-29 19:25:02.320 +07:00 [INF] Calling API endpoint: phim-moi/v1?page=2&limit=20
2025-05-29 19:25:02.411 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '88.2517'
2025-05-29 19:25:02.418 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":"2272f36ac8ee821bb87bfff301370308","name":"Ch\u1ecb D\u00e2u","slug":"chi-dau","year":"2024","loai_phim":"Phim l\u1ebb","quoc_gia":"Vi\u1ec7t Nam","modified":"2025-05-29 05:32:07"},{"id":"039b28c0e2a52524890797e9e0f29899","name":"Thanh Kh\u00e2m Ch\u00ed","slug":"thanh-kham-chi","year":"2025","loai_phim":"Phim b\u1ed9, Phim \u0111ang chi\u1ebfu","quoc_gia":"Trung Qu\u1ed1c","modified":"2025-05-29 04:28:59"},{"id":"5e13d1e382d895a5a58b40173eb7abfd","name":"Tri\u00eau D\u01b0\u01a1n...
2025-05-29 19:25:02.421 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 19:25:02.423 +07:00 [INF] Successfully cached 20 movies for page 2
2025-05-29 19:25:02.430 +07:00 [INF] Page 2: Found 20 movies, 19 already exist, 0 new movies to add
2025-05-29 19:25:02.434 +07:00 [INF] Completed page 2: 0 synced, 19 skipped, 0 errors
2025-05-29 19:25:04.439 +07:00 [INF] Processing page 3...
2025-05-29 19:25:04.441 +07:00 [INF] Calling API endpoint: phim-moi/v1?page=3&limit=20
2025-05-29 19:25:04.533 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '89.1907'
2025-05-29 19:25:04.541 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":"8ac95544093983249829baf38f28cb25","name":"Khom L\u01b0ng (Phong Ho\u1ea3 H\u1ed3ng Ti\u00eau)","slug":"khom-lung","year":"2025","loai_phim":"Phim b\u1ed9, Phim \u0111ang chi\u1ebfu","quoc_gia":"Trung Qu\u1ed1c","modified":"2025-05-28 19:08:08"},{"id":"be068d693cfefdf2afe808d90e2a9031","name":"T\u00e0ng H\u1ea3i Truy\u1ec7n","slug":"tang-hai-truyen","year":"2025","loai_phim":"Phim b\u1ed9, Phim \u0111ang chi\u1ebfu","quoc_gia":"Trung Qu\u1ed1c","modified":"2025-05-28 19:07:44"},{"...
2025-05-29 19:25:04.543 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 19:25:04.545 +07:00 [INF] Successfully cached 20 movies for page 3
2025-05-29 19:25:04.552 +07:00 [INF] Page 3: Found 20 movies, 20 already exist, 0 new movies to add
2025-05-29 19:25:04.556 +07:00 [INF] Completed page 3: 0 synced, 20 skipped, 0 errors
2025-05-29 19:25:06.564 +07:00 [INF] Movie synchronization completed. Total: 10 synced, 49 skipped, 0 errors
2025-05-29 20:19:04.073 +07:00 [INF] Database seeded successfully.
2025-05-29 20:19:04.258 +07:00 [INF] SyncMoviesService is starting.
2025-05-29 20:19:04.263 +07:00 [INF] CacheCleanupService is starting.
2025-05-29 20:19:05.796 +07:00 [WRN] Failed to determine the https port for redirect.
2025-05-29 20:28:41.017 +07:00 [INF] Database seeded successfully.
2025-05-29 20:28:41.258 +07:00 [INF] SyncMoviesService is starting.
2025-05-29 20:28:41.266 +07:00 [INF] CacheCleanupService is starting.
2025-05-29 20:28:42.410 +07:00 [WRN] Failed to determine the https port for redirect.
2025-05-29 20:29:19.227 +07:00 [INF] Calling API endpoint: phim-moi/v2?page=1&limit=10
2025-05-29 20:29:19.894 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '566.4675'
2025-05-29 20:29:19.920 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":469959,"name":"Khom L\u01b0ng","slug":"khom-lung","year":"2025","loai_phim":"Phim b\u1ed9","tmdb_id":"220269","quoc_gia":"Trung Qu\u1ed1c","modified_time":"2025-05-29 20:09:14"},{"id":561832,"name":"Ch\u1ecb D\u00e2u","slug":"chi-dau-2025","year":"2024","loai_phim":"Phim l\u1ebb","tmdb_id":"1393868","quoc_gia":"Vi\u1ec7t Nam","modified_time":"2025-05-29 17:59:40"},{"id":499188,"name":"T\u00e0ng H\u1ea3i Truy\u1ec7n","slug":"tang-hai-truyen","year":"2025","loai_phim":"Phim b\u1ed9"...
2025-05-29 20:29:19.926 +07:00 [INF] Parsed 10 movies from API response
2025-05-29 20:29:19.929 +07:00 [INF] Successfully cached 10 movies for page 1
2025-05-29 20:29:35.030 +07:00 [INF] Cache hit for latest movies: page 1, version v2
2025-05-29 20:29:36.712 +07:00 [INF] Cache hit for latest movies: page 1, version v2
2025-05-29 20:29:41.264 +07:00 [INF] Starting safe movie synchronization...
2025-05-29 20:29:41.267 +07:00 [INF] Processing page 1...
2025-05-29 20:29:41.270 +07:00 [INF] Calling API endpoint: phim-moi/v1?page=1&limit=20
2025-05-29 20:29:41.397 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '124.9562'
2025-05-29 20:29:41.403 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":"e1fc9c082df6cfff8cbcfff2b5a722ef","name":"Th\u1ecb Tr\u1ea5n T\u00ecnh Y\u00eau","slug":"thi-tran-tinh-yeu","year":"2005","loai_phim":"Phim l\u1ebb","quoc_gia":"\u00c2u M\u1ef9","modified":"2025-05-29 11:06:56"},{"id":"15709800bdacf685676ca21dad559a45","name":"N\u1eef Ho\u00e0ng Elizabeth \u0110\u1ec7 Nh\u1ea5t: Th\u1eddi \u0110\u1ea1i Ho\u00e0ng Kim","slug":"nu-hoang-elizabeth-de-nhat-thoi-dai-hoang-kim","year":"2007","loai_phim":"Phim l\u1ebb","quoc_gia":"\u00c2u M\u1ef9","modi...
2025-05-29 20:29:41.406 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 20:29:41.408 +07:00 [INF] Successfully cached 20 movies for page 1
2025-05-29 20:29:41.614 +07:00 [INF] Page 1: Found 20 movies, 20 already exist, 0 new movies to add
2025-05-29 20:29:41.618 +07:00 [INF] Completed page 1: 0 synced, 20 skipped, 0 errors
2025-05-29 20:29:43.623 +07:00 [INF] Processing page 2...
2025-05-29 20:29:43.625 +07:00 [INF] Calling API endpoint: phim-moi/v1?page=2&limit=20
2025-05-29 20:29:43.712 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '84.6961'
2025-05-29 20:29:43.719 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":"2272f36ac8ee821bb87bfff301370308","name":"Ch\u1ecb D\u00e2u","slug":"chi-dau","year":"2024","loai_phim":"Phim l\u1ebb","quoc_gia":"Vi\u1ec7t Nam","modified":"2025-05-29 05:32:07"},{"id":"039b28c0e2a52524890797e9e0f29899","name":"Thanh Kh\u00e2m Ch\u00ed","slug":"thanh-kham-chi","year":"2025","loai_phim":"Phim b\u1ed9, Phim \u0111ang chi\u1ebfu","quoc_gia":"Trung Qu\u1ed1c","modified":"2025-05-29 04:28:59"},{"id":"5e13d1e382d895a5a58b40173eb7abfd","name":"Tri\u00eau D\u01b0\u01a1n...
2025-05-29 20:29:43.721 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 20:29:43.724 +07:00 [INF] Successfully cached 20 movies for page 2
2025-05-29 20:29:43.749 +07:00 [INF] Page 2: Found 20 movies, 19 already exist, 0 new movies to add
2025-05-29 20:29:43.752 +07:00 [INF] Completed page 2: 0 synced, 19 skipped, 0 errors
2025-05-29 20:29:45.759 +07:00 [INF] Processing page 3...
2025-05-29 20:29:45.761 +07:00 [INF] Calling API endpoint: phim-moi/v1?page=3&limit=20
2025-05-29 20:29:45.860 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '96.8964'
2025-05-29 20:29:45.866 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":"8ac95544093983249829baf38f28cb25","name":"Khom L\u01b0ng (Phong Ho\u1ea3 H\u1ed3ng Ti\u00eau)","slug":"khom-lung","year":"2025","loai_phim":"Phim b\u1ed9, Phim \u0111ang chi\u1ebfu","quoc_gia":"Trung Qu\u1ed1c","modified":"2025-05-28 19:08:08"},{"id":"be068d693cfefdf2afe808d90e2a9031","name":"T\u00e0ng H\u1ea3i Truy\u1ec7n","slug":"tang-hai-truyen","year":"2025","loai_phim":"Phim b\u1ed9, Phim \u0111ang chi\u1ebfu","quoc_gia":"Trung Qu\u1ed1c","modified":"2025-05-28 19:07:44"},{"...
2025-05-29 20:29:45.869 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 20:29:45.871 +07:00 [INF] Successfully cached 20 movies for page 3
2025-05-29 20:29:45.892 +07:00 [INF] Page 3: Found 20 movies, 20 already exist, 0 new movies to add
2025-05-29 20:29:45.895 +07:00 [INF] Completed page 3: 0 synced, 20 skipped, 0 errors
2025-05-29 20:29:47.900 +07:00 [INF] Movie synchronization completed. Total: 0 synced, 59 skipped, 0 errors
2025-05-29 20:30:21.489 +07:00 [INF] Calling API endpoint: phim-moi/v1?page=1&limit=10
2025-05-29 20:30:21.623 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '131.5719'
2025-05-29 20:30:21.629 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":"e1fc9c082df6cfff8cbcfff2b5a722ef","name":"Th\u1ecb Tr\u1ea5n T\u00ecnh Y\u00eau","slug":"thi-tran-tinh-yeu","year":"2005","loai_phim":"Phim l\u1ebb","quoc_gia":"\u00c2u M\u1ef9","modified":"2025-05-29 11:06:56"},{"id":"15709800bdacf685676ca21dad559a45","name":"N\u1eef Ho\u00e0ng Elizabeth \u0110\u1ec7 Nh\u1ea5t: Th\u1eddi \u0110\u1ea1i Ho\u00e0ng Kim","slug":"nu-hoang-elizabeth-de-nhat-thoi-dai-hoang-kim","year":"2007","loai_phim":"Phim l\u1ebb","quoc_gia":"\u00c2u M\u1ef9","modi...
2025-05-29 20:30:21.632 +07:00 [INF] Parsed 10 movies from API response
2025-05-29 20:30:21.634 +07:00 [INF] Successfully cached 10 movies for page 1
2025-05-29 20:30:27.608 +07:00 [INF] Cache hit for latest movies: page 1, version v1
2025-05-29 20:30:44.672 +07:00 [INF] Cache hit for latest movies: page 1, version v1
2025-05-29 20:43:33.643 +07:00 [INF] Database seeded successfully.
2025-05-29 20:43:33.820 +07:00 [INF] SyncMoviesService is starting.
2025-05-29 20:43:33.826 +07:00 [INF] CacheCleanupService is starting.
2025-05-29 20:43:35.199 +07:00 [WRN] Failed to determine the https port for redirect.
2025-05-29 20:47:11.554 +07:00 [INF] Database seeded successfully.
2025-05-29 20:47:11.731 +07:00 [INF] SyncMoviesService is starting.
2025-05-29 20:47:11.737 +07:00 [INF] CacheCleanupService is starting.
2025-05-29 20:47:12.660 +07:00 [WRN] Failed to determine the https port for redirect.
2025-05-29 20:48:11.737 +07:00 [INF] Starting safe movie synchronization...
2025-05-29 20:48:11.808 +07:00 [INF] Processing page 1...
2025-05-29 20:48:11.818 +07:00 [INF] Calling API endpoint: phim-moi/v1?page=1&limit=20
2025-05-29 20:48:12.356 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '411.7503'
2025-05-29 20:48:12.380 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":"8ac95544093983249829baf38f28cb25","name":"Khom L\u01b0ng (Phong Ho\u1ea3 H\u1ed3ng Ti\u00eau)","slug":"khom-lung","year":"2025","loai_phim":"Phim b\u1ed9, Phim \u0111ang chi\u1ebfu","quoc_gia":"Trung Qu\u1ed1c","modified":"2025-05-29 13:38:16"},{"id":"8423dd87983400be28badfcfaed92b99","name":"Ngh\u1ecbch Thi\u00ean Th\u00e0nh Ti\u00ean","slug":"nghich-thien-thanh-tien","year":"2025","loai_phim":"Phim b\u1ed9, Phim \u0111ang chi\u1ebfu","quoc_gia":"Trung Qu\u1ed1c","modified":"202...
2025-05-29 20:48:12.388 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 20:48:12.391 +07:00 [INF] Successfully cached 20 movies for page 1
2025-05-29 20:48:12.550 +07:00 [INF] Page 1: Found 20 movies, 18 already exist, 2 new movies to add
2025-05-29 20:48:12.695 +07:00 [INF] Completed page 1: 2 synced, 18 skipped, 0 errors
2025-05-29 20:48:14.698 +07:00 [INF] Processing page 2...
2025-05-29 20:48:14.701 +07:00 [INF] Calling API endpoint: phim-moi/v1?page=2&limit=20
2025-05-29 20:48:14.806 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '102.8075'
2025-05-29 20:48:14.814 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":"1dfbda77c4310b8e6f421bd0bd33056c","name":"Kh\u01a1i D\u1eady \u0110am M\u00ea (Live Action)","slug":"khoi-day-dam-me-live-action","year":"2021","loai_phim":"Phim b\u1ed9","quoc_gia":"Nh\u1eadt B\u1ea3n","modified":"2025-05-29 07:18:14"},{"id":"4eef0e56a2db6b4950e05778b5351717","name":"Xin Em H\u00e3y Y\u00eau Anh","slug":"xin-em-hay-yeu-anh","year":"2019","loai_phim":"Phim b\u1ed9","quoc_gia":"Trung Qu\u1ed1c","modified":"2025-05-29 07:18:13"},{"id":"f2fe423b71e1f13b47c8da3aebd12...
2025-05-29 20:48:14.817 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 20:48:14.820 +07:00 [INF] Successfully cached 20 movies for page 2
2025-05-29 20:48:14.835 +07:00 [INF] Page 2: Found 20 movies, 20 already exist, 0 new movies to add
2025-05-29 20:48:14.839 +07:00 [INF] Completed page 2: 0 synced, 20 skipped, 0 errors
2025-05-29 20:48:16.843 +07:00 [INF] Processing page 3...
2025-05-29 20:48:16.845 +07:00 [INF] Calling API endpoint: phim-moi/v1?page=3&limit=20
2025-05-29 20:48:16.944 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '96.5776'
2025-05-29 20:48:16.950 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":"cf37368a5897a76478650a7eea56cfc1","name":"Doraemon: Nobita v\u00e0 Chuy\u1ebfn Phi\u00eau L\u01b0u V\u00e0o X\u1ee9 Qu\u1ef7 (Remake)","slug":"doraemon-nobita-va-chuyen-phieu-luu-vao-xu-quy","year":"2007","loai_phim":"Phim l\u1ebb","quoc_gia":"Nh\u1eadt B\u1ea3n","modified":"2025-05-28 20:05:50"},{"id":"3caea4d9bcdd5cde2b1a1f338a06a086","name":"Doraemon: Nobita v\u00e0 Cu\u1ed9c Chi\u1ebfn V\u0169 Tr\u1ee5","slug":"doraemon-nobita-va-cuoc-chien-vu-tru","year":"1985","loai_phim":"...
2025-05-29 20:48:16.953 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 20:48:16.954 +07:00 [INF] Successfully cached 20 movies for page 3
2025-05-29 20:48:16.966 +07:00 [INF] Page 3: Found 20 movies, 20 already exist, 0 new movies to add
2025-05-29 20:48:16.969 +07:00 [INF] Completed page 3: 0 synced, 20 skipped, 0 errors
2025-05-29 20:48:18.976 +07:00 [INF] Movie synchronization completed. Total: 2 synced, 58 skipped, 0 errors
2025-05-29 21:24:14.721 +07:00 [INF] Database seeded successfully.
2025-05-29 21:24:15.055 +07:00 [INF] SyncMoviesService is starting.
2025-05-29 21:24:15.061 +07:00 [INF] CacheCleanupService is starting.
2025-05-29 21:24:16.855 +07:00 [WRN] Failed to determine the https port for redirect.
2025-05-29 21:25:15.063 +07:00 [INF] Starting safe movie synchronization...
2025-05-29 21:25:15.151 +07:00 [INF] Processing page 1...
2025-05-29 21:25:15.162 +07:00 [INF] Calling API endpoint: phim-moi/v1?page=1&limit=20
2025-05-29 21:25:15.715 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '459.6799'
2025-05-29 21:25:15.736 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":"8ac95544093983249829baf38f28cb25","name":"Khom L\u01b0ng (Phong Ho\u1ea3 H\u1ed3ng Ti\u00eau)","slug":"khom-lung","year":"2025","loai_phim":"Phim b\u1ed9, Phim \u0111ang chi\u1ebfu","quoc_gia":"Trung Qu\u1ed1c","modified":"2025-05-29 14:03:04"},{"id":"8423dd87983400be28badfcfaed92b99","name":"Ngh\u1ecbch Thi\u00ean Th\u00e0nh Ti\u00ean","slug":"nghich-thien-thanh-tien","year":"2025","loai_phim":"Phim b\u1ed9, Phim \u0111ang chi\u1ebfu","quoc_gia":"Trung Qu\u1ed1c","modified":"202...
2025-05-29 21:25:15.742 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 21:25:15.745 +07:00 [INF] Successfully cached 20 movies for page 1
2025-05-29 21:25:15.958 +07:00 [INF] Page 1: Found 20 movies, 20 already exist, 0 new movies to add
2025-05-29 21:25:15.961 +07:00 [INF] Completed page 1: 0 synced, 20 skipped, 0 errors
2025-05-29 21:25:17.965 +07:00 [INF] Processing page 2...
2025-05-29 21:25:17.968 +07:00 [INF] Calling API endpoint: phim-moi/v1?page=2&limit=20
2025-05-29 21:25:18.060 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '90.7961'
2025-05-29 21:25:18.065 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":"1dfbda77c4310b8e6f421bd0bd33056c","name":"Kh\u01a1i D\u1eady \u0110am M\u00ea (Live Action)","slug":"khoi-day-dam-me-live-action","year":"2021","loai_phim":"Phim b\u1ed9","quoc_gia":"Nh\u1eadt B\u1ea3n","modified":"2025-05-29 07:18:14"},{"id":"4eef0e56a2db6b4950e05778b5351717","name":"Xin Em H\u00e3y Y\u00eau Anh","slug":"xin-em-hay-yeu-anh","year":"2019","loai_phim":"Phim b\u1ed9","quoc_gia":"Trung Qu\u1ed1c","modified":"2025-05-29 07:18:13"},{"id":"f2fe423b71e1f13b47c8da3aebd12...
2025-05-29 21:25:18.067 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 21:25:18.069 +07:00 [INF] Successfully cached 20 movies for page 2
2025-05-29 21:25:18.080 +07:00 [INF] Page 2: Found 20 movies, 20 already exist, 0 new movies to add
2025-05-29 21:25:18.084 +07:00 [INF] Completed page 2: 0 synced, 20 skipped, 0 errors
2025-05-29 21:25:20.087 +07:00 [INF] Processing page 3...
2025-05-29 21:25:20.089 +07:00 [INF] Calling API endpoint: phim-moi/v1?page=3&limit=20
2025-05-29 21:25:20.173 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '81.4946'
2025-05-29 21:25:20.179 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":"cf37368a5897a76478650a7eea56cfc1","name":"Doraemon: Nobita v\u00e0 Chuy\u1ebfn Phi\u00eau L\u01b0u V\u00e0o X\u1ee9 Qu\u1ef7 (Remake)","slug":"doraemon-nobita-va-chuyen-phieu-luu-vao-xu-quy","year":"2007","loai_phim":"Phim l\u1ebb","quoc_gia":"Nh\u1eadt B\u1ea3n","modified":"2025-05-28 20:05:50"},{"id":"3caea4d9bcdd5cde2b1a1f338a06a086","name":"Doraemon: Nobita v\u00e0 Cu\u1ed9c Chi\u1ebfn V\u0169 Tr\u1ee5","slug":"doraemon-nobita-va-cuoc-chien-vu-tru","year":"1985","loai_phim":"...
2025-05-29 21:25:20.181 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 21:25:20.184 +07:00 [INF] Successfully cached 20 movies for page 3
2025-05-29 21:25:20.198 +07:00 [INF] Page 3: Found 20 movies, 20 already exist, 0 new movies to add
2025-05-29 21:25:20.202 +07:00 [INF] Completed page 3: 0 synced, 20 skipped, 0 errors
2025-05-29 21:25:22.206 +07:00 [INF] Movie synchronization completed. Total: 0 synced, 60 skipped, 0 errors
2025-05-29 21:36:38.286 +07:00 [INF] Database seeded successfully.
2025-05-29 21:36:38.439 +07:00 [INF] SyncMoviesService is starting.
2025-05-29 21:36:38.446 +07:00 [INF] CacheCleanupService is starting.
2025-05-29 21:36:39.286 +07:00 [WRN] Failed to determine the https port for redirect.
2025-05-29 21:37:38.447 +07:00 [INF] Starting safe movie synchronization...
2025-05-29 21:37:38.537 +07:00 [INF] Processing page 1...
2025-05-29 21:37:38.547 +07:00 [INF] Calling API endpoint: phim-moi/v1?page=1&limit=20
2025-05-29 21:37:39.076 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '439.5913'
2025-05-29 21:37:39.097 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":"8ac95544093983249829baf38f28cb25","name":"Khom L\u01b0ng (Phong Ho\u1ea3 H\u1ed3ng Ti\u00eau)","slug":"khom-lung","year":"2025","loai_phim":"Phim b\u1ed9, Phim \u0111ang chi\u1ebfu","quoc_gia":"Trung Qu\u1ed1c","modified":"2025-05-29 14:03:04"},{"id":"8423dd87983400be28badfcfaed92b99","name":"Ngh\u1ecbch Thi\u00ean Th\u00e0nh Ti\u00ean","slug":"nghich-thien-thanh-tien","year":"2025","loai_phim":"Phim b\u1ed9, Phim \u0111ang chi\u1ebfu","quoc_gia":"Trung Qu\u1ed1c","modified":"202...
2025-05-29 21:37:39.105 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 21:37:39.108 +07:00 [INF] Successfully cached 20 movies for page 1
2025-05-29 21:37:39.318 +07:00 [INF] Page 1: Found 20 movies, 20 already exist, 0 new movies to add
2025-05-29 21:37:39.322 +07:00 [INF] Completed page 1: 0 synced, 20 skipped, 0 errors
2025-05-29 21:37:41.326 +07:00 [INF] Processing page 2...
2025-05-29 21:37:41.329 +07:00 [INF] Calling API endpoint: phim-moi/v1?page=2&limit=20
2025-05-29 21:37:41.416 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '85.2779'
2025-05-29 21:37:41.422 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":"1dfbda77c4310b8e6f421bd0bd33056c","name":"Kh\u01a1i D\u1eady \u0110am M\u00ea (Live Action)","slug":"khoi-day-dam-me-live-action","year":"2021","loai_phim":"Phim b\u1ed9","quoc_gia":"Nh\u1eadt B\u1ea3n","modified":"2025-05-29 07:18:14"},{"id":"4eef0e56a2db6b4950e05778b5351717","name":"Xin Em H\u00e3y Y\u00eau Anh","slug":"xin-em-hay-yeu-anh","year":"2019","loai_phim":"Phim b\u1ed9","quoc_gia":"Trung Qu\u1ed1c","modified":"2025-05-29 07:18:13"},{"id":"f2fe423b71e1f13b47c8da3aebd12...
2025-05-29 21:37:41.425 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 21:37:41.426 +07:00 [INF] Successfully cached 20 movies for page 2
2025-05-29 21:37:41.435 +07:00 [INF] Page 2: Found 20 movies, 20 already exist, 0 new movies to add
2025-05-29 21:37:41.438 +07:00 [INF] Completed page 2: 0 synced, 20 skipped, 0 errors
2025-05-29 21:37:43.442 +07:00 [INF] Processing page 3...
2025-05-29 21:37:43.445 +07:00 [INF] Calling API endpoint: phim-moi/v1?page=3&limit=20
2025-05-29 21:37:43.541 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '94.0326'
2025-05-29 21:37:43.546 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":"cf37368a5897a76478650a7eea56cfc1","name":"Doraemon: Nobita v\u00e0 Chuy\u1ebfn Phi\u00eau L\u01b0u V\u00e0o X\u1ee9 Qu\u1ef7 (Remake)","slug":"doraemon-nobita-va-chuyen-phieu-luu-vao-xu-quy","year":"2007","loai_phim":"Phim l\u1ebb","quoc_gia":"Nh\u1eadt B\u1ea3n","modified":"2025-05-28 20:05:50"},{"id":"3caea4d9bcdd5cde2b1a1f338a06a086","name":"Doraemon: Nobita v\u00e0 Cu\u1ed9c Chi\u1ebfn V\u0169 Tr\u1ee5","slug":"doraemon-nobita-va-cuoc-chien-vu-tru","year":"1985","loai_phim":"...
2025-05-29 21:37:43.549 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 21:37:43.551 +07:00 [INF] Successfully cached 20 movies for page 3
2025-05-29 21:37:43.558 +07:00 [INF] Page 3: Found 20 movies, 20 already exist, 0 new movies to add
2025-05-29 21:37:43.562 +07:00 [INF] Completed page 3: 0 synced, 20 skipped, 0 errors
2025-05-29 21:37:45.569 +07:00 [INF] Movie synchronization completed. Total: 0 synced, 60 skipped, 0 errors
2025-05-29 21:47:51.027 +07:00 [INF] User Duy registered successfully.
2025-05-29 21:52:44.422 +07:00 [INF] Database seeded successfully.
2025-05-29 21:52:44.581 +07:00 [INF] SyncMoviesService is starting.
2025-05-29 21:52:44.587 +07:00 [INF] CacheCleanupService is starting.
2025-05-29 21:52:45.624 +07:00 [WRN] Failed to determine the https port for redirect.
2025-05-29 21:53:44.589 +07:00 [INF] Starting safe movie synchronization...
2025-05-29 21:53:44.594 +07:00 [INF] Processing page 1...
2025-05-29 21:53:44.612 +07:00 [INF] Calling API endpoint: phim-moi/v1?page=1&limit=20
2025-05-29 21:53:45.028 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '333.4361'
2025-05-29 21:53:45.054 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":"8ac95544093983249829baf38f28cb25","name":"Khom L\u01b0ng (Phong Ho\u1ea3 H\u1ed3ng Ti\u00eau)","slug":"khom-lung","year":"2025","loai_phim":"Phim b\u1ed9, Phim \u0111ang chi\u1ebfu","quoc_gia":"Trung Qu\u1ed1c","modified":"2025-05-29 14:03:04"},{"id":"8423dd87983400be28badfcfaed92b99","name":"Ngh\u1ecbch Thi\u00ean Th\u00e0nh Ti\u00ean","slug":"nghich-thien-thanh-tien","year":"2025","loai_phim":"Phim b\u1ed9, Phim \u0111ang chi\u1ebfu","quoc_gia":"Trung Qu\u1ed1c","modified":"202...
2025-05-29 21:53:45.060 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 21:53:45.063 +07:00 [INF] Successfully cached 20 movies for page 1
2025-05-29 21:53:45.181 +07:00 [INF] Page 1: Found 20 movies, 20 already exist, 0 new movies to add
2025-05-29 21:53:45.185 +07:00 [INF] Completed page 1: 0 synced, 20 skipped, 0 errors
2025-05-29 21:53:47.190 +07:00 [INF] Processing page 2...
2025-05-29 21:53:47.192 +07:00 [INF] Calling API endpoint: phim-moi/v1?page=2&limit=20
2025-05-29 21:53:47.281 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '86.1947'
2025-05-29 21:53:47.287 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":"1dfbda77c4310b8e6f421bd0bd33056c","name":"Kh\u01a1i D\u1eady \u0110am M\u00ea (Live Action)","slug":"khoi-day-dam-me-live-action","year":"2021","loai_phim":"Phim b\u1ed9","quoc_gia":"Nh\u1eadt B\u1ea3n","modified":"2025-05-29 07:18:14"},{"id":"4eef0e56a2db6b4950e05778b5351717","name":"Xin Em H\u00e3y Y\u00eau Anh","slug":"xin-em-hay-yeu-anh","year":"2019","loai_phim":"Phim b\u1ed9","quoc_gia":"Trung Qu\u1ed1c","modified":"2025-05-29 07:18:13"},{"id":"f2fe423b71e1f13b47c8da3aebd12...
2025-05-29 21:53:47.290 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 21:53:47.292 +07:00 [INF] Successfully cached 20 movies for page 2
2025-05-29 21:53:47.305 +07:00 [INF] Page 2: Found 20 movies, 20 already exist, 0 new movies to add
2025-05-29 21:53:47.309 +07:00 [INF] Completed page 2: 0 synced, 20 skipped, 0 errors
2025-05-29 21:53:49.313 +07:00 [INF] Processing page 3...
2025-05-29 21:53:49.315 +07:00 [INF] Calling API endpoint: phim-moi/v1?page=3&limit=20
2025-05-29 21:53:49.401 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '83.8456'
2025-05-29 21:53:49.409 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":"cf37368a5897a76478650a7eea56cfc1","name":"Doraemon: Nobita v\u00e0 Chuy\u1ebfn Phi\u00eau L\u01b0u V\u00e0o X\u1ee9 Qu\u1ef7 (Remake)","slug":"doraemon-nobita-va-chuyen-phieu-luu-vao-xu-quy","year":"2007","loai_phim":"Phim l\u1ebb","quoc_gia":"Nh\u1eadt B\u1ea3n","modified":"2025-05-28 20:05:50"},{"id":"3caea4d9bcdd5cde2b1a1f338a06a086","name":"Doraemon: Nobita v\u00e0 Cu\u1ed9c Chi\u1ebfn V\u0169 Tr\u1ee5","slug":"doraemon-nobita-va-cuoc-chien-vu-tru","year":"1985","loai_phim":"...
2025-05-29 21:53:49.411 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 21:53:49.413 +07:00 [INF] Successfully cached 20 movies for page 3
2025-05-29 21:53:49.441 +07:00 [INF] Page 3: Found 20 movies, 20 already exist, 0 new movies to add
2025-05-29 21:53:49.445 +07:00 [INF] Completed page 3: 0 synced, 20 skipped, 0 errors
2025-05-29 21:53:51.453 +07:00 [INF] Movie synchronization completed. Total: 0 synced, 60 skipped, 0 errors
2025-05-29 21:55:24.391 +07:00 [WRN] Registration failed: Passwords must be at least 6 characters., Passwords must have at least one lowercase ('a'-'z').
2025-05-29 21:55:45.101 +07:00 [INF] User duy111 registered successfully.
2025-05-29 22:00:53.224 +07:00 [INF] Database seeded successfully.
2025-05-29 22:00:53.404 +07:00 [INF] SyncMoviesService is starting.
2025-05-29 22:00:53.410 +07:00 [INF] CacheCleanupService is starting.
2025-05-29 22:00:54.352 +07:00 [WRN] Failed to determine the https port for redirect.
2025-05-29 22:01:42.404 +07:00 [WRN] Registration failed: Username 'test1' is already taken.
2025-05-29 22:01:53.414 +07:00 [INF] Starting safe movie synchronization...
2025-05-29 22:01:53.501 +07:00 [INF] Processing page 1...
2025-05-29 22:01:53.512 +07:00 [INF] Calling API endpoint: phim-moi/v1?page=1&limit=20
2025-05-29 22:01:53.991 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '379.3107'
2025-05-29 22:01:54.014 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":"8ac95544093983249829baf38f28cb25","name":"Khom L\u01b0ng (Phong Ho\u1ea3 H\u1ed3ng Ti\u00eau)","slug":"khom-lung","year":"2025","loai_phim":"Phim b\u1ed9, Phim \u0111ang chi\u1ebfu","quoc_gia":"Trung Qu\u1ed1c","modified":"2025-05-29 14:03:04"},{"id":"8423dd87983400be28badfcfaed92b99","name":"Ngh\u1ecbch Thi\u00ean Th\u00e0nh Ti\u00ean","slug":"nghich-thien-thanh-tien","year":"2025","loai_phim":"Phim b\u1ed9, Phim \u0111ang chi\u1ebfu","quoc_gia":"Trung Qu\u1ed1c","modified":"202...
2025-05-29 22:01:54.022 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 22:01:54.025 +07:00 [INF] Successfully cached 20 movies for page 1
2025-05-29 22:01:54.200 +07:00 [INF] Page 1: Found 20 movies, 20 already exist, 0 new movies to add
2025-05-29 22:01:54.205 +07:00 [INF] Completed page 1: 0 synced, 20 skipped, 0 errors
2025-05-29 22:01:54.315 +07:00 [INF] User test100 registered successfully.
2025-05-29 22:01:56.211 +07:00 [INF] Processing page 2...
2025-05-29 22:01:56.213 +07:00 [INF] Calling API endpoint: phim-moi/v1?page=2&limit=20
2025-05-29 22:01:56.297 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '82.09'
2025-05-29 22:01:56.303 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":"1dfbda77c4310b8e6f421bd0bd33056c","name":"Kh\u01a1i D\u1eady \u0110am M\u00ea (Live Action)","slug":"khoi-day-dam-me-live-action","year":"2021","loai_phim":"Phim b\u1ed9","quoc_gia":"Nh\u1eadt B\u1ea3n","modified":"2025-05-29 07:18:14"},{"id":"4eef0e56a2db6b4950e05778b5351717","name":"Xin Em H\u00e3y Y\u00eau Anh","slug":"xin-em-hay-yeu-anh","year":"2019","loai_phim":"Phim b\u1ed9","quoc_gia":"Trung Qu\u1ed1c","modified":"2025-05-29 07:18:13"},{"id":"f2fe423b71e1f13b47c8da3aebd12...
2025-05-29 22:01:56.305 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 22:01:56.307 +07:00 [INF] Successfully cached 20 movies for page 2
2025-05-29 22:01:56.320 +07:00 [INF] Page 2: Found 20 movies, 20 already exist, 0 new movies to add
2025-05-29 22:01:56.324 +07:00 [INF] Completed page 2: 0 synced, 20 skipped, 0 errors
2025-05-29 22:01:58.329 +07:00 [INF] Processing page 3...
2025-05-29 22:01:58.331 +07:00 [INF] Calling API endpoint: phim-moi/v1?page=3&limit=20
2025-05-29 22:01:58.420 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '85.89'
2025-05-29 22:01:58.427 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":"cf37368a5897a76478650a7eea56cfc1","name":"Doraemon: Nobita v\u00e0 Chuy\u1ebfn Phi\u00eau L\u01b0u V\u00e0o X\u1ee9 Qu\u1ef7 (Remake)","slug":"doraemon-nobita-va-chuyen-phieu-luu-vao-xu-quy","year":"2007","loai_phim":"Phim l\u1ebb","quoc_gia":"Nh\u1eadt B\u1ea3n","modified":"2025-05-28 20:05:50"},{"id":"3caea4d9bcdd5cde2b1a1f338a06a086","name":"Doraemon: Nobita v\u00e0 Cu\u1ed9c Chi\u1ebfn V\u0169 Tr\u1ee5","slug":"doraemon-nobita-va-cuoc-chien-vu-tru","year":"1985","loai_phim":"...
2025-05-29 22:01:58.429 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 22:01:58.431 +07:00 [INF] Successfully cached 20 movies for page 3
2025-05-29 22:01:58.444 +07:00 [INF] Page 3: Found 20 movies, 20 already exist, 0 new movies to add
2025-05-29 22:01:58.448 +07:00 [INF] Completed page 3: 0 synced, 20 skipped, 0 errors
2025-05-29 22:02:00.454 +07:00 [INF] Movie synchronization completed. Total: 0 synced, 60 skipped, 0 errors
2025-05-29 22:02:27.151 +07:00 [INF] User test100 logged in successfully.
2025-05-29 22:17:20.506 +07:00 [INF] Database seeded successfully.
2025-05-29 22:17:20.658 +07:00 [INF] SyncMoviesService is starting.
2025-05-29 22:17:20.664 +07:00 [INF] CacheCleanupService is starting.
2025-05-29 22:17:21.890 +07:00 [WRN] Failed to determine the https port for redirect.
2025-05-29 22:18:20.667 +07:00 [INF] Starting safe movie synchronization...
2025-05-29 22:18:20.671 +07:00 [INF] Processing page 1...
2025-05-29 22:18:20.683 +07:00 [INF] Calling API endpoint: phim-moi/v1?page=1&limit=20
2025-05-29 22:18:22.519 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '1752.1057'
2025-05-29 22:18:22.541 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":"8ac95544093983249829baf38f28cb25","name":"Khom L\u01b0ng (Phong Ho\u1ea3 H\u1ed3ng Ti\u00eau)","slug":"khom-lung","year":"2025","loai_phim":"Phim b\u1ed9, Phim \u0111ang chi\u1ebfu","quoc_gia":"Trung Qu\u1ed1c","modified":"2025-05-29 14:03:04"},{"id":"8423dd87983400be28badfcfaed92b99","name":"Ngh\u1ecbch Thi\u00ean Th\u00e0nh Ti\u00ean","slug":"nghich-thien-thanh-tien","year":"2025","loai_phim":"Phim b\u1ed9, Phim \u0111ang chi\u1ebfu","quoc_gia":"Trung Qu\u1ed1c","modified":"202...
2025-05-29 22:18:22.547 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 22:18:22.550 +07:00 [INF] Successfully cached 20 movies for page 1
2025-05-29 22:18:22.681 +07:00 [INF] Page 1: Found 20 movies, 20 already exist, 0 new movies to add
2025-05-29 22:18:22.685 +07:00 [INF] Completed page 1: 0 synced, 20 skipped, 0 errors
2025-05-29 22:18:24.691 +07:00 [INF] Processing page 2...
2025-05-29 22:18:24.693 +07:00 [INF] Calling API endpoint: phim-moi/v1?page=2&limit=20
2025-05-29 22:18:24.783 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '87.9025'
2025-05-29 22:18:24.789 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":"1dfbda77c4310b8e6f421bd0bd33056c","name":"Kh\u01a1i D\u1eady \u0110am M\u00ea (Live Action)","slug":"khoi-day-dam-me-live-action","year":"2021","loai_phim":"Phim b\u1ed9","quoc_gia":"Nh\u1eadt B\u1ea3n","modified":"2025-05-29 07:18:14"},{"id":"4eef0e56a2db6b4950e05778b5351717","name":"Xin Em H\u00e3y Y\u00eau Anh","slug":"xin-em-hay-yeu-anh","year":"2019","loai_phim":"Phim b\u1ed9","quoc_gia":"Trung Qu\u1ed1c","modified":"2025-05-29 07:18:13"},{"id":"f2fe423b71e1f13b47c8da3aebd12...
2025-05-29 22:18:24.791 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 22:18:24.793 +07:00 [INF] Successfully cached 20 movies for page 2
2025-05-29 22:18:24.806 +07:00 [INF] Page 2: Found 20 movies, 20 already exist, 0 new movies to add
2025-05-29 22:18:24.810 +07:00 [INF] Completed page 2: 0 synced, 20 skipped, 0 errors
2025-05-29 22:18:26.813 +07:00 [INF] Processing page 3...
2025-05-29 22:18:26.815 +07:00 [INF] Calling API endpoint: phim-moi/v1?page=3&limit=20
2025-05-29 22:18:26.900 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '81.8024'
2025-05-29 22:18:26.906 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":"cf37368a5897a76478650a7eea56cfc1","name":"Doraemon: Nobita v\u00e0 Chuy\u1ebfn Phi\u00eau L\u01b0u V\u00e0o X\u1ee9 Qu\u1ef7 (Remake)","slug":"doraemon-nobita-va-chuyen-phieu-luu-vao-xu-quy","year":"2007","loai_phim":"Phim l\u1ebb","quoc_gia":"Nh\u1eadt B\u1ea3n","modified":"2025-05-28 20:05:50"},{"id":"3caea4d9bcdd5cde2b1a1f338a06a086","name":"Doraemon: Nobita v\u00e0 Cu\u1ed9c Chi\u1ebfn V\u0169 Tr\u1ee5","slug":"doraemon-nobita-va-cuoc-chien-vu-tru","year":"1985","loai_phim":"...
2025-05-29 22:18:26.909 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 22:18:26.911 +07:00 [INF] Successfully cached 20 movies for page 3
2025-05-29 22:18:26.923 +07:00 [INF] Page 3: Found 20 movies, 20 already exist, 0 new movies to add
2025-05-29 22:18:26.927 +07:00 [INF] Completed page 3: 0 synced, 20 skipped, 0 errors
2025-05-29 22:18:28.932 +07:00 [INF] Movie synchronization completed. Total: 0 synced, 60 skipped, 0 errors
2025-05-29 22:18:29.693 +07:00 [INF] User admin@movieapi.com logged in successfully.
2025-05-29 22:18:42.579 +07:00 [INF] Cache hit for latest movies: page 1, version v1
2025-05-29 22:18:42.726 +07:00 [ERR] Failed executing DbCommand (43ms) [Parameters=[@p0='?' (Size = 100), @p1='?' (Size = 2000), @p2='?' (Size = 100), @p3='?' (Size = 50), @p4='?' (Size = 50), @p5='?' (DbType = DateTime2), @p6='?' (Size = 1000), @p7='?' (DbType = Double), @p8='?' (Size = 4000), @p9='?' (Size = 50), @p10='?' (Size = 1000), @p11='?' (Size = 500), @p12='?' (Size = 50), @p13='?' (Size = 1000), @p14='?' (DbType = Int64), @p15='?' (Size = 4), @p16='?' (Size = 100), @p17='?' (Size = 2000), @p18='?' (Size = 100), @p19='?' (Size = 50), @p20='?' (Size = 50), @p21='?' (DbType = DateTime2), @p22='?' (Size = 1000), @p23='?' (DbType = Double), @p24='?' (Size = 4000), @p25='?' (Size = 50), @p26='?' (Size = 1000), @p27='?' (Size = 500), @p28='?' (Size = 50), @p29='?' (Size = 1000), @p30='?' (DbType = Int64), @p31='?' (Size = 4), @p32='?' (Size = 100), @p33='?' (Size = 2000), @p34='?' (Size = 100), @p35='?' (Size = 50), @p36='?' (Size = 50), @p37='?' (DbType = DateTime2), @p38='?' (Size = 1000), @p39='?' (DbType = Double), @p40='?' (Size = 4000), @p41='?' (Size = 50), @p42='?' (Size = 1000), @p43='?' (Size = 500), @p44='?' (Size = 50), @p45='?' (Size = 1000), @p46='?' (DbType = Int64), @p47='?' (Size = 4), @p48='?' (Size = 100), @p49='?' (Size = 2000), @p50='?' (Size = 100), @p51='?' (Size = 50), @p52='?' (Size = 50), @p53='?' (DbType = DateTime2), @p54='?' (Size = 1000), @p55='?' (DbType = Double), @p56='?' (Size = 4000), @p57='?' (Size = 50), @p58='?' (Size = 1000), @p59='?' (Size = 500), @p60='?' (Size = 50), @p61='?' (Size = 1000), @p62='?' (DbType = Int64), @p63='?' (Size = 4), @p64='?' (Size = 100), @p65='?' (Size = 2000), @p66='?' (Size = 100), @p67='?' (Size = 50), @p68='?' (Size = 50), @p69='?' (DbType = DateTime2), @p70='?' (Size = 1000), @p71='?' (DbType = Double), @p72='?' (Size = 4000), @p73='?' (Size = 50), @p74='?' (Size = 1000), @p75='?' (Size = 500), @p76='?' (Size = 50), @p77='?' (Size = 1000), @p78='?' (DbType = Int64), @p79='?' (Size = 4), @p80='?' (Size = 100), @p81='?' (Size = 2000), @p82='?' (Size = 100), @p83='?' (Size = 50), @p84='?' (Size = 50), @p85='?' (DbType = DateTime2), @p86='?' (Size = 1000), @p87='?' (DbType = Double), @p88='?' (Size = 4000), @p89='?' (Size = 50), @p90='?' (Size = 1000), @p91='?' (Size = 500), @p92='?' (Size = 50), @p93='?' (Size = 1000), @p94='?' (DbType = Int64), @p95='?' (Size = 4), @p96='?' (Size = 100), @p97='?' (Size = 2000), @p98='?' (Size = 100), @p99='?' (Size = 50), @p100='?' (Size = 50), @p101='?' (DbType = DateTime2), @p102='?' (Size = 1000), @p103='?' (DbType = Double), @p104='?' (Size = 4000), @p105='?' (Size = 50), @p106='?' (Size = 1000), @p107='?' (Size = 500), @p108='?' (Size = 50), @p109='?' (Size = 1000), @p110='?' (DbType = Int64), @p111='?' (Size = 4), @p112='?' (Size = 100), @p113='?' (Size = 2000), @p114='?' (Size = 100), @p115='?' (Size = 50), @p116='?' (Size = 50), @p117='?' (DbType = DateTime2), @p118='?' (Size = 1000), @p119='?' (DbType = Double), @p120='?' (Size = 4000), @p121='?' (Size = 50), @p122='?' (Size = 1000), @p123='?' (Size = 500), @p124='?' (Size = 50), @p125='?' (Size = 1000), @p126='?' (DbType = Int64), @p127='?' (Size = 4), @p128='?' (Size = 100), @p129='?' (Size = 2000), @p130='?' (Size = 100), @p131='?' (Size = 50), @p132='?' (Size = 50), @p133='?' (DbType = DateTime2), @p134='?' (Size = 1000), @p135='?' (DbType = Double), @p136='?' (Size = 4000), @p137='?' (Size = 50), @p138='?' (Size = 1000), @p139='?' (Size = 500), @p140='?' (Size = 50), @p141='?' (Size = 1000), @p142='?' (DbType = Int64), @p143='?' (Size = 4), @p144='?' (Size = 100), @p145='?' (Size = 2000), @p146='?' (Size = 100), @p147='?' (Size = 50), @p148='?' (Size = 50), @p149='?' (DbType = DateTime2), @p150='?' (Size = 1000), @p151='?' (DbType = Double), @p152='?' (Size = 4000), @p153='?' (Size = 50), @p154='?' (Size = 1000), @p155='?' (Size = 500), @p156='?' (Size = 50), @p157='?' (Size = 1000), @p158='?' (DbType = Int64), @p159='?' (Size = 4), @p160='?' (Size = 100), @p161='?' (Size = 2000), @p162='?' (Size = 100), @p163='?' (Size = 50), @p164='?' (Size = 50), @p165='?' (DbType = DateTime2), @p166='?' (Size = 1000), @p167='?' (DbType = Double), @p168='?' (Size = 4000), @p169='?' (Size = 50), @p170='?' (Size = 1000), @p171='?' (Size = 500), @p172='?' (Size = 50), @p173='?' (Size = 1000), @p174='?' (DbType = Int64), @p175='?' (Size = 4), @p176='?' (Size = 100), @p177='?' (Size = 2000), @p178='?' (Size = 100), @p179='?' (Size = 50), @p180='?' (Size = 50), @p181='?' (DbType = DateTime2), @p182='?' (Size = 1000), @p183='?' (DbType = Double), @p184='?' (Size = 4000), @p185='?' (Size = 50), @p186='?' (Size = 1000), @p187='?' (Size = 500), @p188='?' (Size = 50), @p189='?' (Size = 1000), @p190='?' (DbType = Int64), @p191='?' (Size = 4), @p192='?' (Size = 100), @p193='?' (Size = 2000), @p194='?' (Size = 100), @p195='?' (Size = 50), @p196='?' (Size = 50), @p197='?' (DbType = DateTime2), @p198='?' (Size = 1000), @p199='?' (DbType = Double), @p200='?' (Size = 4000), @p201='?' (Size = 50), @p202='?' (Size = 1000), @p203='?' (Size = 500), @p204='?' (Size = 50), @p205='?' (Size = 1000), @p206='?' (DbType = Int64), @p207='?' (Size = 4), @p208='?' (Size = 100), @p209='?' (Size = 2000), @p210='?' (Size = 100), @p211='?' (Size = 50), @p212='?' (Size = 50), @p213='?' (DbType = DateTime2), @p214='?' (Size = 1000), @p215='?' (DbType = Double), @p216='?' (Size = 4000), @p217='?' (Size = 50), @p218='?' (Size = 1000), @p219='?' (Size = 500), @p220='?' (Size = 50), @p221='?' (Size = 1000), @p222='?' (DbType = Int64), @p223='?' (Size = 4), @p224='?' (Size = 100), @p225='?' (Size = 2000), @p226='?' (Size = 100), @p227='?' (Size = 50), @p228='?' (Size = 50), @p229='?' (DbType = DateTime2), @p230='?' (Size = 1000), @p231='?' (DbType = Double), @p232='?' (Size = 4000), @p233='?' (Size = 50), @p234='?' (Size = 1000), @p235='?' (Size = 500), @p236='?' (Size = 50), @p237='?' (Size = 1000), @p238='?' (DbType = Int64), @p239='?' (Size = 4), @p240='?' (Size = 100), @p241='?' (Size = 2000), @p242='?' (Size = 100), @p243='?' (Size = 50), @p244='?' (Size = 50), @p245='?' (DbType = DateTime2), @p246='?' (Size = 1000), @p247='?' (DbType = Double), @p248='?' (Size = 4000), @p249='?' (Size = 50), @p250='?' (Size = 1000), @p251='?' (Size = 500), @p252='?' (Size = 50), @p253='?' (Size = 1000), @p254='?' (DbType = Int64), @p255='?' (Size = 4), @p256='?' (Size = 100), @p257='?' (Size = 2000), @p258='?' (Size = 100), @p259='?' (Size = 50), @p260='?' (Size = 50), @p261='?' (DbType = DateTime2), @p262='?' (Size = 1000), @p263='?' (DbType = Double), @p264='?' (Size = 4000), @p265='?' (Size = 50), @p266='?' (Size = 1000), @p267='?' (Size = 500), @p268='?' (Size = 50), @p269='?' (Size = 1000), @p270='?' (DbType = Int64), @p271='?' (Size = 4), @p272='?' (Size = 100), @p273='?' (Size = 2000), @p274='?' (Size = 100), @p275='?' (Size = 50), @p276='?' (Size = 50), @p277='?' (DbType = DateTime2), @p278='?' (Size = 1000), @p279='?' (DbType = Double), @p280='?' (Size = 4000), @p281='?' (Size = 50), @p282='?' (Size = 1000), @p283='?' (Size = 500), @p284='?' (Size = 50), @p285='?' (Size = 1000), @p286='?' (DbType = Int64), @p287='?' (Size = 4), @p288='?' (Size = 100), @p289='?' (Size = 2000), @p290='?' (Size = 100), @p291='?' (Size = 50), @p292='?' (Size = 50), @p293='?' (DbType = DateTime2), @p294='?' (Size = 1000), @p295='?' (DbType = Double), @p296='?' (Size = 4000), @p297='?' (Size = 50), @p298='?' (Size = 1000), @p299='?' (Size = 500), @p300='?' (Size = 50), @p301='?' (Size = 1000), @p302='?' (DbType = Int64), @p303='?' (Size = 4), @p304='?' (Size = 100), @p305='?' (Size = 2000), @p306='?' (Size = 100), @p307='?' (Size = 50), @p308='?' (Size = 50), @p309='?' (DbType = DateTime2), @p310='?' (Size = 1000), @p311='?' (DbType = Double), @p312='?' (Size = 4000), @p313='?' (Size = 50), @p314='?' (Size = 1000), @p315='?' (Size = 500), @p316='?' (Size = 50), @p317='?' (Size = 1000), @p318='?' (DbType = Int64), @p319='?' (Size = 4)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [CachedMovies] ([Slug], [Description], [Director], [Duration], [Language], [LastUpdated], [PosterUrl], [Rating], [RawData], [Resolution], [ThumbUrl], [Title], [TmdbId], [TrailerUrl], [Views], [Year])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15),
(@p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31),
(@p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47),
(@p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63),
(@p64, @p65, @p66, @p67, @p68, @p69, @p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79),
(@p80, @p81, @p82, @p83, @p84, @p85, @p86, @p87, @p88, @p89, @p90, @p91, @p92, @p93, @p94, @p95),
(@p96, @p97, @p98, @p99, @p100, @p101, @p102, @p103, @p104, @p105, @p106, @p107, @p108, @p109, @p110, @p111),
(@p112, @p113, @p114, @p115, @p116, @p117, @p118, @p119, @p120, @p121, @p122, @p123, @p124, @p125, @p126, @p127),
(@p128, @p129, @p130, @p131, @p132, @p133, @p134, @p135, @p136, @p137, @p138, @p139, @p140, @p141, @p142, @p143),
(@p144, @p145, @p146, @p147, @p148, @p149, @p150, @p151, @p152, @p153, @p154, @p155, @p156, @p157, @p158, @p159),
(@p160, @p161, @p162, @p163, @p164, @p165, @p166, @p167, @p168, @p169, @p170, @p171, @p172, @p173, @p174, @p175),
(@p176, @p177, @p178, @p179, @p180, @p181, @p182, @p183, @p184, @p185, @p186, @p187, @p188, @p189, @p190, @p191),
(@p192, @p193, @p194, @p195, @p196, @p197, @p198, @p199, @p200, @p201, @p202, @p203, @p204, @p205, @p206, @p207),
(@p208, @p209, @p210, @p211, @p212, @p213, @p214, @p215, @p216, @p217, @p218, @p219, @p220, @p221, @p222, @p223),
(@p224, @p225, @p226, @p227, @p228, @p229, @p230, @p231, @p232, @p233, @p234, @p235, @p236, @p237, @p238, @p239),
(@p240, @p241, @p242, @p243, @p244, @p245, @p246, @p247, @p248, @p249, @p250, @p251, @p252, @p253, @p254, @p255),
(@p256, @p257, @p258, @p259, @p260, @p261, @p262, @p263, @p264, @p265, @p266, @p267, @p268, @p269, @p270, @p271),
(@p272, @p273, @p274, @p275, @p276, @p277, @p278, @p279, @p280, @p281, @p282, @p283, @p284, @p285, @p286, @p287),
(@p288, @p289, @p290, @p291, @p292, @p293, @p294, @p295, @p296, @p297, @p298, @p299, @p300, @p301, @p302, @p303),
(@p304, @p305, @p306, @p307, @p308, @p309, @p310, @p311, @p312, @p313, @p314, @p315, @p316, @p317, @p318, @p319);
2025-05-29 22:18:42.753 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'WebAppApiPhim.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'ThumbUrl', table 'Phim.dbo.CachedMovies'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:95a14494-2cd1-4130-887d-b808bb23f714
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'ThumbUrl', table 'Phim.dbo.CachedMovies'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:95a14494-2cd1-4130-887d-b808bb23f714
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-29 22:18:42.919 +07:00 [ERR] Error in force sync
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'ThumbUrl', table 'Phim.dbo.CachedMovies'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:95a14494-2cd1-4130-887d-b808bb23f714
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at WebAppApiPhim.Controllers.AdminController.ForceSync(Int32 pages) in C:\D\Leaning\API\APICode\WebAppApiPhim\Controllers\AdminController.cs:line 92
2025-05-29 22:18:51.626 +07:00 [INF] Database insufficient, fetching from API with version fallback...
2025-05-29 22:18:51.631 +07:00 [INF] Calling API endpoint: phim-moi/v3?page=1&limit=10
2025-05-29 22:18:51.780 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '146.4855'
2025-05-29 22:18:51.786 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":835026,"name":"Dept. Q","slug":"dept-q","year":"2025","loai_phim":"series","tmdb_id":"245703","quoc_gia":"\u00c2u M\u1ef9, Anh","modified_time":"2025-05-29 20:06:59"},{"id":835024,"name":"Kh\u00e1ch S\u1ea1n C\u1ee7a B\u00e0 Broto","slug":"khach-san-cua-ba-broto","year":"2025","loai_phim":"series","tmdb_id":"285631","quoc_gia":"Indonesia","modified_time":"2025-05-29 20:06:36"},{"id":835023,"name":"K\u1ef3 l\u00e2n chuy\u1ec3n ph\u00e1t","slug":"ky-lan-chuyen-phat","year":"2025","l...
2025-05-29 22:18:51.789 +07:00 [INF] Parsed 10 movies from API response
2025-05-29 22:18:51.791 +07:00 [INF] Successfully cached 10 movies for page 1
2025-05-29 22:18:51.794 +07:00 [INF] Successfully retrieved movies using API version v3
2025-05-29 22:18:55.423 +07:00 [INF] Database insufficient, fetching from API with version fallback...
2025-05-29 22:18:55.425 +07:00 [INF] Calling API endpoint: phim-moi/v3?page=1&limit=1
2025-05-29 22:18:55.508 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '80.8383'
2025-05-29 22:18:55.513 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":835026,"name":"Dept. Q","slug":"dept-q","year":"2025","loai_phim":"series","tmdb_id":"245703","quoc_gia":"\u00c2u M\u1ef9, Anh","modified_time":"2025-05-29 20:06:59"}],"pagination":{"current_page":1,"total_pages":29179,"total_items":29179,"limit":1}}
2025-05-29 22:18:55.514 +07:00 [INF] Parsed 1 movies from API response
2025-05-29 22:18:55.516 +07:00 [INF] Successfully cached 1 movies for page 1
2025-05-29 22:18:55.518 +07:00 [INF] Successfully retrieved movies using API version v3
2025-05-29 22:19:23.672 +07:00 [INF] Calling API endpoint: phim-moi/v3?page=1&limit=20
2025-05-29 22:19:23.813 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '137.5866'
2025-05-29 22:19:23.819 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":835026,"name":"Dept. Q","slug":"dept-q","year":"2025","loai_phim":"series","tmdb_id":"245703","quoc_gia":"\u00c2u M\u1ef9, Anh","modified_time":"2025-05-29 20:06:59"},{"id":835024,"name":"Kh\u00e1ch S\u1ea1n C\u1ee7a B\u00e0 Broto","slug":"khach-san-cua-ba-broto","year":"2025","loai_phim":"series","tmdb_id":"285631","quoc_gia":"Indonesia","modified_time":"2025-05-29 20:06:36"},{"id":835023,"name":"K\u1ef3 l\u00e2n chuy\u1ec3n ph\u00e1t","slug":"ky-lan-chuyen-phat","year":"2025","l...
2025-05-29 22:19:23.821 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 22:19:23.823 +07:00 [INF] Successfully cached 20 movies for page 1
2025-05-29 22:19:23.825 +07:00 [INF] Successfully retrieved movies using API version v3
2025-05-29 22:19:23.828 +07:00 [INF] Calling API endpoint: phim-moi/v3?page=2&limit=20
2025-05-29 22:19:23.918 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '88.3394'
2025-05-29 22:19:23.923 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":81169,"name":"Si\u00eau nh\u00f3c v\u0169 tr\u1ee5 (Ph\u1ea7n 3)","slug":"sieu-nhoc-vu-tru-phan-3","year":"2022","loai_phim":"hoathinh","tmdb_id":"116249","quoc_gia":"\u00c2u M\u1ef9","modified_time":"2025-05-29 15:39:36"},{"id":751480,"name":"Th\u1ea7n \u0110\u00f4 H\u1ed3 Th\u00e1m","slug":"than-do-ho-tham","year":"2025","loai_phim":"series","tmdb_id":"275219","quoc_gia":"Trung Qu\u1ed1c","modified_time":"2025-05-29 15:19:37"},{"id":833206,"name":"Th\u01b0\u01a1ng M\u1ebfn, Lizz...
2025-05-29 22:19:23.925 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 22:19:23.927 +07:00 [INF] Successfully cached 20 movies for page 2
2025-05-29 22:19:23.930 +07:00 [INF] Successfully retrieved movies using API version v3
2025-05-29 22:19:31.147 +07:00 [INF] Cache hit for latest movies: page 1, version v3
2025-05-29 22:19:31.149 +07:00 [INF] Successfully retrieved movies using API version v3
2025-05-29 22:19:47.655 +07:00 [INF] Fetching movie detail from: phim-chi-tiet/v3?slug=con-trai-ban-me
2025-05-29 22:19:48.321 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '663.9446'
2025-05-29 22:19:48.332 +07:00 [INF] Fetched and cached movie detail for: con-trai-ban-me
2025-05-29 22:19:48.334 +07:00 [INF] Successfully retrieved movie con-trai-ban-me using API version v3
2025-05-29 22:22:26.939 +07:00 [INF] Database seeded successfully.
2025-05-29 22:22:27.110 +07:00 [INF] SyncMoviesService is starting.
2025-05-29 22:22:27.116 +07:00 [INF] CacheCleanupService is starting.
2025-05-29 22:22:28.253 +07:00 [WRN] Failed to determine the https port for redirect.
2025-05-29 22:23:27.117 +07:00 [INF] Starting safe movie synchronization...
2025-05-29 22:23:27.129 +07:00 [INF] Processing page 1...
2025-05-29 22:23:27.140 +07:00 [INF] Calling API endpoint: phim-moi/v1?page=1&limit=20
2025-05-29 22:23:27.605 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '373.7556'
2025-05-29 22:23:27.624 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":"8ac95544093983249829baf38f28cb25","name":"Khom L\u01b0ng (Phong Ho\u1ea3 H\u1ed3ng Ti\u00eau)","slug":"khom-lung","year":"2025","loai_phim":"Phim b\u1ed9, Phim \u0111ang chi\u1ebfu","quoc_gia":"Trung Qu\u1ed1c","modified":"2025-05-29 14:03:04"},{"id":"8423dd87983400be28badfcfaed92b99","name":"Ngh\u1ecbch Thi\u00ean Th\u00e0nh Ti\u00ean","slug":"nghich-thien-thanh-tien","year":"2025","loai_phim":"Phim b\u1ed9, Phim \u0111ang chi\u1ebfu","quoc_gia":"Trung Qu\u1ed1c","modified":"202...
2025-05-29 22:23:27.629 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 22:23:27.631 +07:00 [INF] Successfully cached 20 movies for page 1
2025-05-29 22:23:27.730 +07:00 [INF] Page 1: Found 20 movies, 0 already exist, 20 new movies to add
2025-05-29 22:23:28.171 +07:00 [INF] Completed page 1: 20 synced, 0 skipped, 0 errors
2025-05-29 22:23:30.180 +07:00 [INF] Processing page 2...
2025-05-29 22:23:30.183 +07:00 [INF] Calling API endpoint: phim-moi/v1?page=2&limit=20
2025-05-29 22:23:30.268 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '82.8809'
2025-05-29 22:23:30.277 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":"1dfbda77c4310b8e6f421bd0bd33056c","name":"Kh\u01a1i D\u1eady \u0110am M\u00ea (Live Action)","slug":"khoi-day-dam-me-live-action","year":"2021","loai_phim":"Phim b\u1ed9","quoc_gia":"Nh\u1eadt B\u1ea3n","modified":"2025-05-29 07:18:14"},{"id":"4eef0e56a2db6b4950e05778b5351717","name":"Xin Em H\u00e3y Y\u00eau Anh","slug":"xin-em-hay-yeu-anh","year":"2019","loai_phim":"Phim b\u1ed9","quoc_gia":"Trung Qu\u1ed1c","modified":"2025-05-29 07:18:13"},{"id":"f2fe423b71e1f13b47c8da3aebd12...
2025-05-29 22:23:30.280 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 22:23:30.282 +07:00 [INF] Successfully cached 20 movies for page 2
2025-05-29 22:23:30.296 +07:00 [INF] Page 2: Found 20 movies, 0 already exist, 20 new movies to add
2025-05-29 22:23:30.490 +07:00 [INF] Completed page 2: 20 synced, 0 skipped, 0 errors
2025-05-29 22:23:32.496 +07:00 [INF] Processing page 3...
2025-05-29 22:23:32.499 +07:00 [INF] Calling API endpoint: phim-moi/v1?page=3&limit=20
2025-05-29 22:23:32.586 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '83.6522'
2025-05-29 22:23:32.591 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":"cf37368a5897a76478650a7eea56cfc1","name":"Doraemon: Nobita v\u00e0 Chuy\u1ebfn Phi\u00eau L\u01b0u V\u00e0o X\u1ee9 Qu\u1ef7 (Remake)","slug":"doraemon-nobita-va-chuyen-phieu-luu-vao-xu-quy","year":"2007","loai_phim":"Phim l\u1ebb","quoc_gia":"Nh\u1eadt B\u1ea3n","modified":"2025-05-28 20:05:50"},{"id":"3caea4d9bcdd5cde2b1a1f338a06a086","name":"Doraemon: Nobita v\u00e0 Cu\u1ed9c Chi\u1ebfn V\u0169 Tr\u1ee5","slug":"doraemon-nobita-va-cuoc-chien-vu-tru","year":"1985","loai_phim":"...
2025-05-29 22:23:32.593 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 22:23:32.595 +07:00 [INF] Successfully cached 20 movies for page 3
2025-05-29 22:23:32.606 +07:00 [INF] Page 3: Found 20 movies, 1 already exist, 19 new movies to add
2025-05-29 22:23:32.710 +07:00 [INF] Completed page 3: 19 synced, 1 skipped, 0 errors
2025-05-29 22:23:34.715 +07:00 [INF] Movie synchronization completed. Total: 59 synced, 1 skipped, 0 errors
2025-05-29 22:25:28.507 +07:00 [INF] User test100 logged in successfully.
2025-05-29 22:26:50.075 +07:00 [INF] Database seeded successfully.
2025-05-29 22:26:50.238 +07:00 [INF] SyncMoviesService is starting.
2025-05-29 22:26:50.243 +07:00 [INF] CacheCleanupService is starting.
2025-05-29 22:26:51.113 +07:00 [WRN] Failed to determine the https port for redirect.
2025-05-29 22:27:33.569 +07:00 [INF] User test100 logged in successfully.
2025-05-29 22:27:50.250 +07:00 [INF] Starting intelligent movie synchronization...
2025-05-29 22:27:50.253 +07:00 [INF] Processing page 1...
2025-05-29 22:27:50.263 +07:00 [INF] Calling API endpoint: phim-moi/v3?page=1&limit=20
2025-05-29 22:27:50.687 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '329.8861'
2025-05-29 22:27:50.710 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":835026,"name":"Dept. Q","slug":"dept-q","year":"2025","loai_phim":"series","tmdb_id":"245703","quoc_gia":"\u00c2u M\u1ef9, Anh","modified_time":"2025-05-29 20:06:59"},{"id":835024,"name":"Kh\u00e1ch S\u1ea1n C\u1ee7a B\u00e0 Broto","slug":"khach-san-cua-ba-broto","year":"2025","loai_phim":"series","tmdb_id":"285631","quoc_gia":"Indonesia","modified_time":"2025-05-29 20:06:36"},{"id":835023,"name":"K\u1ef3 l\u00e2n chuy\u1ec3n ph\u00e1t","slug":"ky-lan-chuyen-phat","year":"2025","l...
2025-05-29 22:27:50.718 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 22:27:50.720 +07:00 [INF] Successfully cached 20 movies for page 1
2025-05-29 22:27:50.723 +07:00 [INF] Successfully retrieved page 1 using API version v3
2025-05-29 22:27:50.828 +07:00 [INF] Page 1: Found 20 movies, 7 already exist, 13 new movies to add (using v3)
2025-05-29 22:27:51.531 +07:00 [WRN] No images found for dept-q from any API version, using placeholder
2025-05-29 22:27:52.216 +07:00 [WRN] No images found for khach-san-cua-ba-broto from any API version, using placeholder
2025-05-29 22:27:52.712 +07:00 [WRN] No images found for ky-lan-chuyen-phat from any API version, using placeholder
2025-05-29 22:27:53.221 +07:00 [WRN] No images found for ho-bao-tam-tung from any API version, using placeholder
2025-05-29 22:27:53.750 +07:00 [WRN] No images found for goosebumps-the-vanishing from any API version, using placeholder
2025-05-29 22:27:54.282 +07:00 [WRN] No images found for top-form-the-series from any API version, using placeholder
2025-05-29 22:27:54.816 +07:00 [WRN] No images found for deaimon from any API version, using placeholder
2025-05-29 22:27:55.326 +07:00 [WRN] No images found for the-gioi-otomegame-that-khac-nghiet-voi-nhan-vat-quan-chung from any API version, using placeholder
2025-05-29 22:27:55.849 +07:00 [WRN] No images found for spriggan from any API version, using placeholder
2025-05-29 22:27:56.380 +07:00 [WRN] No images found for cach-song-cua-thieu-nu-hanh-quyet from any API version, using placeholder
2025-05-29 22:27:56.890 +07:00 [WRN] No images found for nha-khoa-hoc-roi-vao-luoi-tinh-thu-giai-ma-nao-r1-sin0 from any API version, using placeholder
2025-05-29 22:27:57.390 +07:00 [WRN] No images found for khong-minh-thich-tiec-tung from any API version, using placeholder
2025-05-29 22:27:58.065 +07:00 [WRN] No images found for dead-end-cong-vien-ma-quai from any API version, using placeholder
2025-05-29 22:27:58.072 +07:00 [INF] Completed page 1: 13 synced, 7 skipped, 0 errors
2025-05-29 22:28:00.075 +07:00 [INF] Processing page 2...
2025-05-29 22:28:00.078 +07:00 [INF] Calling API endpoint: phim-moi/v3?page=2&limit=20
2025-05-29 22:28:00.167 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '86.7114'
2025-05-29 22:28:00.173 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":81169,"name":"Si\u00eau nh\u00f3c v\u0169 tr\u1ee5 (Ph\u1ea7n 3)","slug":"sieu-nhoc-vu-tru-phan-3","year":"2022","loai_phim":"hoathinh","tmdb_id":"116249","quoc_gia":"\u00c2u M\u1ef9","modified_time":"2025-05-29 15:39:36"},{"id":751480,"name":"Th\u1ea7n \u0110\u00f4 H\u1ed3 Th\u00e1m","slug":"than-do-ho-tham","year":"2025","loai_phim":"series","tmdb_id":"275219","quoc_gia":"Trung Qu\u1ed1c","modified_time":"2025-05-29 15:19:37"},{"id":833206,"name":"Th\u01b0\u01a1ng M\u1ebfn, Lizz...
2025-05-29 22:28:00.175 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 22:28:00.177 +07:00 [INF] Successfully cached 20 movies for page 2
2025-05-29 22:28:00.180 +07:00 [INF] Successfully retrieved page 2 using API version v3
2025-05-29 22:28:00.192 +07:00 [INF] Page 2: Found 20 movies, 0 already exist, 20 new movies to add (using v3)
2025-05-29 22:28:00.745 +07:00 [WRN] No images found for sieu-nhoc-vu-tru-phan-3 from any API version, using placeholder
2025-05-29 22:28:01.275 +07:00 [WRN] No images found for than-do-ho-tham from any API version, using placeholder
2025-05-29 22:28:01.791 +07:00 [WRN] No images found for thuong-men-lizzo from any API version, using placeholder
2025-05-29 22:28:02.364 +07:00 [WRN] No images found for the-weeknd-buoi-dien-truc-tiep-o-san-sofi from any API version, using placeholder
2025-05-29 22:28:02.873 +07:00 [WRN] No images found for the-gioi-goi-tre-em-huong-dan-ve-nhung-san-pham-giup-hanh-tinh-sach-dep from any API version, using placeholder
2025-05-29 22:28:03.374 +07:00 [WRN] No images found for thap-nhi-lien-hoa from any API version, using placeholder
2025-05-29 22:28:03.867 +07:00 [WRN] No images found for thanh-xuan-thuc-giac-gap-lai-nhung-guong-mat-than-quen from any API version, using placeholder
2025-05-29 22:28:04.406 +07:00 [WRN] No images found for taxi-taxi from any API version, using placeholder
2025-05-29 22:28:04.900 +07:00 [WRN] No images found for su-thuc-day-cham-chap from any API version, using placeholder
2025-05-29 22:28:05.418 +07:00 [WRN] No images found for su-that-kho-chap-nhan from any API version, using placeholder
2025-05-29 22:28:05.930 +07:00 [WRN] No images found for stockton-trong-long-toi from any API version, using placeholder
2025-05-29 22:28:06.473 +07:00 [WRN] No images found for song-than-hau-qua from any API version, using placeholder
2025-05-29 22:28:07.002 +07:00 [WRN] No images found for song-cung-lincoln from any API version, using placeholder
2025-05-29 22:28:07.501 +07:00 [WRN] No images found for san-francisco-20 from any API version, using placeholder
2025-05-29 22:28:08.021 +07:00 [WRN] No images found for san-da-noi-tieng from any API version, using placeholder
2025-05-29 22:28:08.583 +07:00 [WRN] No images found for robin-williams-buoc-vao-tam-tri-toi from any API version, using placeholder
2025-05-29 22:28:09.089 +07:00 [WRN] No images found for ricky-velez-day-la-tat-ca from any API version, using placeholder
2025-05-29 22:28:09.600 +07:00 [WRN] No images found for qua-trinh-san-xuat-nhung-nguoi-con-sot-lai from any API version, using placeholder
2025-05-29 22:28:10.161 +07:00 [WRN] No images found for phong-kham-american-pain from any API version, using placeholder
2025-05-29 22:28:10.710 +07:00 [WRN] No images found for pete-holmes-tot-khoe-xau-che from any API version, using placeholder
2025-05-29 22:28:10.720 +07:00 [INF] Completed page 2: 20 synced, 0 skipped, 0 errors
2025-05-29 22:28:12.724 +07:00 [INF] Processing page 3...
2025-05-29 22:28:12.727 +07:00 [INF] Calling API endpoint: phim-moi/v3?page=3&limit=20
2025-05-29 22:28:12.818 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '89.7843'
2025-05-29 22:28:12.824 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":831863,"name":"T\u1ea5t T\u1eadt V\u1ec1 V\u1ee3 T\u00f4i","slug":"tat-tat-ve-vo-toi","year":"2025","loai_phim":"single","tmdb_id":"1176529","quoc_gia":"Philippines","modified_time":"2025-05-29 11:30:45"},{"id":831815,"name":"G\u00f3c Khu\u1ea5t","slug":"goc-khuat-2025","year":"2025","loai_phim":"single","tmdb_id":"1244890","quoc_gia":"\u00c2u M\u1ef9, Canada","modified_time":"2025-05-29 11:17:39"},{"id":804122,"name":"Thanh Kh\u00e2m Ch\u00ed","slug":"thanh-kham-chi","year":"2025...
2025-05-29 22:28:12.826 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 22:28:12.828 +07:00 [INF] Successfully cached 20 movies for page 3
2025-05-29 22:28:12.830 +07:00 [INF] Successfully retrieved page 3 using API version v3
2025-05-29 22:28:12.843 +07:00 [INF] Page 3: Found 20 movies, 9 already exist, 11 new movies to add (using v3)
2025-05-29 22:28:13.373 +07:00 [WRN] No images found for tat-tat-ve-vo-toi from any API version, using placeholder
2025-05-29 22:28:13.876 +07:00 [WRN] No images found for goc-khuat-2025 from any API version, using placeholder
2025-05-29 22:28:14.415 +07:00 [WRN] No images found for thien-kim-nhat-trich from any API version, using placeholder
2025-05-29 22:28:14.932 +07:00 [WRN] No images found for ke-dam-phan from any API version, using placeholder
2025-05-29 22:28:15.430 +07:00 [WRN] No images found for vi-vua-manh-nhat-lam-gi-o-kiep-thu-hai from any API version, using placeholder
2025-05-29 22:28:15.963 +07:00 [WRN] No images found for pho-fear-nu-hoang-da-hoi from any API version, using placeholder
2025-05-29 22:28:16.469 +07:00 [WRN] No images found for tro-choi-ke-nghiep from any API version, using placeholder
2025-05-29 22:28:16.962 +07:00 [WRN] No images found for 9-manh-ghep from any API version, using placeholder
2025-05-29 22:28:17.452 +07:00 [WRN] No images found for nhan-sinh-giong-nhu-thuo-dau-gap-go from any API version, using placeholder
2025-05-29 22:28:17.925 +07:00 [WRN] No images found for pho-mai-chinh-phu-tro-cap from any API version, using placeholder
2025-05-29 22:28:18.410 +07:00 [WRN] No images found for f1-academy from any API version, using placeholder
2025-05-29 22:28:18.416 +07:00 [INF] Completed page 3: 11 synced, 9 skipped, 0 errors
2025-05-29 22:28:20.420 +07:00 [INF] Movie synchronization completed. Total: 44 synced, 16 skipped, 0 errors
2025-05-29 22:28:43.160 +07:00 [INF] Fetching movie detail from: phim-chi-tiet/v3?slug=Chú Thuật Hồi Chiến
2025-05-29 22:28:43.551 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '386.5808'
2025-05-29 22:28:43.558 +07:00 [INF] Fetched and cached movie detail for: Chú Thuật Hồi Chiến
2025-05-29 22:28:43.559 +07:00 [INF] Successfully retrieved movie Chú Thuật Hồi Chiến using API version v3
2025-05-29 22:28:44.316 +07:00 [ERR] Failed executing DbCommand (21ms) [Parameters=[@p0='?' (Size = 100), @p1='?' (Size = 2000), @p2='?' (Size = 100), @p3='?' (Size = 50), @p4='?' (Size = 50), @p5='?' (DbType = DateTime2), @p6='?' (Size = 1000), @p7='?' (DbType = Double), @p8='?' (Size = 4000), @p9='?' (Size = 50), @p10='?' (Size = 1000), @p11='?' (Size = 500), @p12='?' (Size = 50), @p13='?' (Size = 1000), @p14='?' (DbType = Int64), @p15='?' (Size = 4)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [CachedMovies] ([Slug], [Description], [Director], [Duration], [Language], [LastUpdated], [PosterUrl], [Rating], [RawData], [Resolution], [ThumbUrl], [Title], [TmdbId], [TrailerUrl], [Views], [Year])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
2025-05-29 22:28:44.341 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'WebAppApiPhim.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Title', table 'Phim.dbo.CachedMovies'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:2fb36a13-3e93-48b1-abe2-bb721731c77b
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Title', table 'Phim.dbo.CachedMovies'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:2fb36a13-3e93-48b1-abe2-bb721731c77b
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-29 22:28:44.477 +07:00 [ERR] Error caching movie from API: Chú Thuật Hồi Chiến
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Title', table 'Phim.dbo.CachedMovies'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:2fb36a13-3e93-48b1-abe2-bb721731c77b
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at WebAppApiPhim.Controllers.MoviesController.CacheMovieFromApi(MovieDetailResponse apiMovie) in C:\D\Leaning\API\APICode\WebAppApiPhim\Controllers\MoviesController.cs:line 490
2025-05-29 22:30:27.426 +07:00 [INF] Cache hit for latest movies: page 1, version v3
2025-05-29 22:30:27.428 +07:00 [INF] Successfully retrieved movies using API version v3
2025-05-29 22:30:27.438 +07:00 [INF] Cache hit for latest movies: page 2, version v3
2025-05-29 22:30:27.441 +07:00 [INF] Successfully retrieved movies using API version v3
2025-05-29 22:30:27.442 +07:00 [INF] Cache hit for latest movies: page 3, version v3
2025-05-29 22:30:27.444 +07:00 [INF] Successfully retrieved movies using API version v3
2025-05-29 22:35:23.302 +07:00 [INF] Database seeded successfully.
2025-05-29 22:35:23.453 +07:00 [INF] SyncMoviesService is starting.
2025-05-29 22:35:23.458 +07:00 [INF] CacheCleanupService is starting.
2025-05-29 22:35:25.290 +07:00 [WRN] Failed to determine the https port for redirect.
2025-05-29 22:35:58.102 +07:00 [INF] Database seeded successfully.
2025-05-29 22:35:58.447 +07:00 [ERR] Hosting failed to start
System.ArgumentNullException: Value cannot be null. (Parameter 'logger')
   at System.ThrowHelper.Throw(String paramName)
   at Microsoft.Extensions.Logging.LoggerExtensions.Log(ILogger logger, LogLevel logLevel, EventId eventId, Exception exception, String message, Object[] args)
   at Microsoft.Extensions.Logging.LoggerExtensions.LogError(ILogger logger, Exception exception, String message, Object[] args)
   at WebAppApiPhim.BackgroundServices.SyncMoviesService.ExecuteAsync(CancellationToken stoppingToken) in C:\D\Leaning\API\APICode\WebAppApiPhim\Services\SyncMoviesService.cs:line 26
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__15_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
2025-05-29 22:39:47.838 +07:00 [INF] Database seeded successfully.
2025-05-29 22:39:47.991 +07:00 [INF] SyncMoviesService is starting.
2025-05-29 22:39:47.996 +07:00 [INF] CacheCleanupService is starting.
2025-05-29 22:39:48.992 +07:00 [WRN] Failed to determine the https port for redirect.
2025-05-29 22:40:47.999 +07:00 [INF] Starting intelligent movie synchronization...
2025-05-29 22:40:48.013 +07:00 [INF] Processing page 1...
2025-05-29 22:40:48.026 +07:00 [INF] Calling API endpoint: phim-moi/v3?page=1&limit=20
2025-05-29 22:40:48.556 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '427.1323'
2025-05-29 22:40:48.583 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":835026,"name":"Dept. Q","slug":"dept-q","year":"2025","loai_phim":"series","tmdb_id":"245703","quoc_gia":"\u00c2u M\u1ef9, Anh","modified_time":"2025-05-29 20:06:59"},{"id":835024,"name":"Kh\u00e1ch S\u1ea1n C\u1ee7a B\u00e0 Broto","slug":"khach-san-cua-ba-broto","year":"2025","loai_phim":"series","tmdb_id":"285631","quoc_gia":"Indonesia","modified_time":"2025-05-29 20:06:36"},{"id":835023,"name":"K\u1ef3 l\u00e2n chuy\u1ec3n ph\u00e1t","slug":"ky-lan-chuyen-phat","year":"2025","l...
2025-05-29 22:40:48.594 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 22:40:48.596 +07:00 [INF] Successfully cached 20 movies for page 1
2025-05-29 22:40:48.599 +07:00 [INF] Successfully retrieved page 1 using API version v3
2025-05-29 22:40:48.856 +07:00 [INF] Page 1: Found 20 movies, 20 already exist, 0 new movies to add (using v3)
2025-05-29 22:40:48.861 +07:00 [INF] Completed page 1: 0 synced, 20 skipped, 0 errors
2025-05-29 22:40:50.310 +07:00 [WRN] No progress found for movie f1-academy, episode f1-academy.
2025-05-29 22:40:50.869 +07:00 [INF] Processing page 2...
2025-05-29 22:40:50.872 +07:00 [INF] Calling API endpoint: phim-moi/v3?page=2&limit=20
2025-05-29 22:40:50.956 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '81.4227'
2025-05-29 22:40:50.962 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":81169,"name":"Si\u00eau nh\u00f3c v\u0169 tr\u1ee5 (Ph\u1ea7n 3)","slug":"sieu-nhoc-vu-tru-phan-3","year":"2022","loai_phim":"hoathinh","tmdb_id":"116249","quoc_gia":"\u00c2u M\u1ef9","modified_time":"2025-05-29 15:39:36"},{"id":751480,"name":"Th\u1ea7n \u0110\u00f4 H\u1ed3 Th\u00e1m","slug":"than-do-ho-tham","year":"2025","loai_phim":"series","tmdb_id":"275219","quoc_gia":"Trung Qu\u1ed1c","modified_time":"2025-05-29 15:19:37"},{"id":833206,"name":"Th\u01b0\u01a1ng M\u1ebfn, Lizz...
2025-05-29 22:40:50.964 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 22:40:50.967 +07:00 [INF] Successfully cached 20 movies for page 2
2025-05-29 22:40:50.969 +07:00 [INF] Successfully retrieved page 2 using API version v3
2025-05-29 22:40:50.984 +07:00 [INF] Page 2: Found 20 movies, 20 already exist, 0 new movies to add (using v3)
2025-05-29 22:40:50.989 +07:00 [INF] Completed page 2: 0 synced, 20 skipped, 0 errors
2025-05-29 22:40:52.993 +07:00 [INF] Processing page 3...
2025-05-29 22:40:52.995 +07:00 [INF] Calling API endpoint: phim-moi/v3?page=3&limit=20
2025-05-29 22:40:53.082 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '84.5252'
2025-05-29 22:40:53.088 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":831863,"name":"T\u1ea5t T\u1eadt V\u1ec1 V\u1ee3 T\u00f4i","slug":"tat-tat-ve-vo-toi","year":"2025","loai_phim":"single","tmdb_id":"1176529","quoc_gia":"Philippines","modified_time":"2025-05-29 11:30:45"},{"id":831815,"name":"G\u00f3c Khu\u1ea5t","slug":"goc-khuat-2025","year":"2025","loai_phim":"single","tmdb_id":"1244890","quoc_gia":"\u00c2u M\u1ef9, Canada","modified_time":"2025-05-29 11:17:39"},{"id":804122,"name":"Thanh Kh\u00e2m Ch\u00ed","slug":"thanh-kham-chi","year":"2025...
2025-05-29 22:40:53.091 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 22:40:53.093 +07:00 [INF] Successfully cached 20 movies for page 3
2025-05-29 22:40:53.095 +07:00 [INF] Successfully retrieved page 3 using API version v3
2025-05-29 22:40:53.104 +07:00 [INF] Page 3: Found 20 movies, 20 already exist, 0 new movies to add (using v3)
2025-05-29 22:40:53.107 +07:00 [INF] Completed page 3: 0 synced, 20 skipped, 0 errors
2025-05-29 22:40:55.113 +07:00 [INF] Movie synchronization completed. Total: 0 synced, 60 skipped, 0 errors
2025-05-29 22:50:30.620 +07:00 [INF] Database seeded successfully.
2025-05-29 22:50:30.822 +07:00 [INF] SyncMoviesService is starting.
2025-05-29 22:50:30.829 +07:00 [INF] CacheCleanupService is starting.
2025-05-29 22:50:31.822 +07:00 [WRN] Failed to determine the https port for redirect.
2025-05-29 22:51:30.835 +07:00 [INF] Starting intelligent movie synchronization...
2025-05-29 22:51:30.957 +07:00 [INF] Processing page 1...
2025-05-29 22:51:30.970 +07:00 [INF] Calling API endpoint: phim-moi/v3?page=1&limit=20
2025-05-29 22:51:31.480 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '403.5722'
2025-05-29 22:51:31.508 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":835026,"name":"Dept. Q","slug":"dept-q","year":"2025","loai_phim":"series","tmdb_id":"245703","quoc_gia":"\u00c2u M\u1ef9, Anh","modified_time":"2025-05-29 20:06:59"},{"id":835024,"name":"Kh\u00e1ch S\u1ea1n C\u1ee7a B\u00e0 Broto","slug":"khach-san-cua-ba-broto","year":"2025","loai_phim":"series","tmdb_id":"285631","quoc_gia":"Indonesia","modified_time":"2025-05-29 20:06:36"},{"id":835023,"name":"K\u1ef3 l\u00e2n chuy\u1ec3n ph\u00e1t","slug":"ky-lan-chuyen-phat","year":"2025","l...
2025-05-29 22:51:31.519 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 22:51:31.522 +07:00 [INF] Successfully cached 20 movies for page 1
2025-05-29 22:51:31.525 +07:00 [INF] Successfully retrieved page 1 using API version v3
2025-05-29 22:51:31.794 +07:00 [INF] Page 1: Found 20 movies, 20 already exist, 0 new movies to add (using v3)
2025-05-29 22:51:31.799 +07:00 [INF] Completed page 1: 0 synced, 20 skipped, 0 errors
2025-05-29 22:51:33.807 +07:00 [INF] Processing page 2...
2025-05-29 22:51:33.809 +07:00 [INF] Calling API endpoint: phim-moi/v3?page=2&limit=20
2025-05-29 22:51:33.893 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '81.81'
2025-05-29 22:51:33.899 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":81169,"name":"Si\u00eau nh\u00f3c v\u0169 tr\u1ee5 (Ph\u1ea7n 3)","slug":"sieu-nhoc-vu-tru-phan-3","year":"2022","loai_phim":"hoathinh","tmdb_id":"116249","quoc_gia":"\u00c2u M\u1ef9","modified_time":"2025-05-29 15:39:36"},{"id":751480,"name":"Th\u1ea7n \u0110\u00f4 H\u1ed3 Th\u00e1m","slug":"than-do-ho-tham","year":"2025","loai_phim":"series","tmdb_id":"275219","quoc_gia":"Trung Qu\u1ed1c","modified_time":"2025-05-29 15:19:37"},{"id":833206,"name":"Th\u01b0\u01a1ng M\u1ebfn, Lizz...
2025-05-29 22:51:33.901 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 22:51:33.903 +07:00 [INF] Successfully cached 20 movies for page 2
2025-05-29 22:51:33.906 +07:00 [INF] Successfully retrieved page 2 using API version v3
2025-05-29 22:51:33.920 +07:00 [INF] Page 2: Found 20 movies, 20 already exist, 0 new movies to add (using v3)
2025-05-29 22:51:33.923 +07:00 [INF] Completed page 2: 0 synced, 20 skipped, 0 errors
2025-05-29 22:51:35.927 +07:00 [INF] Processing page 3...
2025-05-29 22:51:35.929 +07:00 [INF] Calling API endpoint: phim-moi/v3?page=3&limit=20
2025-05-29 22:51:36.013 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '82.3353'
2025-05-29 22:51:36.019 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":831863,"name":"T\u1ea5t T\u1eadt V\u1ec1 V\u1ee3 T\u00f4i","slug":"tat-tat-ve-vo-toi","year":"2025","loai_phim":"single","tmdb_id":"1176529","quoc_gia":"Philippines","modified_time":"2025-05-29 11:30:45"},{"id":831815,"name":"G\u00f3c Khu\u1ea5t","slug":"goc-khuat-2025","year":"2025","loai_phim":"single","tmdb_id":"1244890","quoc_gia":"\u00c2u M\u1ef9, Canada","modified_time":"2025-05-29 11:17:39"},{"id":804122,"name":"Thanh Kh\u00e2m Ch\u00ed","slug":"thanh-kham-chi","year":"2025...
2025-05-29 22:51:36.021 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 22:51:36.023 +07:00 [INF] Successfully cached 20 movies for page 3
2025-05-29 22:51:36.024 +07:00 [INF] Successfully retrieved page 3 using API version v3
2025-05-29 22:51:36.038 +07:00 [INF] Page 3: Found 20 movies, 20 already exist, 0 new movies to add (using v3)
2025-05-29 22:51:36.041 +07:00 [INF] Completed page 3: 0 synced, 20 skipped, 0 errors
2025-05-29 22:51:38.046 +07:00 [INF] Movie synchronization completed. Total: 0 synced, 60 skipped, 0 errors
2025-05-29 22:55:57.873 +07:00 [INF] Database seeded successfully.
2025-05-29 22:55:58.060 +07:00 [INF] SyncMoviesService is starting.
2025-05-29 22:55:58.066 +07:00 [INF] CacheCleanupService is starting.
2025-05-29 22:55:59.194 +07:00 [WRN] Failed to determine the https port for redirect.
2025-05-29 22:56:58.067 +07:00 [INF] Starting intelligent movie synchronization...
2025-05-29 22:56:58.078 +07:00 [INF] Processing page 1...
2025-05-29 22:56:58.090 +07:00 [INF] Calling API endpoint: phim-moi/v3?page=1&limit=20
2025-05-29 22:56:58.539 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '362.4806'
2025-05-29 22:56:58.557 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":835026,"name":"Dept. Q","slug":"dept-q","year":"2025","loai_phim":"series","tmdb_id":"245703","quoc_gia":"\u00c2u M\u1ef9, Anh","modified_time":"2025-05-29 20:06:59"},{"id":835024,"name":"Kh\u00e1ch S\u1ea1n C\u1ee7a B\u00e0 Broto","slug":"khach-san-cua-ba-broto","year":"2025","loai_phim":"series","tmdb_id":"285631","quoc_gia":"Indonesia","modified_time":"2025-05-29 20:06:36"},{"id":835023,"name":"K\u1ef3 l\u00e2n chuy\u1ec3n ph\u00e1t","slug":"ky-lan-chuyen-phat","year":"2025","l...
2025-05-29 22:56:58.562 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 22:56:58.564 +07:00 [INF] Successfully cached 20 movies for page 1
2025-05-29 22:56:58.567 +07:00 [INF] Successfully retrieved page 1 using API version v3
2025-05-29 22:56:58.627 +07:00 [INF] Page 1: Found 20 movies, 20 already exist, 0 new movies to add (using v3)
2025-05-29 22:56:58.631 +07:00 [INF] Completed page 1: 0 synced, 20 skipped, 0 errors
2025-05-29 22:57:00.637 +07:00 [INF] Processing page 2...
2025-05-29 22:57:00.639 +07:00 [INF] Calling API endpoint: phim-moi/v3?page=2&limit=20
2025-05-29 22:57:00.731 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '89.8935'
2025-05-29 22:57:00.737 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":81169,"name":"Si\u00eau nh\u00f3c v\u0169 tr\u1ee5 (Ph\u1ea7n 3)","slug":"sieu-nhoc-vu-tru-phan-3","year":"2022","loai_phim":"hoathinh","tmdb_id":"116249","quoc_gia":"\u00c2u M\u1ef9","modified_time":"2025-05-29 15:39:36"},{"id":751480,"name":"Th\u1ea7n \u0110\u00f4 H\u1ed3 Th\u00e1m","slug":"than-do-ho-tham","year":"2025","loai_phim":"series","tmdb_id":"275219","quoc_gia":"Trung Qu\u1ed1c","modified_time":"2025-05-29 15:19:37"},{"id":833206,"name":"Th\u01b0\u01a1ng M\u1ebfn, Lizz...
2025-05-29 22:57:00.739 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 22:57:00.741 +07:00 [INF] Successfully cached 20 movies for page 2
2025-05-29 22:57:00.743 +07:00 [INF] Successfully retrieved page 2 using API version v3
2025-05-29 22:57:00.757 +07:00 [INF] Page 2: Found 20 movies, 20 already exist, 0 new movies to add (using v3)
2025-05-29 22:57:00.760 +07:00 [INF] Completed page 2: 0 synced, 20 skipped, 0 errors
2025-05-29 22:57:02.767 +07:00 [INF] Processing page 3...
2025-05-29 22:57:02.769 +07:00 [INF] Calling API endpoint: phim-moi/v3?page=3&limit=20
2025-05-29 22:57:02.857 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '87.2853'
2025-05-29 22:57:02.862 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":831863,"name":"T\u1ea5t T\u1eadt V\u1ec1 V\u1ee3 T\u00f4i","slug":"tat-tat-ve-vo-toi","year":"2025","loai_phim":"single","tmdb_id":"1176529","quoc_gia":"Philippines","modified_time":"2025-05-29 11:30:45"},{"id":831815,"name":"G\u00f3c Khu\u1ea5t","slug":"goc-khuat-2025","year":"2025","loai_phim":"single","tmdb_id":"1244890","quoc_gia":"\u00c2u M\u1ef9, Canada","modified_time":"2025-05-29 11:17:39"},{"id":804122,"name":"Thanh Kh\u00e2m Ch\u00ed","slug":"thanh-kham-chi","year":"2025...
2025-05-29 22:57:02.864 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 22:57:02.866 +07:00 [INF] Successfully cached 20 movies for page 3
2025-05-29 22:57:02.868 +07:00 [INF] Successfully retrieved page 3 using API version v3
2025-05-29 22:57:02.874 +07:00 [INF] Page 3: Found 20 movies, 20 already exist, 0 new movies to add (using v3)
2025-05-29 22:57:02.878 +07:00 [INF] Completed page 3: 0 synced, 20 skipped, 0 errors
2025-05-29 22:57:04.881 +07:00 [INF] Movie synchronization completed. Total: 0 synced, 60 skipped, 0 errors
2025-05-29 22:58:50.154 +07:00 [INF] Database seeded successfully.
2025-05-29 22:58:50.367 +07:00 [INF] SyncMoviesService is starting.
2025-05-29 22:58:50.374 +07:00 [INF] CacheCleanupService is starting.
2025-05-29 22:58:51.932 +07:00 [WRN] Failed to determine the https port for redirect.
2025-05-29 22:59:50.376 +07:00 [INF] Starting intelligent movie synchronization...
2025-05-29 22:59:50.389 +07:00 [INF] Processing page 1...
2025-05-29 22:59:50.400 +07:00 [INF] Calling API endpoint: phim-moi/v3?page=1&limit=20
2025-05-29 22:59:55.065 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '4573.2504'
2025-05-29 22:59:55.086 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":835026,"name":"Dept. Q","slug":"dept-q","year":"2025","loai_phim":"series","tmdb_id":"245703","quoc_gia":"\u00c2u M\u1ef9, Anh","modified_time":"2025-05-29 20:06:59"},{"id":835024,"name":"Kh\u00e1ch S\u1ea1n C\u1ee7a B\u00e0 Broto","slug":"khach-san-cua-ba-broto","year":"2025","loai_phim":"series","tmdb_id":"285631","quoc_gia":"Indonesia","modified_time":"2025-05-29 20:06:36"},{"id":835023,"name":"K\u1ef3 l\u00e2n chuy\u1ec3n ph\u00e1t","slug":"ky-lan-chuyen-phat","year":"2025","l...
2025-05-29 22:59:55.091 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 22:59:55.094 +07:00 [INF] Successfully cached 20 movies for page 1
2025-05-29 22:59:55.097 +07:00 [INF] Successfully retrieved page 1 using API version v3
2025-05-29 22:59:55.173 +07:00 [INF] Page 1: Found 20 movies, 20 already exist, 0 new movies to add (using v3)
2025-05-29 22:59:55.178 +07:00 [INF] Completed page 1: 0 synced, 20 skipped, 0 errors
2025-05-29 22:59:57.184 +07:00 [INF] Processing page 2...
2025-05-29 22:59:57.187 +07:00 [INF] Calling API endpoint: phim-moi/v3?page=2&limit=20
2025-05-29 22:59:57.294 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '104.041'
2025-05-29 22:59:57.301 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":81169,"name":"Si\u00eau nh\u00f3c v\u0169 tr\u1ee5 (Ph\u1ea7n 3)","slug":"sieu-nhoc-vu-tru-phan-3","year":"2022","loai_phim":"hoathinh","tmdb_id":"116249","quoc_gia":"\u00c2u M\u1ef9","modified_time":"2025-05-29 15:39:36"},{"id":751480,"name":"Th\u1ea7n \u0110\u00f4 H\u1ed3 Th\u00e1m","slug":"than-do-ho-tham","year":"2025","loai_phim":"series","tmdb_id":"275219","quoc_gia":"Trung Qu\u1ed1c","modified_time":"2025-05-29 15:19:37"},{"id":833206,"name":"Th\u01b0\u01a1ng M\u1ebfn, Lizz...
2025-05-29 22:59:57.303 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 22:59:57.305 +07:00 [INF] Successfully cached 20 movies for page 2
2025-05-29 22:59:57.309 +07:00 [INF] Successfully retrieved page 2 using API version v3
2025-05-29 22:59:57.318 +07:00 [INF] Page 2: Found 20 movies, 20 already exist, 0 new movies to add (using v3)
2025-05-29 22:59:57.323 +07:00 [INF] Completed page 2: 0 synced, 20 skipped, 0 errors
2025-05-29 22:59:59.327 +07:00 [INF] Processing page 3...
2025-05-29 22:59:59.330 +07:00 [INF] Calling API endpoint: phim-moi/v3?page=3&limit=20
2025-05-29 22:59:59.434 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '102.1641'
2025-05-29 22:59:59.440 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":831863,"name":"T\u1ea5t T\u1eadt V\u1ec1 V\u1ee3 T\u00f4i","slug":"tat-tat-ve-vo-toi","year":"2025","loai_phim":"single","tmdb_id":"1176529","quoc_gia":"Philippines","modified_time":"2025-05-29 11:30:45"},{"id":831815,"name":"G\u00f3c Khu\u1ea5t","slug":"goc-khuat-2025","year":"2025","loai_phim":"single","tmdb_id":"1244890","quoc_gia":"\u00c2u M\u1ef9, Canada","modified_time":"2025-05-29 11:17:39"},{"id":804122,"name":"Thanh Kh\u00e2m Ch\u00ed","slug":"thanh-kham-chi","year":"2025...
2025-05-29 22:59:59.443 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 22:59:59.445 +07:00 [INF] Successfully cached 20 movies for page 3
2025-05-29 22:59:59.448 +07:00 [INF] Successfully retrieved page 3 using API version v3
2025-05-29 22:59:59.456 +07:00 [INF] Page 3: Found 20 movies, 20 already exist, 0 new movies to add (using v3)
2025-05-29 22:59:59.461 +07:00 [INF] Completed page 3: 0 synced, 20 skipped, 0 errors
2025-05-29 23:00:01.466 +07:00 [INF] Movie synchronization completed. Total: 0 synced, 60 skipped, 0 errors
2025-05-29 23:00:58.467 +07:00 [INF] Database seeded successfully.
2025-05-29 23:00:58.619 +07:00 [INF] SyncMoviesService is starting.
2025-05-29 23:00:58.626 +07:00 [INF] CacheCleanupService is starting.
2025-05-29 23:00:59.400 +07:00 [WRN] Failed to determine the https port for redirect.
2025-05-29 23:02:25.651 +07:00 [INF] Database seeded successfully.
2025-05-29 23:02:25.932 +07:00 [INF] SyncMoviesService is starting.
2025-05-29 23:02:25.942 +07:00 [INF] CacheCleanupService is starting.
2025-05-29 23:02:27.816 +07:00 [WRN] Failed to determine the https port for redirect.
2025-05-29 23:03:25.941 +07:00 [INF] Starting intelligent movie synchronization...
2025-05-29 23:03:25.951 +07:00 [INF] Processing page 1...
2025-05-29 23:03:25.963 +07:00 [INF] Calling API endpoint: phim-moi/v3?page=1&limit=20
2025-05-29 23:03:26.573 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '503.1791'
2025-05-29 23:03:26.603 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":835026,"name":"Dept. Q","slug":"dept-q","year":"2025","loai_phim":"series","tmdb_id":"245703","quoc_gia":"\u00c2u M\u1ef9, Anh","modified_time":"2025-05-29 20:06:59"},{"id":835024,"name":"Kh\u00e1ch S\u1ea1n C\u1ee7a B\u00e0 Broto","slug":"khach-san-cua-ba-broto","year":"2025","loai_phim":"series","tmdb_id":"285631","quoc_gia":"Indonesia","modified_time":"2025-05-29 20:06:36"},{"id":835023,"name":"K\u1ef3 l\u00e2n chuy\u1ec3n ph\u00e1t","slug":"ky-lan-chuyen-phat","year":"2025","l...
2025-05-29 23:03:26.608 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 23:03:26.611 +07:00 [INF] Successfully cached 20 movies for page 1
2025-05-29 23:03:26.613 +07:00 [INF] Successfully retrieved page 1 using API version v3
2025-05-29 23:03:26.692 +07:00 [INF] Page 1: Found 20 movies, 20 already exist, 0 new movies to add (using v3)
2025-05-29 23:03:26.697 +07:00 [INF] Completed page 1: 0 synced, 20 skipped, 0 errors
2025-05-29 23:03:28.702 +07:00 [INF] Processing page 2...
2025-05-29 23:03:28.704 +07:00 [INF] Calling API endpoint: phim-moi/v3?page=2&limit=20
2025-05-29 23:03:28.806 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '99.3503'
2025-05-29 23:03:28.811 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":81169,"name":"Si\u00eau nh\u00f3c v\u0169 tr\u1ee5 (Ph\u1ea7n 3)","slug":"sieu-nhoc-vu-tru-phan-3","year":"2022","loai_phim":"hoathinh","tmdb_id":"116249","quoc_gia":"\u00c2u M\u1ef9","modified_time":"2025-05-29 15:39:36"},{"id":751480,"name":"Th\u1ea7n \u0110\u00f4 H\u1ed3 Th\u00e1m","slug":"than-do-ho-tham","year":"2025","loai_phim":"series","tmdb_id":"275219","quoc_gia":"Trung Qu\u1ed1c","modified_time":"2025-05-29 15:19:37"},{"id":833206,"name":"Th\u01b0\u01a1ng M\u1ebfn, Lizz...
2025-05-29 23:03:28.813 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 23:03:28.815 +07:00 [INF] Successfully cached 20 movies for page 2
2025-05-29 23:03:28.817 +07:00 [INF] Successfully retrieved page 2 using API version v3
2025-05-29 23:03:28.824 +07:00 [INF] Page 2: Found 20 movies, 20 already exist, 0 new movies to add (using v3)
2025-05-29 23:03:28.828 +07:00 [INF] Completed page 2: 0 synced, 20 skipped, 0 errors
2025-05-29 23:03:30.831 +07:00 [INF] Processing page 3...
2025-05-29 23:03:30.833 +07:00 [INF] Calling API endpoint: phim-moi/v3?page=3&limit=20
2025-05-29 23:03:30.935 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '98.8058'
2025-05-29 23:03:30.940 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":831863,"name":"T\u1ea5t T\u1eadt V\u1ec1 V\u1ee3 T\u00f4i","slug":"tat-tat-ve-vo-toi","year":"2025","loai_phim":"single","tmdb_id":"1176529","quoc_gia":"Philippines","modified_time":"2025-05-29 11:30:45"},{"id":831815,"name":"G\u00f3c Khu\u1ea5t","slug":"goc-khuat-2025","year":"2025","loai_phim":"single","tmdb_id":"1244890","quoc_gia":"\u00c2u M\u1ef9, Canada","modified_time":"2025-05-29 11:17:39"},{"id":804122,"name":"Thanh Kh\u00e2m Ch\u00ed","slug":"thanh-kham-chi","year":"2025...
2025-05-29 23:03:30.941 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 23:03:30.943 +07:00 [INF] Successfully cached 20 movies for page 3
2025-05-29 23:03:30.945 +07:00 [INF] Successfully retrieved page 3 using API version v3
2025-05-29 23:03:30.950 +07:00 [INF] Page 3: Found 20 movies, 20 already exist, 0 new movies to add (using v3)
2025-05-29 23:03:30.953 +07:00 [INF] Completed page 3: 0 synced, 20 skipped, 0 errors
2025-05-29 23:03:32.958 +07:00 [INF] Movie synchronization completed. Total: 0 synced, 60 skipped, 0 errors
2025-05-29 23:09:37.860 +07:00 [INF] Database seeded successfully.
2025-05-29 23:09:38.058 +07:00 [INF] SyncMoviesService is starting.
2025-05-29 23:09:38.065 +07:00 [INF] CacheCleanupService is starting.
2025-05-29 23:09:39.364 +07:00 [WRN] Failed to determine the https port for redirect.
2025-05-29 23:10:06.866 +07:00 [INF] Database seeded successfully.
2025-05-29 23:10:07.008 +07:00 [INF] SyncMoviesService is starting.
2025-05-29 23:10:07.015 +07:00 [INF] CacheCleanupService is starting.
2025-05-29 23:10:08.387 +07:00 [WRN] Failed to determine the https port for redirect.
2025-05-29 23:10:33.289 +07:00 [INF] Syncing episodes for movie: con-trai-ban-me
2025-05-29 23:10:33.631 +07:00 [INF] Fetching movie detail from: phim-chi-tiet/?slug=con-trai-ban-me
2025-05-29 23:10:34.087 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '404', Handled: 'false', Attempt: '0', Execution Time: '361.8043'
2025-05-29 23:10:34.110 +07:00 [WRN] Movie detail API returned "NotFound" for slug: con-trai-ban-me
2025-05-29 23:10:34.113 +07:00 [WRN] No episodes found in external API for movie: con-trai-ban-me
2025-05-29 23:10:48.113 +07:00 [INF] Syncing episodes for 10 recent movies
2025-05-29 23:10:48.116 +07:00 [INF] Syncing episodes for movie: f1-academy
2025-05-29 23:10:48.124 +07:00 [INF] Fetching movie detail from: phim-chi-tiet/?slug=f1-academy
2025-05-29 23:10:48.209 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '404', Handled: 'false', Attempt: '0', Execution Time: '81.9933'
2025-05-29 23:10:48.215 +07:00 [WRN] Movie detail API returned "NotFound" for slug: f1-academy
2025-05-29 23:10:48.218 +07:00 [WRN] No episodes found in external API for movie: f1-academy
2025-05-29 23:10:49.222 +07:00 [INF] Syncing episodes for movie: pho-mai-chinh-phu-tro-cap
2025-05-29 23:10:49.232 +07:00 [INF] Fetching movie detail from: phim-chi-tiet/?slug=pho-mai-chinh-phu-tro-cap
2025-05-29 23:10:49.313 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '404', Handled: 'false', Attempt: '0', Execution Time: '79.3211'
2025-05-29 23:10:49.319 +07:00 [WRN] Movie detail API returned "NotFound" for slug: pho-mai-chinh-phu-tro-cap
2025-05-29 23:10:49.322 +07:00 [WRN] No episodes found in external API for movie: pho-mai-chinh-phu-tro-cap
2025-05-29 23:10:50.322 +07:00 [INF] Syncing episodes for movie: nhan-sinh-giong-nhu-thuo-dau-gap-go
2025-05-29 23:10:50.331 +07:00 [INF] Fetching movie detail from: phim-chi-tiet/?slug=nhan-sinh-giong-nhu-thuo-dau-gap-go
2025-05-29 23:10:50.413 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '404', Handled: 'false', Attempt: '0', Execution Time: '80.2747'
2025-05-29 23:10:50.420 +07:00 [WRN] Movie detail API returned "NotFound" for slug: nhan-sinh-giong-nhu-thuo-dau-gap-go
2025-05-29 23:10:50.423 +07:00 [WRN] No episodes found in external API for movie: nhan-sinh-giong-nhu-thuo-dau-gap-go
2025-05-29 23:10:51.424 +07:00 [INF] Syncing episodes for movie: 9-manh-ghep
2025-05-29 23:10:51.432 +07:00 [INF] Fetching movie detail from: phim-chi-tiet/?slug=9-manh-ghep
2025-05-29 23:10:51.515 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '404', Handled: 'false', Attempt: '0', Execution Time: '80.8135'
2025-05-29 23:10:51.521 +07:00 [WRN] Movie detail API returned "NotFound" for slug: 9-manh-ghep
2025-05-29 23:10:51.523 +07:00 [WRN] No episodes found in external API for movie: 9-manh-ghep
2025-05-29 23:10:52.526 +07:00 [INF] Syncing episodes for movie: tro-choi-ke-nghiep
2025-05-29 23:10:52.540 +07:00 [INF] Fetching movie detail from: phim-chi-tiet/?slug=tro-choi-ke-nghiep
2025-05-29 23:10:52.619 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '404', Handled: 'false', Attempt: '0', Execution Time: '76.9656'
2025-05-29 23:10:52.625 +07:00 [WRN] Movie detail API returned "NotFound" for slug: tro-choi-ke-nghiep
2025-05-29 23:10:52.627 +07:00 [WRN] No episodes found in external API for movie: tro-choi-ke-nghiep
2025-05-29 23:10:53.629 +07:00 [INF] Syncing episodes for movie: pho-fear-nu-hoang-da-hoi
2025-05-29 23:10:53.637 +07:00 [INF] Fetching movie detail from: phim-chi-tiet/?slug=pho-fear-nu-hoang-da-hoi
2025-05-29 23:10:53.731 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '404', Handled: 'false', Attempt: '0', Execution Time: '90.9014'
2025-05-29 23:10:53.737 +07:00 [WRN] Movie detail API returned "NotFound" for slug: pho-fear-nu-hoang-da-hoi
2025-05-29 23:10:53.739 +07:00 [WRN] No episodes found in external API for movie: pho-fear-nu-hoang-da-hoi
2025-05-29 23:10:54.743 +07:00 [INF] Syncing episodes for movie: vi-vua-manh-nhat-lam-gi-o-kiep-thu-hai
2025-05-29 23:10:54.751 +07:00 [INF] Fetching movie detail from: phim-chi-tiet/?slug=vi-vua-manh-nhat-lam-gi-o-kiep-thu-hai
2025-05-29 23:10:54.834 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '404', Handled: 'false', Attempt: '0', Execution Time: '80.4787'
2025-05-29 23:10:54.840 +07:00 [WRN] Movie detail API returned "NotFound" for slug: vi-vua-manh-nhat-lam-gi-o-kiep-thu-hai
2025-05-29 23:10:54.843 +07:00 [WRN] No episodes found in external API for movie: vi-vua-manh-nhat-lam-gi-o-kiep-thu-hai
2025-05-29 23:10:55.848 +07:00 [INF] Syncing episodes for movie: ke-dam-phan
2025-05-29 23:10:55.861 +07:00 [INF] Fetching movie detail from: phim-chi-tiet/?slug=ke-dam-phan
2025-05-29 23:10:55.942 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '404', Handled: 'false', Attempt: '0', Execution Time: '78.5092'
2025-05-29 23:10:55.948 +07:00 [WRN] Movie detail API returned "NotFound" for slug: ke-dam-phan
2025-05-29 23:10:55.951 +07:00 [WRN] No episodes found in external API for movie: ke-dam-phan
2025-05-29 23:10:56.953 +07:00 [INF] Syncing episodes for movie: thien-kim-nhat-trich
2025-05-29 23:10:56.965 +07:00 [INF] Fetching movie detail from: phim-chi-tiet/?slug=thien-kim-nhat-trich
2025-05-29 23:10:57.047 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '404', Handled: 'false', Attempt: '0', Execution Time: '79.4316'
2025-05-29 23:10:57.052 +07:00 [WRN] Movie detail API returned "NotFound" for slug: thien-kim-nhat-trich
2025-05-29 23:10:57.055 +07:00 [WRN] No episodes found in external API for movie: thien-kim-nhat-trich
2025-05-29 23:10:58.057 +07:00 [INF] Syncing episodes for movie: goc-khuat-2025
2025-05-29 23:10:58.068 +07:00 [INF] Fetching movie detail from: phim-chi-tiet/?slug=goc-khuat-2025
2025-05-29 23:10:58.152 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '404', Handled: 'false', Attempt: '0', Execution Time: '81.3133'
2025-05-29 23:10:58.158 +07:00 [WRN] Movie detail API returned "NotFound" for slug: goc-khuat-2025
2025-05-29 23:10:58.160 +07:00 [WRN] No episodes found in external API for movie: goc-khuat-2025
2025-05-29 23:10:59.163 +07:00 [INF] Completed syncing episodes for recent movies. Added: 0, Updated: 0, Failed: 0
2025-05-29 23:11:07.017 +07:00 [INF] Starting intelligent movie synchronization...
2025-05-29 23:11:07.022 +07:00 [INF] Processing page 1...
2025-05-29 23:11:07.027 +07:00 [INF] Calling API endpoint: phim-moi/v3?page=1&limit=20
2025-05-29 23:11:07.113 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '84.4158'
2025-05-29 23:11:07.120 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":835026,"name":"Dept. Q","slug":"dept-q","year":"2025","loai_phim":"series","tmdb_id":"245703","quoc_gia":"\u00c2u M\u1ef9, Anh","modified_time":"2025-05-29 20:06:59"},{"id":835024,"name":"Kh\u00e1ch S\u1ea1n C\u1ee7a B\u00e0 Broto","slug":"khach-san-cua-ba-broto","year":"2025","loai_phim":"series","tmdb_id":"285631","quoc_gia":"Indonesia","modified_time":"2025-05-29 20:06:36"},{"id":835023,"name":"K\u1ef3 l\u00e2n chuy\u1ec3n ph\u00e1t","slug":"ky-lan-chuyen-phat","year":"2025","l...
2025-05-29 23:11:07.125 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 23:11:07.128 +07:00 [INF] Successfully cached 20 movies for page 1
2025-05-29 23:11:07.131 +07:00 [INF] Successfully retrieved page 1 using API version v3
2025-05-29 23:11:07.200 +07:00 [INF] Page 1: Found 20 movies, 20 already exist, 0 new movies to add (using v3)
2025-05-29 23:11:07.204 +07:00 [INF] Completed page 1: 0 synced, 20 skipped, 0 errors
2025-05-29 23:11:09.209 +07:00 [INF] Processing page 2...
2025-05-29 23:11:09.211 +07:00 [INF] Calling API endpoint: phim-moi/v3?page=2&limit=20
2025-05-29 23:11:09.296 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '82.2612'
2025-05-29 23:11:09.302 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":81169,"name":"Si\u00eau nh\u00f3c v\u0169 tr\u1ee5 (Ph\u1ea7n 3)","slug":"sieu-nhoc-vu-tru-phan-3","year":"2022","loai_phim":"hoathinh","tmdb_id":"116249","quoc_gia":"\u00c2u M\u1ef9","modified_time":"2025-05-29 15:39:36"},{"id":751480,"name":"Th\u1ea7n \u0110\u00f4 H\u1ed3 Th\u00e1m","slug":"than-do-ho-tham","year":"2025","loai_phim":"series","tmdb_id":"275219","quoc_gia":"Trung Qu\u1ed1c","modified_time":"2025-05-29 15:19:37"},{"id":833206,"name":"Th\u01b0\u01a1ng M\u1ebfn, Lizz...
2025-05-29 23:11:09.305 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 23:11:09.308 +07:00 [INF] Successfully cached 20 movies for page 2
2025-05-29 23:11:09.311 +07:00 [INF] Successfully retrieved page 2 using API version v3
2025-05-29 23:11:09.323 +07:00 [INF] Page 2: Found 20 movies, 20 already exist, 0 new movies to add (using v3)
2025-05-29 23:11:09.327 +07:00 [INF] Completed page 2: 0 synced, 20 skipped, 0 errors
2025-05-29 23:11:11.333 +07:00 [INF] Processing page 3...
2025-05-29 23:11:11.335 +07:00 [INF] Calling API endpoint: phim-moi/v3?page=3&limit=20
2025-05-29 23:11:11.418 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '80.0972'
2025-05-29 23:11:11.423 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":831863,"name":"T\u1ea5t T\u1eadt V\u1ec1 V\u1ee3 T\u00f4i","slug":"tat-tat-ve-vo-toi","year":"2025","loai_phim":"single","tmdb_id":"1176529","quoc_gia":"Philippines","modified_time":"2025-05-29 11:30:45"},{"id":831815,"name":"G\u00f3c Khu\u1ea5t","slug":"goc-khuat-2025","year":"2025","loai_phim":"single","tmdb_id":"1244890","quoc_gia":"\u00c2u M\u1ef9, Canada","modified_time":"2025-05-29 11:17:39"},{"id":804122,"name":"Thanh Kh\u00e2m Ch\u00ed","slug":"thanh-kham-chi","year":"2025...
2025-05-29 23:11:11.425 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 23:11:11.427 +07:00 [INF] Successfully cached 20 movies for page 3
2025-05-29 23:11:11.430 +07:00 [INF] Successfully retrieved page 3 using API version v3
2025-05-29 23:11:11.438 +07:00 [INF] Page 3: Found 20 movies, 20 already exist, 0 new movies to add (using v3)
2025-05-29 23:11:11.442 +07:00 [INF] Completed page 3: 0 synced, 20 skipped, 0 errors
2025-05-29 23:11:13.445 +07:00 [INF] Movie synchronization completed. Total: 0 synced, 60 skipped, 0 errors
2025-05-29 23:22:10.907 +07:00 [INF] Database seeded successfully.
2025-05-29 23:22:11.085 +07:00 [INF] SyncMoviesService is starting.
2025-05-29 23:22:11.091 +07:00 [INF] CacheCleanupService is starting.
2025-05-29 23:22:12.588 +07:00 [WRN] Failed to determine the https port for redirect.
2025-05-29 23:22:38.432 +07:00 [INF] Database insufficient, fetching from API with version fallback...
2025-05-29 23:22:38.454 +07:00 [INF] Calling API endpoint: phim-moi/v3?page=1&limit=10
2025-05-29 23:22:38.970 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '413.8852'
2025-05-29 23:22:38.997 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":835026,"name":"Dept. Q","slug":"dept-q","year":"2025","loai_phim":"series","tmdb_id":"245703","quoc_gia":"\u00c2u M\u1ef9, Anh","modified_time":"2025-05-29 20:06:59"},{"id":835024,"name":"Kh\u00e1ch S\u1ea1n C\u1ee7a B\u00e0 Broto","slug":"khach-san-cua-ba-broto","year":"2025","loai_phim":"series","tmdb_id":"285631","quoc_gia":"Indonesia","modified_time":"2025-05-29 20:06:36"},{"id":835023,"name":"K\u1ef3 l\u00e2n chuy\u1ec3n ph\u00e1t","slug":"ky-lan-chuyen-phat","year":"2025","l...
2025-05-29 23:22:39.005 +07:00 [INF] Parsed 10 movies from API response
2025-05-29 23:22:39.008 +07:00 [INF] Successfully cached 10 movies for page 1
2025-05-29 23:22:39.011 +07:00 [INF] Successfully retrieved movies using API version v3
2025-05-29 23:22:54.813 +07:00 [INF] Fetching movie detail from: phim-chi-tiet/v3?slug=dept-q
2025-05-29 23:22:55.289 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '471.7588'
2025-05-29 23:22:55.302 +07:00 [INF] Fetched and cached movie detail for: dept-q
2025-05-29 23:22:55.304 +07:00 [INF] Successfully retrieved movie dept-q using API version v3
2025-05-29 23:23:11.092 +07:00 [INF] Starting intelligent movie synchronization...
2025-05-29 23:23:11.096 +07:00 [INF] Processing page 1...
2025-05-29 23:23:11.098 +07:00 [INF] Calling API endpoint: phim-moi/v3?page=1&limit=20
2025-05-29 23:23:11.225 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '124.8875'
2025-05-29 23:23:11.231 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":835026,"name":"Dept. Q","slug":"dept-q","year":"2025","loai_phim":"series","tmdb_id":"245703","quoc_gia":"\u00c2u M\u1ef9, Anh","modified_time":"2025-05-29 20:06:59"},{"id":835024,"name":"Kh\u00e1ch S\u1ea1n C\u1ee7a B\u00e0 Broto","slug":"khach-san-cua-ba-broto","year":"2025","loai_phim":"series","tmdb_id":"285631","quoc_gia":"Indonesia","modified_time":"2025-05-29 20:06:36"},{"id":835023,"name":"K\u1ef3 l\u00e2n chuy\u1ec3n ph\u00e1t","slug":"ky-lan-chuyen-phat","year":"2025","l...
2025-05-29 23:23:11.234 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 23:23:11.237 +07:00 [INF] Successfully cached 20 movies for page 1
2025-05-29 23:23:11.239 +07:00 [INF] Successfully retrieved page 1 using API version v3
2025-05-29 23:23:11.330 +07:00 [INF] Page 1: Found 20 movies, 1 already exist, 19 new movies to add (using v3)
2025-05-29 23:23:11.996 +07:00 [WRN] No images found for khach-san-cua-ba-broto from any API version, using placeholder
2025-05-29 23:23:12.483 +07:00 [WRN] No images found for ky-lan-chuyen-phat from any API version, using placeholder
2025-05-29 23:23:12.978 +07:00 [WRN] No images found for khom-lung from any API version, using placeholder
2025-05-29 23:23:13.529 +07:00 [WRN] No images found for ho-bao-tam-tung from any API version, using placeholder
2025-05-29 23:23:14.034 +07:00 [WRN] No images found for thieu-hoa-nhuoc-cam from any API version, using placeholder
2025-05-29 23:23:14.534 +07:00 [WRN] No images found for goosebumps-the-vanishing from any API version, using placeholder
2025-05-29 23:23:15.046 +07:00 [WRN] No images found for top-form-the-series from any API version, using placeholder
2025-05-29 23:23:15.608 +07:00 [WRN] No images found for tang-hai-truyen from any API version, using placeholder
2025-05-29 23:23:16.279 +07:00 [WRN] No images found for tai-nhan-gian from any API version, using placeholder
2025-05-29 23:23:16.847 +07:00 [WRN] No images found for ve-thoi-nao-thieu-nu-truyen-tranh from any API version, using placeholder
2025-05-29 23:23:17.707 +07:00 [WRN] No images found for sa-vao-tinh-yeu-cuong-nhiet-cua-chung-ta from any API version, using placeholder
2025-05-29 23:23:18.233 +07:00 [WRN] No images found for nghich-thien-thanh-tien from any API version, using placeholder
2025-05-29 23:23:18.736 +07:00 [WRN] No images found for deaimon from any API version, using placeholder
2025-05-29 23:23:19.231 +07:00 [WRN] No images found for the-gioi-otomegame-that-khac-nghiet-voi-nhan-vat-quan-chung from any API version, using placeholder
2025-05-29 23:23:19.723 +07:00 [WRN] No images found for spriggan from any API version, using placeholder
2025-05-29 23:23:20.211 +07:00 [WRN] No images found for cach-song-cua-thieu-nu-hanh-quyet from any API version, using placeholder
2025-05-29 23:23:20.708 +07:00 [WRN] No images found for nha-khoa-hoc-roi-vao-luoi-tinh-thu-giai-ma-nao-r1-sin0 from any API version, using placeholder
2025-05-29 23:23:21.201 +07:00 [WRN] No images found for khong-minh-thich-tiec-tung from any API version, using placeholder
2025-05-29 23:23:21.736 +07:00 [WRN] No images found for dead-end-cong-vien-ma-quai from any API version, using placeholder
2025-05-29 23:23:21.746 +07:00 [INF] Completed page 1: 19 synced, 1 skipped, 0 errors
2025-05-29 23:23:23.750 +07:00 [INF] Processing page 2...
2025-05-29 23:23:23.753 +07:00 [INF] Calling API endpoint: phim-moi/v3?page=2&limit=20
2025-05-29 23:23:23.841 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '85.162'
2025-05-29 23:23:23.848 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":81169,"name":"Si\u00eau nh\u00f3c v\u0169 tr\u1ee5 (Ph\u1ea7n 3)","slug":"sieu-nhoc-vu-tru-phan-3","year":"2022","loai_phim":"hoathinh","tmdb_id":"116249","quoc_gia":"\u00c2u M\u1ef9","modified_time":"2025-05-29 15:39:36"},{"id":751480,"name":"Th\u1ea7n \u0110\u00f4 H\u1ed3 Th\u00e1m","slug":"than-do-ho-tham","year":"2025","loai_phim":"series","tmdb_id":"275219","quoc_gia":"Trung Qu\u1ed1c","modified_time":"2025-05-29 15:19:37"},{"id":833206,"name":"Th\u01b0\u01a1ng M\u1ebfn, Lizz...
2025-05-29 23:23:23.850 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 23:23:23.853 +07:00 [INF] Successfully cached 20 movies for page 2
2025-05-29 23:23:23.856 +07:00 [INF] Successfully retrieved page 2 using API version v3
2025-05-29 23:23:23.864 +07:00 [INF] Page 2: Found 20 movies, 0 already exist, 20 new movies to add (using v3)
2025-05-29 23:23:24.375 +07:00 [WRN] No images found for sieu-nhoc-vu-tru-phan-3 from any API version, using placeholder
2025-05-29 23:23:24.859 +07:00 [WRN] No images found for than-do-ho-tham from any API version, using placeholder
2025-05-29 23:23:25.346 +07:00 [WRN] No images found for thuong-men-lizzo from any API version, using placeholder
2025-05-29 23:23:25.827 +07:00 [WRN] No images found for the-weeknd-buoi-dien-truc-tiep-o-san-sofi from any API version, using placeholder
2025-05-29 23:23:26.356 +07:00 [WRN] No images found for the-gioi-goi-tre-em-huong-dan-ve-nhung-san-pham-giup-hanh-tinh-sach-dep from any API version, using placeholder
2025-05-29 23:23:26.840 +07:00 [WRN] No images found for thap-nhi-lien-hoa from any API version, using placeholder
2025-05-29 23:23:27.333 +07:00 [WRN] No images found for thanh-xuan-thuc-giac-gap-lai-nhung-guong-mat-than-quen from any API version, using placeholder
2025-05-29 23:23:27.836 +07:00 [WRN] No images found for taxi-taxi from any API version, using placeholder
2025-05-29 23:23:28.316 +07:00 [WRN] No images found for su-thuc-day-cham-chap from any API version, using placeholder
2025-05-29 23:23:28.812 +07:00 [WRN] No images found for su-that-kho-chap-nhan from any API version, using placeholder
2025-05-29 23:23:29.308 +07:00 [WRN] No images found for stockton-trong-long-toi from any API version, using placeholder
2025-05-29 23:23:29.829 +07:00 [WRN] No images found for song-than-hau-qua from any API version, using placeholder
2025-05-29 23:23:30.315 +07:00 [WRN] No images found for song-cung-lincoln from any API version, using placeholder
2025-05-29 23:23:30.794 +07:00 [WRN] No images found for san-francisco-20 from any API version, using placeholder
2025-05-29 23:23:31.263 +07:00 [WRN] No images found for san-da-noi-tieng from any API version, using placeholder
2025-05-29 23:23:31.757 +07:00 [WRN] No images found for robin-williams-buoc-vao-tam-tri-toi from any API version, using placeholder
2025-05-29 23:23:32.233 +07:00 [WRN] No images found for ricky-velez-day-la-tat-ca from any API version, using placeholder
2025-05-29 23:23:32.733 +07:00 [WRN] No images found for qua-trinh-san-xuat-nhung-nguoi-con-sot-lai from any API version, using placeholder
2025-05-29 23:23:33.218 +07:00 [WRN] No images found for phong-kham-american-pain from any API version, using placeholder
2025-05-29 23:23:33.699 +07:00 [WRN] No images found for pete-holmes-tot-khoe-xau-che from any API version, using placeholder
2025-05-29 23:23:33.708 +07:00 [INF] Completed page 2: 20 synced, 0 skipped, 0 errors
2025-05-29 23:23:35.712 +07:00 [INF] Processing page 3...
2025-05-29 23:23:35.714 +07:00 [INF] Calling API endpoint: phim-moi/v3?page=3&limit=20
2025-05-29 23:23:35.806 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '89.3043'
2025-05-29 23:23:35.812 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":831863,"name":"T\u1ea5t T\u1eadt V\u1ec1 V\u1ee3 T\u00f4i","slug":"tat-tat-ve-vo-toi","year":"2025","loai_phim":"single","tmdb_id":"1176529","quoc_gia":"Philippines","modified_time":"2025-05-29 11:30:45"},{"id":831815,"name":"G\u00f3c Khu\u1ea5t","slug":"goc-khuat-2025","year":"2025","loai_phim":"single","tmdb_id":"1244890","quoc_gia":"\u00c2u M\u1ef9, Canada","modified_time":"2025-05-29 11:17:39"},{"id":804122,"name":"Thanh Kh\u00e2m Ch\u00ed","slug":"thanh-kham-chi","year":"2025...
2025-05-29 23:23:35.814 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 23:23:35.817 +07:00 [INF] Successfully cached 20 movies for page 3
2025-05-29 23:23:35.820 +07:00 [INF] Successfully retrieved page 3 using API version v3
2025-05-29 23:23:35.829 +07:00 [INF] Page 3: Found 20 movies, 0 already exist, 20 new movies to add (using v3)
2025-05-29 23:23:36.314 +07:00 [WRN] No images found for tat-tat-ve-vo-toi from any API version, using placeholder
2025-05-29 23:23:36.819 +07:00 [WRN] No images found for goc-khuat-2025 from any API version, using placeholder
2025-05-29 23:23:37.321 +07:00 [WRN] No images found for thanh-kham-chi from any API version, using placeholder
2025-05-29 23:23:37.798 +07:00 [WRN] No images found for thieu-dot-con-tim from any API version, using placeholder
2025-05-29 23:23:38.301 +07:00 [WRN] No images found for thien-kim-nhat-trich from any API version, using placeholder
2025-05-29 23:23:38.805 +07:00 [WRN] No images found for trieu-duong-chi-vu-da from any API version, using placeholder
2025-05-29 23:23:39.299 +07:00 [WRN] No images found for ga-nham-the-tu-phi from any API version, using placeholder
2025-05-29 23:23:39.787 +07:00 [WRN] No images found for ke-dam-phan from any API version, using placeholder
2025-05-29 23:23:40.290 +07:00 [WRN] No images found for khoe-truoc-yeu-sau from any API version, using placeholder
2025-05-29 23:23:40.804 +07:00 [WRN] No images found for hoa-giang-ho-chi-bat-luong-nhan-phan-7 from any API version, using placeholder
2025-05-29 23:23:41.318 +07:00 [WRN] No images found for your-forma from any API version, using placeholder
2025-05-29 23:23:41.815 +07:00 [WRN] No images found for vi-vua-manh-nhat-lam-gi-o-kiep-thu-hai from any API version, using placeholder
2025-05-29 23:23:42.348 +07:00 [WRN] No images found for mua-xuan-tuoi-tre from any API version, using placeholder
2025-05-29 23:23:42.838 +07:00 [WRN] No images found for pho-fear-nu-hoang-da-hoi from any API version, using placeholder
2025-05-29 23:23:43.332 +07:00 [WRN] No images found for tro-choi-ke-nghiep from any API version, using placeholder
2025-05-29 23:23:43.818 +07:00 [WRN] No images found for mau-em-la-hoi-tho-cua-toi from any API version, using placeholder
2025-05-29 23:23:44.306 +07:00 [WRN] No images found for 9-manh-ghep from any API version, using placeholder
2025-05-29 23:23:44.787 +07:00 [WRN] No images found for nhan-sinh-giong-nhu-thuo-dau-gap-go from any API version, using placeholder
2025-05-29 23:23:45.283 +07:00 [WRN] No images found for pho-mai-chinh-phu-tro-cap from any API version, using placeholder
2025-05-29 23:23:45.781 +07:00 [WRN] No images found for f1-academy from any API version, using placeholder
2025-05-29 23:23:45.788 +07:00 [INF] Completed page 3: 20 synced, 0 skipped, 0 errors
2025-05-29 23:23:47.792 +07:00 [INF] Movie synchronization completed. Total: 59 synced, 1 skipped, 0 errors
2025-05-29 23:37:00.862 +07:00 [INF] Database seeded successfully.
2025-05-29 23:37:01.055 +07:00 [INF] SyncMoviesService is starting.
2025-05-29 23:37:01.062 +07:00 [INF] CacheCleanupService is starting.
2025-05-29 23:37:01.066 +07:00 [INF] EpisodeSyncBackgroundService is starting.
2025-05-29 23:37:02.177 +07:00 [WRN] Failed to determine the https port for redirect.
2025-05-29 23:37:53.042 +07:00 [INF] Fetching movie detail from: phim-chi-tiet/v3?slug=dept-q
2025-05-29 23:37:54.412 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '1274.9472'
2025-05-29 23:37:54.440 +07:00 [INF] Fetched and cached movie detail for: dept-q
2025-05-29 23:38:01.062 +07:00 [INF] Starting intelligent movie synchronization...
2025-05-29 23:38:01.067 +07:00 [INF] Processing page 1...
2025-05-29 23:38:01.071 +07:00 [INF] Calling API endpoint: phim-moi/v3?page=1&limit=20
2025-05-29 23:38:01.166 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '92.8965'
2025-05-29 23:38:01.173 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":835026,"name":"Dept. Q","slug":"dept-q","year":"2025","loai_phim":"series","tmdb_id":"245703","quoc_gia":"\u00c2u M\u1ef9, Anh","modified_time":"2025-05-29 20:06:59"},{"id":835024,"name":"Kh\u00e1ch S\u1ea1n C\u1ee7a B\u00e0 Broto","slug":"khach-san-cua-ba-broto","year":"2025","loai_phim":"series","tmdb_id":"285631","quoc_gia":"Indonesia","modified_time":"2025-05-29 20:06:36"},{"id":835023,"name":"K\u1ef3 l\u00e2n chuy\u1ec3n ph\u00e1t","slug":"ky-lan-chuyen-phat","year":"2025","l...
2025-05-29 23:38:01.179 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 23:38:01.183 +07:00 [INF] Successfully cached 20 movies for page 1
2025-05-29 23:38:01.185 +07:00 [INF] Successfully retrieved page 1 using API version v3
2025-05-29 23:38:01.387 +07:00 [INF] Page 1: Found 20 movies, 20 already exist, 0 new movies to add (using v3)
2025-05-29 23:38:01.392 +07:00 [INF] Completed page 1: 0 synced, 20 skipped, 0 errors
2025-05-29 23:38:03.398 +07:00 [INF] Processing page 2...
2025-05-29 23:38:03.400 +07:00 [INF] Calling API endpoint: phim-moi/v3?page=2&limit=20
2025-05-29 23:38:03.494 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '91.1148'
2025-05-29 23:38:03.499 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":81169,"name":"Si\u00eau nh\u00f3c v\u0169 tr\u1ee5 (Ph\u1ea7n 3)","slug":"sieu-nhoc-vu-tru-phan-3","year":"2022","loai_phim":"hoathinh","tmdb_id":"116249","quoc_gia":"\u00c2u M\u1ef9","modified_time":"2025-05-29 15:39:36"},{"id":751480,"name":"Th\u1ea7n \u0110\u00f4 H\u1ed3 Th\u00e1m","slug":"than-do-ho-tham","year":"2025","loai_phim":"series","tmdb_id":"275219","quoc_gia":"Trung Qu\u1ed1c","modified_time":"2025-05-29 15:19:37"},{"id":833206,"name":"Th\u01b0\u01a1ng M\u1ebfn, Lizz...
2025-05-29 23:38:03.501 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 23:38:03.503 +07:00 [INF] Successfully cached 20 movies for page 2
2025-05-29 23:38:03.506 +07:00 [INF] Successfully retrieved page 2 using API version v3
2025-05-29 23:38:03.514 +07:00 [INF] Page 2: Found 20 movies, 20 already exist, 0 new movies to add (using v3)
2025-05-29 23:38:03.519 +07:00 [INF] Completed page 2: 0 synced, 20 skipped, 0 errors
2025-05-29 23:38:05.523 +07:00 [INF] Processing page 3...
2025-05-29 23:38:05.526 +07:00 [INF] Calling API endpoint: phim-moi/v3?page=3&limit=20
2025-05-29 23:38:05.622 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '93.6311'
2025-05-29 23:38:05.627 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":831863,"name":"T\u1ea5t T\u1eadt V\u1ec1 V\u1ee3 T\u00f4i","slug":"tat-tat-ve-vo-toi","year":"2025","loai_phim":"single","tmdb_id":"1176529","quoc_gia":"Philippines","modified_time":"2025-05-29 11:30:45"},{"id":831815,"name":"G\u00f3c Khu\u1ea5t","slug":"goc-khuat-2025","year":"2025","loai_phim":"single","tmdb_id":"1244890","quoc_gia":"\u00c2u M\u1ef9, Canada","modified_time":"2025-05-29 11:17:39"},{"id":804122,"name":"Thanh Kh\u00e2m Ch\u00ed","slug":"thanh-kham-chi","year":"2025...
2025-05-29 23:38:05.629 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 23:38:05.631 +07:00 [INF] Successfully cached 20 movies for page 3
2025-05-29 23:38:05.633 +07:00 [INF] Successfully retrieved page 3 using API version v3
2025-05-29 23:38:05.638 +07:00 [INF] Page 3: Found 20 movies, 20 already exist, 0 new movies to add (using v3)
2025-05-29 23:38:05.642 +07:00 [INF] Completed page 3: 0 synced, 20 skipped, 0 errors
2025-05-29 23:38:07.645 +07:00 [INF] Movie synchronization completed. Total: 0 synced, 60 skipped, 0 errors
2025-05-29 23:38:43.186 +07:00 [INF] Database seeded successfully.
2025-05-29 23:38:43.316 +07:00 [INF] SyncMoviesService is starting.
2025-05-29 23:38:43.324 +07:00 [INF] CacheCleanupService is starting.
2025-05-29 23:38:43.328 +07:00 [INF] EpisodeSyncBackgroundService is starting.
2025-05-29 23:38:44.466 +07:00 [WRN] Failed to determine the https port for redirect.
2025-05-29 23:39:26.882 +07:00 [INF] Fetching movie detail from: phim-chi-tiet/v3?slug=dept-q
2025-05-29 23:39:27.310 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '337.5132'
2025-05-29 23:39:27.342 +07:00 [INF] Fetched and cached movie detail for: dept-q
2025-05-29 23:39:30.587 +07:00 [INF] Fetching movie detail from: phim-chi-tiet/v1?slug=dept-q
2025-05-29 23:39:31.383 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '792.787'
2025-05-29 23:39:31.389 +07:00 [INF] Fetched and cached movie detail for: dept-q
2025-05-29 23:39:43.323 +07:00 [INF] Starting intelligent movie synchronization...
2025-05-29 23:39:43.328 +07:00 [INF] Processing page 1...
2025-05-29 23:39:43.334 +07:00 [INF] Calling API endpoint: phim-moi/v3?page=1&limit=20
2025-05-29 23:39:43.436 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '99.6438'
2025-05-29 23:39:43.442 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":835026,"name":"Dept. Q","slug":"dept-q","year":"2025","loai_phim":"series","tmdb_id":"245703","quoc_gia":"\u00c2u M\u1ef9, Anh","modified_time":"2025-05-29 20:06:59"},{"id":835024,"name":"Kh\u00e1ch S\u1ea1n C\u1ee7a B\u00e0 Broto","slug":"khach-san-cua-ba-broto","year":"2025","loai_phim":"series","tmdb_id":"285631","quoc_gia":"Indonesia","modified_time":"2025-05-29 20:06:36"},{"id":835023,"name":"K\u1ef3 l\u00e2n chuy\u1ec3n ph\u00e1t","slug":"ky-lan-chuyen-phat","year":"2025","l...
2025-05-29 23:39:43.448 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 23:39:43.451 +07:00 [INF] Successfully cached 20 movies for page 1
2025-05-29 23:39:43.454 +07:00 [INF] Successfully retrieved page 1 using API version v3
2025-05-29 23:39:43.603 +07:00 [INF] Page 1: Found 20 movies, 20 already exist, 0 new movies to add (using v3)
2025-05-29 23:39:43.608 +07:00 [INF] Completed page 1: 0 synced, 20 skipped, 0 errors
2025-05-29 23:39:45.611 +07:00 [INF] Processing page 2...
2025-05-29 23:39:45.614 +07:00 [INF] Calling API endpoint: phim-moi/v3?page=2&limit=20
2025-05-29 23:39:45.722 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '106.4405'
2025-05-29 23:39:45.729 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":81169,"name":"Si\u00eau nh\u00f3c v\u0169 tr\u1ee5 (Ph\u1ea7n 3)","slug":"sieu-nhoc-vu-tru-phan-3","year":"2022","loai_phim":"hoathinh","tmdb_id":"116249","quoc_gia":"\u00c2u M\u1ef9","modified_time":"2025-05-29 15:39:36"},{"id":751480,"name":"Th\u1ea7n \u0110\u00f4 H\u1ed3 Th\u00e1m","slug":"than-do-ho-tham","year":"2025","loai_phim":"series","tmdb_id":"275219","quoc_gia":"Trung Qu\u1ed1c","modified_time":"2025-05-29 15:19:37"},{"id":833206,"name":"Th\u01b0\u01a1ng M\u1ebfn, Lizz...
2025-05-29 23:39:45.732 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 23:39:45.734 +07:00 [INF] Successfully cached 20 movies for page 2
2025-05-29 23:39:45.737 +07:00 [INF] Successfully retrieved page 2 using API version v3
2025-05-29 23:39:45.753 +07:00 [INF] Page 2: Found 20 movies, 20 already exist, 0 new movies to add (using v3)
2025-05-29 23:39:45.758 +07:00 [INF] Completed page 2: 0 synced, 20 skipped, 0 errors
2025-05-29 23:39:47.761 +07:00 [INF] Processing page 3...
2025-05-29 23:39:47.764 +07:00 [INF] Calling API endpoint: phim-moi/v3?page=3&limit=20
2025-05-29 23:39:47.854 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '87.5597'
2025-05-29 23:39:47.860 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":831863,"name":"T\u1ea5t T\u1eadt V\u1ec1 V\u1ee3 T\u00f4i","slug":"tat-tat-ve-vo-toi","year":"2025","loai_phim":"single","tmdb_id":"1176529","quoc_gia":"Philippines","modified_time":"2025-05-29 11:30:45"},{"id":831815,"name":"G\u00f3c Khu\u1ea5t","slug":"goc-khuat-2025","year":"2025","loai_phim":"single","tmdb_id":"1244890","quoc_gia":"\u00c2u M\u1ef9, Canada","modified_time":"2025-05-29 11:17:39"},{"id":804122,"name":"Thanh Kh\u00e2m Ch\u00ed","slug":"thanh-kham-chi","year":"2025...
2025-05-29 23:39:47.862 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 23:39:47.864 +07:00 [INF] Successfully cached 20 movies for page 3
2025-05-29 23:39:47.866 +07:00 [INF] Successfully retrieved page 3 using API version v3
2025-05-29 23:39:47.881 +07:00 [INF] Page 3: Found 20 movies, 20 already exist, 0 new movies to add (using v3)
2025-05-29 23:39:47.885 +07:00 [INF] Completed page 3: 0 synced, 20 skipped, 0 errors
2025-05-29 23:39:49.889 +07:00 [INF] Movie synchronization completed. Total: 0 synced, 60 skipped, 0 errors
2025-05-29 23:40:28.957 +07:00 [INF] User admin@movieapi.com logged in successfully.
2025-05-29 23:40:37.149 +07:00 [INF] Calling API endpoint: phim-moi/v1?page=1&limit=1
2025-05-29 23:40:37.310 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '158.1066'
2025-05-29 23:40:37.315 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":"0d90dc71441c07d3178f54379cea86ab","name":"Summer Pockets","slug":"summer-pockets","year":"2025","loai_phim":"Phim b\u1ed9","quoc_gia":"Nh\u1eadt B\u1ea3n","modified":"2025-05-29 16:18:13"}],"pagination":{"current_page":1,"total_pages":29728,"total_items":29728,"limit":1}}
2025-05-29 23:40:37.317 +07:00 [INF] Parsed 1 movies from API response
2025-05-29 23:40:37.319 +07:00 [INF] Successfully cached 1 movies for page 1
2025-05-29 23:40:51.667 +07:00 [INF] Cache hit for latest movies: page 1, version v1
2025-05-29 23:41:07.831 +07:00 [INF] Calling API endpoint: phim-moi/v1?page=1&limit=20
2025-05-29 23:41:07.966 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '130.2701'
2025-05-29 23:41:07.972 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":"0d90dc71441c07d3178f54379cea86ab","name":"Summer Pockets","slug":"summer-pockets","year":"2025","loai_phim":"Phim b\u1ed9","quoc_gia":"Nh\u1eadt B\u1ea3n","modified":"2025-05-29 16:18:13"},{"id":"30c54fe92fc8181d33b91c6dbc8de9d7","name":"Kimi to Boku no Saigo no Senjou, Aruiwa Sekai ga Hajimaru Seisen Season II","slug":"kimi-to-boku-no-saigo-no-senjou-aruiwa-sekai-ga-hajimaru-seisen-season-ii","year":"2024","loai_phim":"Phim b\u1ed9","quoc_gia":"Nh\u1eadt B\u1ea3n","modified":"20...
2025-05-29 23:41:07.975 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 23:41:07.978 +07:00 [INF] Successfully cached 20 movies for page 1
2025-05-29 23:41:08.131 +07:00 [ERR] Failed executing DbCommand (52ms) [Parameters=[@p0='?' (Size = 100), @p1='?' (Size = 2000), @p2='?' (Size = 100), @p3='?' (Size = 50), @p4='?' (Size = 50), @p5='?' (DbType = DateTime2), @p6='?' (Size = 1000), @p7='?' (DbType = Double), @p8='?' (Size = 4000), @p9='?' (Size = 50), @p10='?' (Size = 1000), @p11='?' (Size = 500), @p12='?' (Size = 50), @p13='?' (Size = 1000), @p14='?' (DbType = Int64), @p15='?' (Size = 4), @p16='?' (Size = 100), @p17='?' (Size = 2000), @p18='?' (Size = 100), @p19='?' (Size = 50), @p20='?' (Size = 50), @p21='?' (DbType = DateTime2), @p22='?' (Size = 1000), @p23='?' (DbType = Double), @p24='?' (Size = 4000), @p25='?' (Size = 50), @p26='?' (Size = 1000), @p27='?' (Size = 500), @p28='?' (Size = 50), @p29='?' (Size = 1000), @p30='?' (DbType = Int64), @p31='?' (Size = 4), @p32='?' (Size = 100), @p33='?' (Size = 2000), @p34='?' (Size = 100), @p35='?' (Size = 50), @p36='?' (Size = 50), @p37='?' (DbType = DateTime2), @p38='?' (Size = 1000), @p39='?' (DbType = Double), @p40='?' (Size = 4000), @p41='?' (Size = 50), @p42='?' (Size = 1000), @p43='?' (Size = 500), @p44='?' (Size = 50), @p45='?' (Size = 1000), @p46='?' (DbType = Int64), @p47='?' (Size = 4), @p48='?' (Size = 100), @p49='?' (Size = 2000), @p50='?' (Size = 100), @p51='?' (Size = 50), @p52='?' (Size = 50), @p53='?' (DbType = DateTime2), @p54='?' (Size = 1000), @p55='?' (DbType = Double), @p56='?' (Size = 4000), @p57='?' (Size = 50), @p58='?' (Size = 1000), @p59='?' (Size = 500), @p60='?' (Size = 50), @p61='?' (Size = 1000), @p62='?' (DbType = Int64), @p63='?' (Size = 4), @p64='?' (Size = 100), @p65='?' (Size = 2000), @p66='?' (Size = 100), @p67='?' (Size = 50), @p68='?' (Size = 50), @p69='?' (DbType = DateTime2), @p70='?' (Size = 1000), @p71='?' (DbType = Double), @p72='?' (Size = 4000), @p73='?' (Size = 50), @p74='?' (Size = 1000), @p75='?' (Size = 500), @p76='?' (Size = 50), @p77='?' (Size = 1000), @p78='?' (DbType = Int64), @p79='?' (Size = 4), @p80='?' (Size = 100), @p81='?' (Size = 2000), @p82='?' (Size = 100), @p83='?' (Size = 50), @p84='?' (Size = 50), @p85='?' (DbType = DateTime2), @p86='?' (Size = 1000), @p87='?' (DbType = Double), @p88='?' (Size = 4000), @p89='?' (Size = 50), @p90='?' (Size = 1000), @p91='?' (Size = 500), @p92='?' (Size = 50), @p93='?' (Size = 1000), @p94='?' (DbType = Int64), @p95='?' (Size = 4), @p96='?' (Size = 100), @p97='?' (Size = 2000), @p98='?' (Size = 100), @p99='?' (Size = 50), @p100='?' (Size = 50), @p101='?' (DbType = DateTime2), @p102='?' (Size = 1000), @p103='?' (DbType = Double), @p104='?' (Size = 4000), @p105='?' (Size = 50), @p106='?' (Size = 1000), @p107='?' (Size = 500), @p108='?' (Size = 50), @p109='?' (Size = 1000), @p110='?' (DbType = Int64), @p111='?' (Size = 4), @p112='?' (Size = 100), @p113='?' (Size = 2000), @p114='?' (Size = 100), @p115='?' (Size = 50), @p116='?' (Size = 50), @p117='?' (DbType = DateTime2), @p118='?' (Size = 1000), @p119='?' (DbType = Double), @p120='?' (Size = 4000), @p121='?' (Size = 50), @p122='?' (Size = 1000), @p123='?' (Size = 500), @p124='?' (Size = 50), @p125='?' (Size = 1000), @p126='?' (DbType = Int64), @p127='?' (Size = 4), @p128='?' (Size = 100), @p129='?' (Size = 2000), @p130='?' (Size = 100), @p131='?' (Size = 50), @p132='?' (Size = 50), @p133='?' (DbType = DateTime2), @p134='?' (Size = 1000), @p135='?' (DbType = Double), @p136='?' (Size = 4000), @p137='?' (Size = 50), @p138='?' (Size = 1000), @p139='?' (Size = 500), @p140='?' (Size = 50), @p141='?' (Size = 1000), @p142='?' (DbType = Int64), @p143='?' (Size = 4), @p144='?' (Size = 100), @p145='?' (Size = 2000), @p146='?' (Size = 100), @p147='?' (Size = 50), @p148='?' (Size = 50), @p149='?' (DbType = DateTime2), @p150='?' (Size = 1000), @p151='?' (DbType = Double), @p152='?' (Size = 4000), @p153='?' (Size = 50), @p154='?' (Size = 1000), @p155='?' (Size = 500), @p156='?' (Size = 50), @p157='?' (Size = 1000), @p158='?' (DbType = Int64), @p159='?' (Size = 4), @p160='?' (Size = 100), @p161='?' (Size = 2000), @p162='?' (Size = 100), @p163='?' (Size = 50), @p164='?' (Size = 50), @p165='?' (DbType = DateTime2), @p166='?' (Size = 1000), @p167='?' (DbType = Double), @p168='?' (Size = 4000), @p169='?' (Size = 50), @p170='?' (Size = 1000), @p171='?' (Size = 500), @p172='?' (Size = 50), @p173='?' (Size = 1000), @p174='?' (DbType = Int64), @p175='?' (Size = 4), @p176='?' (Size = 100), @p177='?' (Size = 2000), @p178='?' (Size = 100), @p179='?' (Size = 50), @p180='?' (Size = 50), @p181='?' (DbType = DateTime2), @p182='?' (Size = 1000), @p183='?' (DbType = Double), @p184='?' (Size = 4000), @p185='?' (Size = 50), @p186='?' (Size = 1000), @p187='?' (Size = 500), @p188='?' (Size = 50), @p189='?' (Size = 1000), @p190='?' (DbType = Int64), @p191='?' (Size = 4), @p192='?' (Size = 100), @p193='?' (Size = 2000), @p194='?' (Size = 100), @p195='?' (Size = 50), @p196='?' (Size = 50), @p197='?' (DbType = DateTime2), @p198='?' (Size = 1000), @p199='?' (DbType = Double), @p200='?' (Size = 4000), @p201='?' (Size = 50), @p202='?' (Size = 1000), @p203='?' (Size = 500), @p204='?' (Size = 50), @p205='?' (Size = 1000), @p206='?' (DbType = Int64), @p207='?' (Size = 4), @p208='?' (Size = 100), @p209='?' (Size = 2000), @p210='?' (Size = 100), @p211='?' (Size = 50), @p212='?' (Size = 50), @p213='?' (DbType = DateTime2), @p214='?' (Size = 1000), @p215='?' (DbType = Double), @p216='?' (Size = 4000), @p217='?' (Size = 50), @p218='?' (Size = 1000), @p219='?' (Size = 500), @p220='?' (Size = 50), @p221='?' (Size = 1000), @p222='?' (DbType = Int64), @p223='?' (Size = 4), @p224='?' (Size = 100), @p225='?' (Size = 2000), @p226='?' (Size = 100), @p227='?' (Size = 50), @p228='?' (Size = 50), @p229='?' (DbType = DateTime2), @p230='?' (Size = 1000), @p231='?' (DbType = Double), @p232='?' (Size = 4000), @p233='?' (Size = 50), @p234='?' (Size = 1000), @p235='?' (Size = 500), @p236='?' (Size = 50), @p237='?' (Size = 1000), @p238='?' (DbType = Int64), @p239='?' (Size = 4), @p240='?' (Size = 100), @p241='?' (Size = 2000), @p242='?' (Size = 100), @p243='?' (Size = 50), @p244='?' (Size = 50), @p245='?' (DbType = DateTime2), @p246='?' (Size = 1000), @p247='?' (DbType = Double), @p248='?' (Size = 4000), @p249='?' (Size = 50), @p250='?' (Size = 1000), @p251='?' (Size = 500), @p252='?' (Size = 50), @p253='?' (Size = 1000), @p254='?' (DbType = Int64), @p255='?' (Size = 4), @p256='?' (Size = 100), @p257='?' (Size = 2000), @p258='?' (Size = 100), @p259='?' (Size = 50), @p260='?' (Size = 50), @p261='?' (DbType = DateTime2), @p262='?' (Size = 1000), @p263='?' (DbType = Double), @p264='?' (Size = 4000), @p265='?' (Size = 50), @p266='?' (Size = 1000), @p267='?' (Size = 500), @p268='?' (Size = 50), @p269='?' (Size = 1000), @p270='?' (DbType = Int64), @p271='?' (Size = 4), @p272='?' (Size = 100), @p273='?' (Size = 2000), @p274='?' (Size = 100), @p275='?' (Size = 50), @p276='?' (Size = 50), @p277='?' (DbType = DateTime2), @p278='?' (Size = 1000), @p279='?' (DbType = Double), @p280='?' (Size = 4000), @p281='?' (Size = 50), @p282='?' (Size = 1000), @p283='?' (Size = 500), @p284='?' (Size = 50), @p285='?' (Size = 1000), @p286='?' (DbType = Int64), @p287='?' (Size = 4), @p288='?' (Size = 100), @p289='?' (Size = 2000), @p290='?' (Size = 100), @p291='?' (Size = 50), @p292='?' (Size = 50), @p293='?' (DbType = DateTime2), @p294='?' (Size = 1000), @p295='?' (DbType = Double), @p296='?' (Size = 4000), @p297='?' (Size = 50), @p298='?' (Size = 1000), @p299='?' (Size = 500), @p300='?' (Size = 50), @p301='?' (Size = 1000), @p302='?' (DbType = Int64), @p303='?' (Size = 4), @p304='?' (Size = 100), @p305='?' (Size = 2000), @p306='?' (Size = 100), @p307='?' (Size = 50), @p308='?' (Size = 50), @p309='?' (DbType = DateTime2), @p310='?' (Size = 1000), @p311='?' (DbType = Double), @p312='?' (Size = 4000), @p313='?' (Size = 50), @p314='?' (Size = 1000), @p315='?' (Size = 500), @p316='?' (Size = 50), @p317='?' (Size = 1000), @p318='?' (DbType = Int64), @p319='?' (Size = 4)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [CachedMovies] ([Slug], [Description], [Director], [Duration], [Language], [LastUpdated], [PosterUrl], [Rating], [RawData], [Resolution], [ThumbUrl], [Title], [TmdbId], [TrailerUrl], [Views], [Year])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15),
(@p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31),
(@p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47),
(@p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63),
(@p64, @p65, @p66, @p67, @p68, @p69, @p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79),
(@p80, @p81, @p82, @p83, @p84, @p85, @p86, @p87, @p88, @p89, @p90, @p91, @p92, @p93, @p94, @p95),
(@p96, @p97, @p98, @p99, @p100, @p101, @p102, @p103, @p104, @p105, @p106, @p107, @p108, @p109, @p110, @p111),
(@p112, @p113, @p114, @p115, @p116, @p117, @p118, @p119, @p120, @p121, @p122, @p123, @p124, @p125, @p126, @p127),
(@p128, @p129, @p130, @p131, @p132, @p133, @p134, @p135, @p136, @p137, @p138, @p139, @p140, @p141, @p142, @p143),
(@p144, @p145, @p146, @p147, @p148, @p149, @p150, @p151, @p152, @p153, @p154, @p155, @p156, @p157, @p158, @p159),
(@p160, @p161, @p162, @p163, @p164, @p165, @p166, @p167, @p168, @p169, @p170, @p171, @p172, @p173, @p174, @p175),
(@p176, @p177, @p178, @p179, @p180, @p181, @p182, @p183, @p184, @p185, @p186, @p187, @p188, @p189, @p190, @p191),
(@p192, @p193, @p194, @p195, @p196, @p197, @p198, @p199, @p200, @p201, @p202, @p203, @p204, @p205, @p206, @p207),
(@p208, @p209, @p210, @p211, @p212, @p213, @p214, @p215, @p216, @p217, @p218, @p219, @p220, @p221, @p222, @p223),
(@p224, @p225, @p226, @p227, @p228, @p229, @p230, @p231, @p232, @p233, @p234, @p235, @p236, @p237, @p238, @p239),
(@p240, @p241, @p242, @p243, @p244, @p245, @p246, @p247, @p248, @p249, @p250, @p251, @p252, @p253, @p254, @p255),
(@p256, @p257, @p258, @p259, @p260, @p261, @p262, @p263, @p264, @p265, @p266, @p267, @p268, @p269, @p270, @p271),
(@p272, @p273, @p274, @p275, @p276, @p277, @p278, @p279, @p280, @p281, @p282, @p283, @p284, @p285, @p286, @p287),
(@p288, @p289, @p290, @p291, @p292, @p293, @p294, @p295, @p296, @p297, @p298, @p299, @p300, @p301, @p302, @p303),
(@p304, @p305, @p306, @p307, @p308, @p309, @p310, @p311, @p312, @p313, @p314, @p315, @p316, @p317, @p318, @p319);
2025-05-29 23:41:08.155 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'WebAppApiPhim.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'ThumbUrl', table 'Phim.dbo.CachedMovies'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:4cc329ba-9ffc-4a40-89d3-0205c8888803
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'ThumbUrl', table 'Phim.dbo.CachedMovies'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:4cc329ba-9ffc-4a40-89d3-0205c8888803
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-29 23:41:08.313 +07:00 [ERR] Error in force sync
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'ThumbUrl', table 'Phim.dbo.CachedMovies'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:4cc329ba-9ffc-4a40-89d3-0205c8888803
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at WebAppApiPhim.Controllers.AdminController.ForceSync(Int32 pages) in C:\D\Leaning\API\APICode\WebAppApiPhim\Controllers\AdminController.cs:line 92
2025-05-29 23:41:13.490 +07:00 [INF] Cache hit for latest movies: page 1, version v1
2025-05-29 23:41:13.584 +07:00 [ERR] Failed executing DbCommand (26ms) [Parameters=[@p0='?' (Size = 100), @p1='?' (Size = 2000), @p2='?' (Size = 100), @p3='?' (Size = 50), @p4='?' (Size = 50), @p5='?' (DbType = DateTime2), @p6='?' (Size = 1000), @p7='?' (DbType = Double), @p8='?' (Size = 4000), @p9='?' (Size = 50), @p10='?' (Size = 1000), @p11='?' (Size = 500), @p12='?' (Size = 50), @p13='?' (Size = 1000), @p14='?' (DbType = Int64), @p15='?' (Size = 4), @p16='?' (Size = 100), @p17='?' (Size = 2000), @p18='?' (Size = 100), @p19='?' (Size = 50), @p20='?' (Size = 50), @p21='?' (DbType = DateTime2), @p22='?' (Size = 1000), @p23='?' (DbType = Double), @p24='?' (Size = 4000), @p25='?' (Size = 50), @p26='?' (Size = 1000), @p27='?' (Size = 500), @p28='?' (Size = 50), @p29='?' (Size = 1000), @p30='?' (DbType = Int64), @p31='?' (Size = 4), @p32='?' (Size = 100), @p33='?' (Size = 2000), @p34='?' (Size = 100), @p35='?' (Size = 50), @p36='?' (Size = 50), @p37='?' (DbType = DateTime2), @p38='?' (Size = 1000), @p39='?' (DbType = Double), @p40='?' (Size = 4000), @p41='?' (Size = 50), @p42='?' (Size = 1000), @p43='?' (Size = 500), @p44='?' (Size = 50), @p45='?' (Size = 1000), @p46='?' (DbType = Int64), @p47='?' (Size = 4), @p48='?' (Size = 100), @p49='?' (Size = 2000), @p50='?' (Size = 100), @p51='?' (Size = 50), @p52='?' (Size = 50), @p53='?' (DbType = DateTime2), @p54='?' (Size = 1000), @p55='?' (DbType = Double), @p56='?' (Size = 4000), @p57='?' (Size = 50), @p58='?' (Size = 1000), @p59='?' (Size = 500), @p60='?' (Size = 50), @p61='?' (Size = 1000), @p62='?' (DbType = Int64), @p63='?' (Size = 4), @p64='?' (Size = 100), @p65='?' (Size = 2000), @p66='?' (Size = 100), @p67='?' (Size = 50), @p68='?' (Size = 50), @p69='?' (DbType = DateTime2), @p70='?' (Size = 1000), @p71='?' (DbType = Double), @p72='?' (Size = 4000), @p73='?' (Size = 50), @p74='?' (Size = 1000), @p75='?' (Size = 500), @p76='?' (Size = 50), @p77='?' (Size = 1000), @p78='?' (DbType = Int64), @p79='?' (Size = 4), @p80='?' (Size = 100), @p81='?' (Size = 2000), @p82='?' (Size = 100), @p83='?' (Size = 50), @p84='?' (Size = 50), @p85='?' (DbType = DateTime2), @p86='?' (Size = 1000), @p87='?' (DbType = Double), @p88='?' (Size = 4000), @p89='?' (Size = 50), @p90='?' (Size = 1000), @p91='?' (Size = 500), @p92='?' (Size = 50), @p93='?' (Size = 1000), @p94='?' (DbType = Int64), @p95='?' (Size = 4), @p96='?' (Size = 100), @p97='?' (Size = 2000), @p98='?' (Size = 100), @p99='?' (Size = 50), @p100='?' (Size = 50), @p101='?' (DbType = DateTime2), @p102='?' (Size = 1000), @p103='?' (DbType = Double), @p104='?' (Size = 4000), @p105='?' (Size = 50), @p106='?' (Size = 1000), @p107='?' (Size = 500), @p108='?' (Size = 50), @p109='?' (Size = 1000), @p110='?' (DbType = Int64), @p111='?' (Size = 4), @p112='?' (Size = 100), @p113='?' (Size = 2000), @p114='?' (Size = 100), @p115='?' (Size = 50), @p116='?' (Size = 50), @p117='?' (DbType = DateTime2), @p118='?' (Size = 1000), @p119='?' (DbType = Double), @p120='?' (Size = 4000), @p121='?' (Size = 50), @p122='?' (Size = 1000), @p123='?' (Size = 500), @p124='?' (Size = 50), @p125='?' (Size = 1000), @p126='?' (DbType = Int64), @p127='?' (Size = 4), @p128='?' (Size = 100), @p129='?' (Size = 2000), @p130='?' (Size = 100), @p131='?' (Size = 50), @p132='?' (Size = 50), @p133='?' (DbType = DateTime2), @p134='?' (Size = 1000), @p135='?' (DbType = Double), @p136='?' (Size = 4000), @p137='?' (Size = 50), @p138='?' (Size = 1000), @p139='?' (Size = 500), @p140='?' (Size = 50), @p141='?' (Size = 1000), @p142='?' (DbType = Int64), @p143='?' (Size = 4), @p144='?' (Size = 100), @p145='?' (Size = 2000), @p146='?' (Size = 100), @p147='?' (Size = 50), @p148='?' (Size = 50), @p149='?' (DbType = DateTime2), @p150='?' (Size = 1000), @p151='?' (DbType = Double), @p152='?' (Size = 4000), @p153='?' (Size = 50), @p154='?' (Size = 1000), @p155='?' (Size = 500), @p156='?' (Size = 50), @p157='?' (Size = 1000), @p158='?' (DbType = Int64), @p159='?' (Size = 4), @p160='?' (Size = 100), @p161='?' (Size = 2000), @p162='?' (Size = 100), @p163='?' (Size = 50), @p164='?' (Size = 50), @p165='?' (DbType = DateTime2), @p166='?' (Size = 1000), @p167='?' (DbType = Double), @p168='?' (Size = 4000), @p169='?' (Size = 50), @p170='?' (Size = 1000), @p171='?' (Size = 500), @p172='?' (Size = 50), @p173='?' (Size = 1000), @p174='?' (DbType = Int64), @p175='?' (Size = 4), @p176='?' (Size = 100), @p177='?' (Size = 2000), @p178='?' (Size = 100), @p179='?' (Size = 50), @p180='?' (Size = 50), @p181='?' (DbType = DateTime2), @p182='?' (Size = 1000), @p183='?' (DbType = Double), @p184='?' (Size = 4000), @p185='?' (Size = 50), @p186='?' (Size = 1000), @p187='?' (Size = 500), @p188='?' (Size = 50), @p189='?' (Size = 1000), @p190='?' (DbType = Int64), @p191='?' (Size = 4), @p192='?' (Size = 100), @p193='?' (Size = 2000), @p194='?' (Size = 100), @p195='?' (Size = 50), @p196='?' (Size = 50), @p197='?' (DbType = DateTime2), @p198='?' (Size = 1000), @p199='?' (DbType = Double), @p200='?' (Size = 4000), @p201='?' (Size = 50), @p202='?' (Size = 1000), @p203='?' (Size = 500), @p204='?' (Size = 50), @p205='?' (Size = 1000), @p206='?' (DbType = Int64), @p207='?' (Size = 4), @p208='?' (Size = 100), @p209='?' (Size = 2000), @p210='?' (Size = 100), @p211='?' (Size = 50), @p212='?' (Size = 50), @p213='?' (DbType = DateTime2), @p214='?' (Size = 1000), @p215='?' (DbType = Double), @p216='?' (Size = 4000), @p217='?' (Size = 50), @p218='?' (Size = 1000), @p219='?' (Size = 500), @p220='?' (Size = 50), @p221='?' (Size = 1000), @p222='?' (DbType = Int64), @p223='?' (Size = 4), @p224='?' (Size = 100), @p225='?' (Size = 2000), @p226='?' (Size = 100), @p227='?' (Size = 50), @p228='?' (Size = 50), @p229='?' (DbType = DateTime2), @p230='?' (Size = 1000), @p231='?' (DbType = Double), @p232='?' (Size = 4000), @p233='?' (Size = 50), @p234='?' (Size = 1000), @p235='?' (Size = 500), @p236='?' (Size = 50), @p237='?' (Size = 1000), @p238='?' (DbType = Int64), @p239='?' (Size = 4), @p240='?' (Size = 100), @p241='?' (Size = 2000), @p242='?' (Size = 100), @p243='?' (Size = 50), @p244='?' (Size = 50), @p245='?' (DbType = DateTime2), @p246='?' (Size = 1000), @p247='?' (DbType = Double), @p248='?' (Size = 4000), @p249='?' (Size = 50), @p250='?' (Size = 1000), @p251='?' (Size = 500), @p252='?' (Size = 50), @p253='?' (Size = 1000), @p254='?' (DbType = Int64), @p255='?' (Size = 4), @p256='?' (Size = 100), @p257='?' (Size = 2000), @p258='?' (Size = 100), @p259='?' (Size = 50), @p260='?' (Size = 50), @p261='?' (DbType = DateTime2), @p262='?' (Size = 1000), @p263='?' (DbType = Double), @p264='?' (Size = 4000), @p265='?' (Size = 50), @p266='?' (Size = 1000), @p267='?' (Size = 500), @p268='?' (Size = 50), @p269='?' (Size = 1000), @p270='?' (DbType = Int64), @p271='?' (Size = 4), @p272='?' (Size = 100), @p273='?' (Size = 2000), @p274='?' (Size = 100), @p275='?' (Size = 50), @p276='?' (Size = 50), @p277='?' (DbType = DateTime2), @p278='?' (Size = 1000), @p279='?' (DbType = Double), @p280='?' (Size = 4000), @p281='?' (Size = 50), @p282='?' (Size = 1000), @p283='?' (Size = 500), @p284='?' (Size = 50), @p285='?' (Size = 1000), @p286='?' (DbType = Int64), @p287='?' (Size = 4), @p288='?' (Size = 100), @p289='?' (Size = 2000), @p290='?' (Size = 100), @p291='?' (Size = 50), @p292='?' (Size = 50), @p293='?' (DbType = DateTime2), @p294='?' (Size = 1000), @p295='?' (DbType = Double), @p296='?' (Size = 4000), @p297='?' (Size = 50), @p298='?' (Size = 1000), @p299='?' (Size = 500), @p300='?' (Size = 50), @p301='?' (Size = 1000), @p302='?' (DbType = Int64), @p303='?' (Size = 4), @p304='?' (Size = 100), @p305='?' (Size = 2000), @p306='?' (Size = 100), @p307='?' (Size = 50), @p308='?' (Size = 50), @p309='?' (DbType = DateTime2), @p310='?' (Size = 1000), @p311='?' (DbType = Double), @p312='?' (Size = 4000), @p313='?' (Size = 50), @p314='?' (Size = 1000), @p315='?' (Size = 500), @p316='?' (Size = 50), @p317='?' (Size = 1000), @p318='?' (DbType = Int64), @p319='?' (Size = 4)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [CachedMovies] ([Slug], [Description], [Director], [Duration], [Language], [LastUpdated], [PosterUrl], [Rating], [RawData], [Resolution], [ThumbUrl], [Title], [TmdbId], [TrailerUrl], [Views], [Year])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15),
(@p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31),
(@p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47),
(@p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63),
(@p64, @p65, @p66, @p67, @p68, @p69, @p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79),
(@p80, @p81, @p82, @p83, @p84, @p85, @p86, @p87, @p88, @p89, @p90, @p91, @p92, @p93, @p94, @p95),
(@p96, @p97, @p98, @p99, @p100, @p101, @p102, @p103, @p104, @p105, @p106, @p107, @p108, @p109, @p110, @p111),
(@p112, @p113, @p114, @p115, @p116, @p117, @p118, @p119, @p120, @p121, @p122, @p123, @p124, @p125, @p126, @p127),
(@p128, @p129, @p130, @p131, @p132, @p133, @p134, @p135, @p136, @p137, @p138, @p139, @p140, @p141, @p142, @p143),
(@p144, @p145, @p146, @p147, @p148, @p149, @p150, @p151, @p152, @p153, @p154, @p155, @p156, @p157, @p158, @p159),
(@p160, @p161, @p162, @p163, @p164, @p165, @p166, @p167, @p168, @p169, @p170, @p171, @p172, @p173, @p174, @p175),
(@p176, @p177, @p178, @p179, @p180, @p181, @p182, @p183, @p184, @p185, @p186, @p187, @p188, @p189, @p190, @p191),
(@p192, @p193, @p194, @p195, @p196, @p197, @p198, @p199, @p200, @p201, @p202, @p203, @p204, @p205, @p206, @p207),
(@p208, @p209, @p210, @p211, @p212, @p213, @p214, @p215, @p216, @p217, @p218, @p219, @p220, @p221, @p222, @p223),
(@p224, @p225, @p226, @p227, @p228, @p229, @p230, @p231, @p232, @p233, @p234, @p235, @p236, @p237, @p238, @p239),
(@p240, @p241, @p242, @p243, @p244, @p245, @p246, @p247, @p248, @p249, @p250, @p251, @p252, @p253, @p254, @p255),
(@p256, @p257, @p258, @p259, @p260, @p261, @p262, @p263, @p264, @p265, @p266, @p267, @p268, @p269, @p270, @p271),
(@p272, @p273, @p274, @p275, @p276, @p277, @p278, @p279, @p280, @p281, @p282, @p283, @p284, @p285, @p286, @p287),
(@p288, @p289, @p290, @p291, @p292, @p293, @p294, @p295, @p296, @p297, @p298, @p299, @p300, @p301, @p302, @p303),
(@p304, @p305, @p306, @p307, @p308, @p309, @p310, @p311, @p312, @p313, @p314, @p315, @p316, @p317, @p318, @p319);
2025-05-29 23:41:13.598 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'WebAppApiPhim.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'ThumbUrl', table 'Phim.dbo.CachedMovies'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:4cc329ba-9ffc-4a40-89d3-0205c8888803
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'ThumbUrl', table 'Phim.dbo.CachedMovies'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:4cc329ba-9ffc-4a40-89d3-0205c8888803
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-29 23:41:13.681 +07:00 [ERR] Error in force sync
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'ThumbUrl', table 'Phim.dbo.CachedMovies'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:4cc329ba-9ffc-4a40-89d3-0205c8888803
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at WebAppApiPhim.Controllers.AdminController.ForceSync(Int32 pages) in C:\D\Leaning\API\APICode\WebAppApiPhim\Controllers\AdminController.cs:line 92
2025-05-29 23:41:21.801 +07:00 [INF] Cache hit for latest movies: page 1, version v1
2025-05-29 23:41:21.878 +07:00 [ERR] Failed executing DbCommand (20ms) [Parameters=[@p0='?' (Size = 100), @p1='?' (Size = 2000), @p2='?' (Size = 100), @p3='?' (Size = 50), @p4='?' (Size = 50), @p5='?' (DbType = DateTime2), @p6='?' (Size = 1000), @p7='?' (DbType = Double), @p8='?' (Size = 4000), @p9='?' (Size = 50), @p10='?' (Size = 1000), @p11='?' (Size = 500), @p12='?' (Size = 50), @p13='?' (Size = 1000), @p14='?' (DbType = Int64), @p15='?' (Size = 4), @p16='?' (Size = 100), @p17='?' (Size = 2000), @p18='?' (Size = 100), @p19='?' (Size = 50), @p20='?' (Size = 50), @p21='?' (DbType = DateTime2), @p22='?' (Size = 1000), @p23='?' (DbType = Double), @p24='?' (Size = 4000), @p25='?' (Size = 50), @p26='?' (Size = 1000), @p27='?' (Size = 500), @p28='?' (Size = 50), @p29='?' (Size = 1000), @p30='?' (DbType = Int64), @p31='?' (Size = 4), @p32='?' (Size = 100), @p33='?' (Size = 2000), @p34='?' (Size = 100), @p35='?' (Size = 50), @p36='?' (Size = 50), @p37='?' (DbType = DateTime2), @p38='?' (Size = 1000), @p39='?' (DbType = Double), @p40='?' (Size = 4000), @p41='?' (Size = 50), @p42='?' (Size = 1000), @p43='?' (Size = 500), @p44='?' (Size = 50), @p45='?' (Size = 1000), @p46='?' (DbType = Int64), @p47='?' (Size = 4), @p48='?' (Size = 100), @p49='?' (Size = 2000), @p50='?' (Size = 100), @p51='?' (Size = 50), @p52='?' (Size = 50), @p53='?' (DbType = DateTime2), @p54='?' (Size = 1000), @p55='?' (DbType = Double), @p56='?' (Size = 4000), @p57='?' (Size = 50), @p58='?' (Size = 1000), @p59='?' (Size = 500), @p60='?' (Size = 50), @p61='?' (Size = 1000), @p62='?' (DbType = Int64), @p63='?' (Size = 4), @p64='?' (Size = 100), @p65='?' (Size = 2000), @p66='?' (Size = 100), @p67='?' (Size = 50), @p68='?' (Size = 50), @p69='?' (DbType = DateTime2), @p70='?' (Size = 1000), @p71='?' (DbType = Double), @p72='?' (Size = 4000), @p73='?' (Size = 50), @p74='?' (Size = 1000), @p75='?' (Size = 500), @p76='?' (Size = 50), @p77='?' (Size = 1000), @p78='?' (DbType = Int64), @p79='?' (Size = 4), @p80='?' (Size = 100), @p81='?' (Size = 2000), @p82='?' (Size = 100), @p83='?' (Size = 50), @p84='?' (Size = 50), @p85='?' (DbType = DateTime2), @p86='?' (Size = 1000), @p87='?' (DbType = Double), @p88='?' (Size = 4000), @p89='?' (Size = 50), @p90='?' (Size = 1000), @p91='?' (Size = 500), @p92='?' (Size = 50), @p93='?' (Size = 1000), @p94='?' (DbType = Int64), @p95='?' (Size = 4), @p96='?' (Size = 100), @p97='?' (Size = 2000), @p98='?' (Size = 100), @p99='?' (Size = 50), @p100='?' (Size = 50), @p101='?' (DbType = DateTime2), @p102='?' (Size = 1000), @p103='?' (DbType = Double), @p104='?' (Size = 4000), @p105='?' (Size = 50), @p106='?' (Size = 1000), @p107='?' (Size = 500), @p108='?' (Size = 50), @p109='?' (Size = 1000), @p110='?' (DbType = Int64), @p111='?' (Size = 4), @p112='?' (Size = 100), @p113='?' (Size = 2000), @p114='?' (Size = 100), @p115='?' (Size = 50), @p116='?' (Size = 50), @p117='?' (DbType = DateTime2), @p118='?' (Size = 1000), @p119='?' (DbType = Double), @p120='?' (Size = 4000), @p121='?' (Size = 50), @p122='?' (Size = 1000), @p123='?' (Size = 500), @p124='?' (Size = 50), @p125='?' (Size = 1000), @p126='?' (DbType = Int64), @p127='?' (Size = 4), @p128='?' (Size = 100), @p129='?' (Size = 2000), @p130='?' (Size = 100), @p131='?' (Size = 50), @p132='?' (Size = 50), @p133='?' (DbType = DateTime2), @p134='?' (Size = 1000), @p135='?' (DbType = Double), @p136='?' (Size = 4000), @p137='?' (Size = 50), @p138='?' (Size = 1000), @p139='?' (Size = 500), @p140='?' (Size = 50), @p141='?' (Size = 1000), @p142='?' (DbType = Int64), @p143='?' (Size = 4), @p144='?' (Size = 100), @p145='?' (Size = 2000), @p146='?' (Size = 100), @p147='?' (Size = 50), @p148='?' (Size = 50), @p149='?' (DbType = DateTime2), @p150='?' (Size = 1000), @p151='?' (DbType = Double), @p152='?' (Size = 4000), @p153='?' (Size = 50), @p154='?' (Size = 1000), @p155='?' (Size = 500), @p156='?' (Size = 50), @p157='?' (Size = 1000), @p158='?' (DbType = Int64), @p159='?' (Size = 4), @p160='?' (Size = 100), @p161='?' (Size = 2000), @p162='?' (Size = 100), @p163='?' (Size = 50), @p164='?' (Size = 50), @p165='?' (DbType = DateTime2), @p166='?' (Size = 1000), @p167='?' (DbType = Double), @p168='?' (Size = 4000), @p169='?' (Size = 50), @p170='?' (Size = 1000), @p171='?' (Size = 500), @p172='?' (Size = 50), @p173='?' (Size = 1000), @p174='?' (DbType = Int64), @p175='?' (Size = 4), @p176='?' (Size = 100), @p177='?' (Size = 2000), @p178='?' (Size = 100), @p179='?' (Size = 50), @p180='?' (Size = 50), @p181='?' (DbType = DateTime2), @p182='?' (Size = 1000), @p183='?' (DbType = Double), @p184='?' (Size = 4000), @p185='?' (Size = 50), @p186='?' (Size = 1000), @p187='?' (Size = 500), @p188='?' (Size = 50), @p189='?' (Size = 1000), @p190='?' (DbType = Int64), @p191='?' (Size = 4), @p192='?' (Size = 100), @p193='?' (Size = 2000), @p194='?' (Size = 100), @p195='?' (Size = 50), @p196='?' (Size = 50), @p197='?' (DbType = DateTime2), @p198='?' (Size = 1000), @p199='?' (DbType = Double), @p200='?' (Size = 4000), @p201='?' (Size = 50), @p202='?' (Size = 1000), @p203='?' (Size = 500), @p204='?' (Size = 50), @p205='?' (Size = 1000), @p206='?' (DbType = Int64), @p207='?' (Size = 4), @p208='?' (Size = 100), @p209='?' (Size = 2000), @p210='?' (Size = 100), @p211='?' (Size = 50), @p212='?' (Size = 50), @p213='?' (DbType = DateTime2), @p214='?' (Size = 1000), @p215='?' (DbType = Double), @p216='?' (Size = 4000), @p217='?' (Size = 50), @p218='?' (Size = 1000), @p219='?' (Size = 500), @p220='?' (Size = 50), @p221='?' (Size = 1000), @p222='?' (DbType = Int64), @p223='?' (Size = 4), @p224='?' (Size = 100), @p225='?' (Size = 2000), @p226='?' (Size = 100), @p227='?' (Size = 50), @p228='?' (Size = 50), @p229='?' (DbType = DateTime2), @p230='?' (Size = 1000), @p231='?' (DbType = Double), @p232='?' (Size = 4000), @p233='?' (Size = 50), @p234='?' (Size = 1000), @p235='?' (Size = 500), @p236='?' (Size = 50), @p237='?' (Size = 1000), @p238='?' (DbType = Int64), @p239='?' (Size = 4), @p240='?' (Size = 100), @p241='?' (Size = 2000), @p242='?' (Size = 100), @p243='?' (Size = 50), @p244='?' (Size = 50), @p245='?' (DbType = DateTime2), @p246='?' (Size = 1000), @p247='?' (DbType = Double), @p248='?' (Size = 4000), @p249='?' (Size = 50), @p250='?' (Size = 1000), @p251='?' (Size = 500), @p252='?' (Size = 50), @p253='?' (Size = 1000), @p254='?' (DbType = Int64), @p255='?' (Size = 4), @p256='?' (Size = 100), @p257='?' (Size = 2000), @p258='?' (Size = 100), @p259='?' (Size = 50), @p260='?' (Size = 50), @p261='?' (DbType = DateTime2), @p262='?' (Size = 1000), @p263='?' (DbType = Double), @p264='?' (Size = 4000), @p265='?' (Size = 50), @p266='?' (Size = 1000), @p267='?' (Size = 500), @p268='?' (Size = 50), @p269='?' (Size = 1000), @p270='?' (DbType = Int64), @p271='?' (Size = 4), @p272='?' (Size = 100), @p273='?' (Size = 2000), @p274='?' (Size = 100), @p275='?' (Size = 50), @p276='?' (Size = 50), @p277='?' (DbType = DateTime2), @p278='?' (Size = 1000), @p279='?' (DbType = Double), @p280='?' (Size = 4000), @p281='?' (Size = 50), @p282='?' (Size = 1000), @p283='?' (Size = 500), @p284='?' (Size = 50), @p285='?' (Size = 1000), @p286='?' (DbType = Int64), @p287='?' (Size = 4), @p288='?' (Size = 100), @p289='?' (Size = 2000), @p290='?' (Size = 100), @p291='?' (Size = 50), @p292='?' (Size = 50), @p293='?' (DbType = DateTime2), @p294='?' (Size = 1000), @p295='?' (DbType = Double), @p296='?' (Size = 4000), @p297='?' (Size = 50), @p298='?' (Size = 1000), @p299='?' (Size = 500), @p300='?' (Size = 50), @p301='?' (Size = 1000), @p302='?' (DbType = Int64), @p303='?' (Size = 4), @p304='?' (Size = 100), @p305='?' (Size = 2000), @p306='?' (Size = 100), @p307='?' (Size = 50), @p308='?' (Size = 50), @p309='?' (DbType = DateTime2), @p310='?' (Size = 1000), @p311='?' (DbType = Double), @p312='?' (Size = 4000), @p313='?' (Size = 50), @p314='?' (Size = 1000), @p315='?' (Size = 500), @p316='?' (Size = 50), @p317='?' (Size = 1000), @p318='?' (DbType = Int64), @p319='?' (Size = 4)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [CachedMovies] ([Slug], [Description], [Director], [Duration], [Language], [LastUpdated], [PosterUrl], [Rating], [RawData], [Resolution], [ThumbUrl], [Title], [TmdbId], [TrailerUrl], [Views], [Year])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15),
(@p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31),
(@p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47),
(@p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63),
(@p64, @p65, @p66, @p67, @p68, @p69, @p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79),
(@p80, @p81, @p82, @p83, @p84, @p85, @p86, @p87, @p88, @p89, @p90, @p91, @p92, @p93, @p94, @p95),
(@p96, @p97, @p98, @p99, @p100, @p101, @p102, @p103, @p104, @p105, @p106, @p107, @p108, @p109, @p110, @p111),
(@p112, @p113, @p114, @p115, @p116, @p117, @p118, @p119, @p120, @p121, @p122, @p123, @p124, @p125, @p126, @p127),
(@p128, @p129, @p130, @p131, @p132, @p133, @p134, @p135, @p136, @p137, @p138, @p139, @p140, @p141, @p142, @p143),
(@p144, @p145, @p146, @p147, @p148, @p149, @p150, @p151, @p152, @p153, @p154, @p155, @p156, @p157, @p158, @p159),
(@p160, @p161, @p162, @p163, @p164, @p165, @p166, @p167, @p168, @p169, @p170, @p171, @p172, @p173, @p174, @p175),
(@p176, @p177, @p178, @p179, @p180, @p181, @p182, @p183, @p184, @p185, @p186, @p187, @p188, @p189, @p190, @p191),
(@p192, @p193, @p194, @p195, @p196, @p197, @p198, @p199, @p200, @p201, @p202, @p203, @p204, @p205, @p206, @p207),
(@p208, @p209, @p210, @p211, @p212, @p213, @p214, @p215, @p216, @p217, @p218, @p219, @p220, @p221, @p222, @p223),
(@p224, @p225, @p226, @p227, @p228, @p229, @p230, @p231, @p232, @p233, @p234, @p235, @p236, @p237, @p238, @p239),
(@p240, @p241, @p242, @p243, @p244, @p245, @p246, @p247, @p248, @p249, @p250, @p251, @p252, @p253, @p254, @p255),
(@p256, @p257, @p258, @p259, @p260, @p261, @p262, @p263, @p264, @p265, @p266, @p267, @p268, @p269, @p270, @p271),
(@p272, @p273, @p274, @p275, @p276, @p277, @p278, @p279, @p280, @p281, @p282, @p283, @p284, @p285, @p286, @p287),
(@p288, @p289, @p290, @p291, @p292, @p293, @p294, @p295, @p296, @p297, @p298, @p299, @p300, @p301, @p302, @p303),
(@p304, @p305, @p306, @p307, @p308, @p309, @p310, @p311, @p312, @p313, @p314, @p315, @p316, @p317, @p318, @p319);
2025-05-29 23:41:21.889 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'WebAppApiPhim.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'ThumbUrl', table 'Phim.dbo.CachedMovies'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:4cc329ba-9ffc-4a40-89d3-0205c8888803
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'ThumbUrl', table 'Phim.dbo.CachedMovies'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:4cc329ba-9ffc-4a40-89d3-0205c8888803
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-29 23:41:21.943 +07:00 [ERR] Error in force sync
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'ThumbUrl', table 'Phim.dbo.CachedMovies'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:4cc329ba-9ffc-4a40-89d3-0205c8888803
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at WebAppApiPhim.Controllers.AdminController.ForceSync(Int32 pages) in C:\D\Leaning\API\APICode\WebAppApiPhim\Controllers\AdminController.cs:line 92
2025-05-29 23:41:35.866 +07:00 [INF] Database insufficient, fetching from API with version fallback...
2025-05-29 23:41:35.870 +07:00 [INF] Calling API endpoint: phim-moi/v3?page=1&limit=10
2025-05-29 23:41:36.091 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '219.6035'
2025-05-29 23:41:36.097 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":835026,"name":"Dept. Q","slug":"dept-q","year":"2025","loai_phim":"series","tmdb_id":"245703","quoc_gia":"\u00c2u M\u1ef9, Anh","modified_time":"2025-05-29 20:06:59"},{"id":835024,"name":"Kh\u00e1ch S\u1ea1n C\u1ee7a B\u00e0 Broto","slug":"khach-san-cua-ba-broto","year":"2025","loai_phim":"series","tmdb_id":"285631","quoc_gia":"Indonesia","modified_time":"2025-05-29 20:06:36"},{"id":835023,"name":"K\u1ef3 l\u00e2n chuy\u1ec3n ph\u00e1t","slug":"ky-lan-chuyen-phat","year":"2025","l...
2025-05-29 23:41:36.099 +07:00 [INF] Parsed 10 movies from API response
2025-05-29 23:41:36.101 +07:00 [INF] Successfully cached 10 movies for page 1
2025-05-29 23:41:36.103 +07:00 [INF] Successfully retrieved movies using API version v3
2025-05-29 23:41:37.401 +07:00 [INF] Database insufficient, fetching from API with version fallback...
2025-05-29 23:41:37.402 +07:00 [INF] Calling API endpoint: phim-moi/v3?page=1&limit=100
2025-05-29 23:41:37.490 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '86.1608'
2025-05-29 23:41:37.496 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":835026,"name":"Dept. Q","slug":"dept-q","year":"2025","loai_phim":"series","tmdb_id":"245703","quoc_gia":"\u00c2u M\u1ef9, Anh","modified_time":"2025-05-29 20:06:59"},{"id":835024,"name":"Kh\u00e1ch S\u1ea1n C\u1ee7a B\u00e0 Broto","slug":"khach-san-cua-ba-broto","year":"2025","loai_phim":"series","tmdb_id":"285631","quoc_gia":"Indonesia","modified_time":"2025-05-29 20:06:36"},{"id":835023,"name":"K\u1ef3 l\u00e2n chuy\u1ec3n ph\u00e1t","slug":"ky-lan-chuyen-phat","year":"2025","l...
2025-05-29 23:41:37.498 +07:00 [INF] Parsed 100 movies from API response
2025-05-29 23:41:37.500 +07:00 [INF] Successfully cached 100 movies for page 1
2025-05-29 23:41:37.502 +07:00 [INF] Successfully retrieved movies using API version v3
2025-05-29 23:41:55.716 +07:00 [INF] Fetching movie detail from: phim-chi-tiet/v1?slug=ky-lan-chuyen-phat
2025-05-29 23:41:57.780 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '2061.8839'
2025-05-29 23:41:57.785 +07:00 [INF] Fetched and cached movie detail for: ky-lan-chuyen-phat
2025-05-29 23:42:11.562 +07:00 [INF] Fetching movie detail from: phim-chi-tiet/v3?slug=thieu-hoa-nhuoc-cam
2025-05-29 23:42:13.067 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '1502.1198'
2025-05-29 23:42:13.072 +07:00 [INF] Fetched and cached movie detail for: thieu-hoa-nhuoc-cam
2025-05-29 23:42:13.074 +07:00 [INF] Successfully retrieved movie thieu-hoa-nhuoc-cam using API version v3
2025-05-29 23:42:13.762 +07:00 [INF] Fetching movie detail from: phim-chi-tiet/v3?slug=ky-lan-chuyen-phat
2025-05-29 23:42:14.155 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '390.3746'
2025-05-29 23:42:14.160 +07:00 [INF] Fetched and cached movie detail for: ky-lan-chuyen-phat
2025-05-29 23:43:23.118 +07:00 [WRN] No progress found for movie ky-lan-chuyen-phat, episode 1.
2025-05-29 23:43:43.331 +07:00 [INF] Starting automatic episode sync for recent movies...
2025-05-29 23:43:43.359 +07:00 [INF] Syncing episodes for 1 recent movies
2025-05-29 23:43:43.364 +07:00 [INF] Syncing episodes for movie: thieu-hoa-nhuoc-cam
2025-05-29 23:43:43.421 +07:00 [INF] Fetching movie detail from: phim-chi-tiet/?slug=thieu-hoa-nhuoc-cam
2025-05-29 23:43:43.727 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '404', Handled: 'false', Attempt: '0', Execution Time: '303.6569'
2025-05-29 23:43:43.732 +07:00 [WRN] Movie detail API returned "NotFound" for slug: thieu-hoa-nhuoc-cam
2025-05-29 23:43:43.734 +07:00 [WRN] No episodes found in external API for movie: thieu-hoa-nhuoc-cam
2025-05-29 23:43:44.743 +07:00 [INF] Completed syncing episodes for recent movies. Added: 0, Updated: 0, Failed: 0
2025-05-29 23:43:44.745 +07:00 [INF] Episode sync completed. Added: 0, Updated: 0, Failed: 0
2025-05-29 23:54:52.477 +07:00 [INF] Database seeded successfully.
2025-05-29 23:54:52.655 +07:00 [INF] SyncMoviesService is starting.
2025-05-29 23:54:52.660 +07:00 [INF] CacheCleanupService is starting.
2025-05-29 23:54:52.663 +07:00 [INF] EpisodeSyncBackgroundService is starting.
2025-05-29 23:54:53.895 +07:00 [WRN] Failed to determine the https port for redirect.
2025-05-29 23:55:04.756 +07:00 [INF] Fetching latest movies from DuLieuPhim: /phim-moi/v1?page=1&limit=10
2025-05-29 23:55:43.670 +07:00 [INF] Fetching movie detail from DuLieuPhim: /phim-chi-tiet/con-trai-ban-me
2025-05-29 23:55:43.892 +07:00 [ERR] Error fetching movie detail for slug: kimi-to-boku-no-saigo-no-senjou-aruiwa-sekai-ga-hajimaru-seisen-season-ii
System.Net.Http.HttpRequestException: Response status code does not indicate success: 400 (Bad Request).
   at System.Net.Http.HttpResponseMessage.EnsureSuccessStatusCode()
   at WebAppApiPhim.Services.DuLieuPhimApiService.GetMovieDetailBySlugAsync(String slug) in C:\D\Leaning\API\APICode\WebAppApiPhim\Services\DuLieuPhimApiService.cs:line 82
2025-05-29 23:55:44.003 +07:00 [ERR] Error getting enhanced episodes for movie: kimi-to-boku-no-saigo-no-senjou-aruiwa-sekai-ga-hajimaru-seisen-season-ii
System.Net.Http.HttpRequestException: Response status code does not indicate success: 400 (Bad Request).
   at System.Net.Http.HttpResponseMessage.EnsureSuccessStatusCode()
   at WebAppApiPhim.Services.DuLieuPhimApiService.GetMovieDetailBySlugAsync(String slug) in C:\D\Leaning\API\APICode\WebAppApiPhim\Services\DuLieuPhimApiService.cs:line 82
   at WebAppApiPhim.Services.DirectEpisodeService.GetMovieEpisodesAsync(String movieSlug) in C:\D\Leaning\API\APICode\WebAppApiPhim\Services\DirectEpisodeService.cs:line 39
2025-05-29 23:55:52.664 +07:00 [INF] Starting intelligent movie synchronization...
2025-05-29 23:55:52.749 +07:00 [INF] Processing page 1...
2025-05-29 23:55:52.758 +07:00 [INF] Calling API endpoint: phim-moi/v3?page=1&limit=20
2025-05-29 23:55:53.097 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '237.5915'
2025-05-29 23:55:53.130 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":835026,"name":"Dept. Q","slug":"dept-q","year":"2025","loai_phim":"series","tmdb_id":"245703","quoc_gia":"\u00c2u M\u1ef9, Anh","modified_time":"2025-05-29 20:06:59"},{"id":835024,"name":"Kh\u00e1ch S\u1ea1n C\u1ee7a B\u00e0 Broto","slug":"khach-san-cua-ba-broto","year":"2025","loai_phim":"series","tmdb_id":"285631","quoc_gia":"Indonesia","modified_time":"2025-05-29 20:06:36"},{"id":835023,"name":"K\u1ef3 l\u00e2n chuy\u1ec3n ph\u00e1t","slug":"ky-lan-chuyen-phat","year":"2025","l...
2025-05-29 23:55:53.142 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 23:55:53.150 +07:00 [INF] Successfully cached 20 movies for page 1
2025-05-29 23:55:53.158 +07:00 [INF] Successfully retrieved page 1 using API version v3
2025-05-29 23:55:53.379 +07:00 [INF] Page 1: Found 20 movies, 1 already exist, 19 new movies to add (using v3)
2025-05-29 23:55:54.524 +07:00 [WRN] No images found for dept-q from any API version, using placeholder
2025-05-29 23:55:54.884 +07:00 [INF] Fetching movie detail from DuLieuPhim: /phim-chi-tiet/con-trai-ban-me
2025-05-29 23:55:55.034 +07:00 [ERR] Error fetching movie detail for slug: kimi-to-boku-no-saigo-no-senjou-aruiwa-sekai-ga-hajimaru-seisen-season-ii
System.Net.Http.HttpRequestException: Response status code does not indicate success: 400 (Bad Request).
   at System.Net.Http.HttpResponseMessage.EnsureSuccessStatusCode()
   at WebAppApiPhim.Services.DuLieuPhimApiService.GetMovieDetailBySlugAsync(String slug) in C:\D\Leaning\API\APICode\WebAppApiPhim\Services\DuLieuPhimApiService.cs:line 82
2025-05-29 23:55:55.116 +07:00 [ERR] Error getting enhanced episodes for movie: kimi-to-boku-no-saigo-no-senjou-aruiwa-sekai-ga-hajimaru-seisen-season-ii
System.Net.Http.HttpRequestException: Response status code does not indicate success: 400 (Bad Request).
   at System.Net.Http.HttpResponseMessage.EnsureSuccessStatusCode()
   at WebAppApiPhim.Services.DuLieuPhimApiService.GetMovieDetailBySlugAsync(String slug) in C:\D\Leaning\API\APICode\WebAppApiPhim\Services\DuLieuPhimApiService.cs:line 82
   at WebAppApiPhim.Services.DirectEpisodeService.GetMovieEpisodesAsync(String movieSlug) in C:\D\Leaning\API\APICode\WebAppApiPhim\Services\DirectEpisodeService.cs:line 39
2025-05-29 23:55:55.434 +07:00 [WRN] No images found for khach-san-cua-ba-broto from any API version, using placeholder
2025-05-29 23:55:56.002 +07:00 [WRN] No images found for ky-lan-chuyen-phat from any API version, using placeholder
2025-05-29 23:55:56.550 +07:00 [WRN] No images found for khom-lung from any API version, using placeholder
2025-05-29 23:55:57.068 +07:00 [WRN] No images found for ho-bao-tam-tung from any API version, using placeholder
2025-05-29 23:55:57.570 +07:00 [WRN] No images found for goosebumps-the-vanishing from any API version, using placeholder
2025-05-29 23:55:58.080 +07:00 [WRN] No images found for top-form-the-series from any API version, using placeholder
2025-05-29 23:55:58.594 +07:00 [WRN] No images found for tang-hai-truyen from any API version, using placeholder
2025-05-29 23:55:59.094 +07:00 [WRN] No images found for tai-nhan-gian from any API version, using placeholder
2025-05-29 23:55:59.614 +07:00 [WRN] No images found for ve-thoi-nao-thieu-nu-truyen-tranh from any API version, using placeholder
2025-05-29 23:56:00.123 +07:00 [WRN] No images found for sa-vao-tinh-yeu-cuong-nhiet-cua-chung-ta from any API version, using placeholder
2025-05-29 23:56:00.658 +07:00 [WRN] No images found for nghich-thien-thanh-tien from any API version, using placeholder
2025-05-29 23:56:01.178 +07:00 [WRN] No images found for deaimon from any API version, using placeholder
2025-05-29 23:56:01.674 +07:00 [WRN] No images found for the-gioi-otomegame-that-khac-nghiet-voi-nhan-vat-quan-chung from any API version, using placeholder
2025-05-29 23:56:02.179 +07:00 [WRN] No images found for spriggan from any API version, using placeholder
2025-05-29 23:56:02.685 +07:00 [WRN] No images found for cach-song-cua-thieu-nu-hanh-quyet from any API version, using placeholder
2025-05-29 23:56:03.242 +07:00 [WRN] No images found for nha-khoa-hoc-roi-vao-luoi-tinh-thu-giai-ma-nao-r1-sin0 from any API version, using placeholder
2025-05-29 23:56:03.837 +07:00 [WRN] No images found for khong-minh-thich-tiec-tung from any API version, using placeholder
2025-05-29 23:56:04.343 +07:00 [WRN] No images found for dead-end-cong-vien-ma-quai from any API version, using placeholder
2025-05-29 23:56:04.351 +07:00 [INF] Completed page 1: 19 synced, 1 skipped, 0 errors
2025-05-29 23:56:06.356 +07:00 [INF] Processing page 2...
2025-05-29 23:56:06.359 +07:00 [INF] Calling API endpoint: phim-moi/v3?page=2&limit=20
2025-05-29 23:56:06.443 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '81.0885'
2025-05-29 23:56:06.449 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":81169,"name":"Si\u00eau nh\u00f3c v\u0169 tr\u1ee5 (Ph\u1ea7n 3)","slug":"sieu-nhoc-vu-tru-phan-3","year":"2022","loai_phim":"hoathinh","tmdb_id":"116249","quoc_gia":"\u00c2u M\u1ef9","modified_time":"2025-05-29 15:39:36"},{"id":751480,"name":"Th\u1ea7n \u0110\u00f4 H\u1ed3 Th\u00e1m","slug":"than-do-ho-tham","year":"2025","loai_phim":"series","tmdb_id":"275219","quoc_gia":"Trung Qu\u1ed1c","modified_time":"2025-05-29 15:19:37"},{"id":833206,"name":"Th\u01b0\u01a1ng M\u1ebfn, Lizz...
2025-05-29 23:56:06.451 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 23:56:06.453 +07:00 [INF] Successfully cached 20 movies for page 2
2025-05-29 23:56:06.456 +07:00 [INF] Successfully retrieved page 2 using API version v3
2025-05-29 23:56:06.463 +07:00 [INF] Page 2: Found 20 movies, 0 already exist, 20 new movies to add (using v3)
2025-05-29 23:56:06.949 +07:00 [WRN] No images found for sieu-nhoc-vu-tru-phan-3 from any API version, using placeholder
2025-05-29 23:56:07.477 +07:00 [WRN] No images found for than-do-ho-tham from any API version, using placeholder
2025-05-29 23:56:07.961 +07:00 [WRN] No images found for thuong-men-lizzo from any API version, using placeholder
2025-05-29 23:56:08.474 +07:00 [WRN] No images found for the-weeknd-buoi-dien-truc-tiep-o-san-sofi from any API version, using placeholder
2025-05-29 23:56:08.992 +07:00 [WRN] No images found for the-gioi-goi-tre-em-huong-dan-ve-nhung-san-pham-giup-hanh-tinh-sach-dep from any API version, using placeholder
2025-05-29 23:56:09.501 +07:00 [WRN] No images found for thap-nhi-lien-hoa from any API version, using placeholder
2025-05-29 23:56:10.001 +07:00 [WRN] No images found for thanh-xuan-thuc-giac-gap-lai-nhung-guong-mat-than-quen from any API version, using placeholder
2025-05-29 23:56:10.488 +07:00 [WRN] No images found for taxi-taxi from any API version, using placeholder
2025-05-29 23:56:11.003 +07:00 [WRN] No images found for su-thuc-day-cham-chap from any API version, using placeholder
2025-05-29 23:56:11.517 +07:00 [WRN] No images found for su-that-kho-chap-nhan from any API version, using placeholder
2025-05-29 23:56:12.064 +07:00 [WRN] No images found for stockton-trong-long-toi from any API version, using placeholder
2025-05-29 23:56:12.577 +07:00 [WRN] No images found for song-than-hau-qua from any API version, using placeholder
2025-05-29 23:56:13.080 +07:00 [WRN] No images found for song-cung-lincoln from any API version, using placeholder
2025-05-29 23:56:13.597 +07:00 [WRN] No images found for san-francisco-20 from any API version, using placeholder
2025-05-29 23:56:14.115 +07:00 [WRN] No images found for san-da-noi-tieng from any API version, using placeholder
2025-05-29 23:56:14.612 +07:00 [WRN] No images found for robin-williams-buoc-vao-tam-tri-toi from any API version, using placeholder
2025-05-29 23:56:15.125 +07:00 [WRN] No images found for ricky-velez-day-la-tat-ca from any API version, using placeholder
2025-05-29 23:56:15.649 +07:00 [WRN] No images found for qua-trinh-san-xuat-nhung-nguoi-con-sot-lai from any API version, using placeholder
2025-05-29 23:56:16.233 +07:00 [WRN] No images found for phong-kham-american-pain from any API version, using placeholder
2025-05-29 23:56:16.770 +07:00 [WRN] No images found for pete-holmes-tot-khoe-xau-che from any API version, using placeholder
2025-05-29 23:56:16.778 +07:00 [INF] Completed page 2: 20 synced, 0 skipped, 0 errors
2025-05-29 23:56:18.781 +07:00 [INF] Processing page 3...
2025-05-29 23:56:18.784 +07:00 [INF] Calling API endpoint: phim-moi/v3?page=3&limit=20
2025-05-29 23:56:18.866 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '200', Handled: 'false', Attempt: '0', Execution Time: '80.662'
2025-05-29 23:56:18.871 +07:00 [INF] Raw API Response (first 500 chars): {"data":[{"id":831863,"name":"T\u1ea5t T\u1eadt V\u1ec1 V\u1ee3 T\u00f4i","slug":"tat-tat-ve-vo-toi","year":"2025","loai_phim":"single","tmdb_id":"1176529","quoc_gia":"Philippines","modified_time":"2025-05-29 11:30:45"},{"id":831815,"name":"G\u00f3c Khu\u1ea5t","slug":"goc-khuat-2025","year":"2025","loai_phim":"single","tmdb_id":"1244890","quoc_gia":"\u00c2u M\u1ef9, Canada","modified_time":"2025-05-29 11:17:39"},{"id":804122,"name":"Thanh Kh\u00e2m Ch\u00ed","slug":"thanh-kham-chi","year":"2025...
2025-05-29 23:56:18.873 +07:00 [INF] Parsed 20 movies from API response
2025-05-29 23:56:18.875 +07:00 [INF] Successfully cached 20 movies for page 3
2025-05-29 23:56:18.877 +07:00 [INF] Successfully retrieved page 3 using API version v3
2025-05-29 23:56:18.883 +07:00 [INF] Page 3: Found 20 movies, 0 already exist, 20 new movies to add (using v3)
2025-05-29 23:56:19.399 +07:00 [WRN] No images found for tat-tat-ve-vo-toi from any API version, using placeholder
2025-05-29 23:56:19.916 +07:00 [WRN] No images found for goc-khuat-2025 from any API version, using placeholder
2025-05-29 23:56:20.423 +07:00 [WRN] No images found for thanh-kham-chi from any API version, using placeholder
2025-05-29 23:56:20.977 +07:00 [WRN] No images found for thieu-dot-con-tim from any API version, using placeholder
2025-05-29 23:56:21.480 +07:00 [WRN] No images found for thien-kim-nhat-trich from any API version, using placeholder
2025-05-29 23:56:21.985 +07:00 [WRN] No images found for trieu-duong-chi-vu-da from any API version, using placeholder
2025-05-29 23:56:22.485 +07:00 [WRN] No images found for ga-nham-the-tu-phi from any API version, using placeholder
2025-05-29 23:56:22.991 +07:00 [WRN] No images found for ke-dam-phan from any API version, using placeholder
2025-05-29 23:56:23.507 +07:00 [WRN] No images found for khoe-truoc-yeu-sau from any API version, using placeholder
2025-05-29 23:56:24.006 +07:00 [WRN] No images found for hoa-giang-ho-chi-bat-luong-nhan-phan-7 from any API version, using placeholder
2025-05-29 23:56:24.498 +07:00 [WRN] No images found for your-forma from any API version, using placeholder
2025-05-29 23:56:25.008 +07:00 [WRN] No images found for vi-vua-manh-nhat-lam-gi-o-kiep-thu-hai from any API version, using placeholder
2025-05-29 23:56:25.547 +07:00 [WRN] No images found for mua-xuan-tuoi-tre from any API version, using placeholder
2025-05-29 23:56:26.054 +07:00 [WRN] No images found for pho-fear-nu-hoang-da-hoi from any API version, using placeholder
2025-05-29 23:56:26.575 +07:00 [WRN] No images found for tro-choi-ke-nghiep from any API version, using placeholder
2025-05-29 23:56:27.075 +07:00 [WRN] No images found for mau-em-la-hoi-tho-cua-toi from any API version, using placeholder
2025-05-29 23:56:27.576 +07:00 [WRN] No images found for 9-manh-ghep from any API version, using placeholder
2025-05-29 23:56:28.096 +07:00 [WRN] No images found for nhan-sinh-giong-nhu-thuo-dau-gap-go from any API version, using placeholder
2025-05-29 23:56:28.608 +07:00 [WRN] No images found for pho-mai-chinh-phu-tro-cap from any API version, using placeholder
2025-05-29 23:56:29.122 +07:00 [WRN] No images found for f1-academy from any API version, using placeholder
2025-05-29 23:56:29.131 +07:00 [INF] Completed page 3: 20 synced, 0 skipped, 0 errors
2025-05-29 23:56:31.135 +07:00 [INF] Movie synchronization completed. Total: 59 synced, 1 skipped, 0 errors
2025-05-29 23:57:19.516 +07:00 [WRN] Login failed: User with email quocduy@gmail.com not found.
2025-05-29 23:57:55.149 +07:00 [WRN] Login failed: User with email quocduy@gmail.com not found.
2025-05-29 23:58:35.454 +07:00 [WRN] Login failed: User with email quocduy@gmail.com not found.
2025-05-29 23:58:41.824 +07:00 [WRN] Login failed: User with email quocduy@gmail.com not found.
2025-05-29 23:59:09.102 +07:00 [INF] User quocduy registered successfully.
2025-05-29 23:59:35.596 +07:00 [INF] User quocduy logged in successfully.
2025-05-29 23:59:52.668 +07:00 [INF] Starting automatic episode sync for recent movies...
2025-05-29 23:59:52.705 +07:00 [INF] Syncing episodes for 20 recent movies
2025-05-29 23:59:52.712 +07:00 [INF] Syncing episodes for movie: f1-academy
2025-05-29 23:59:52.819 +07:00 [INF] Fetching movie detail from: phim-chi-tiet/?slug=f1-academy
2025-05-29 23:59:53.083 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '404', Handled: 'false', Attempt: '0', Execution Time: '261.2604'
2025-05-29 23:59:53.088 +07:00 [WRN] Movie detail API returned "NotFound" for slug: f1-academy
2025-05-29 23:59:53.091 +07:00 [WRN] No episodes found in external API for movie: f1-academy
2025-05-29 23:59:54.093 +07:00 [INF] Syncing episodes for movie: pho-mai-chinh-phu-tro-cap
2025-05-29 23:59:54.099 +07:00 [INF] Fetching movie detail from: phim-chi-tiet/?slug=pho-mai-chinh-phu-tro-cap
2025-05-29 23:59:54.181 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '404', Handled: 'false', Attempt: '0', Execution Time: '80.0553'
2025-05-29 23:59:54.186 +07:00 [WRN] Movie detail API returned "NotFound" for slug: pho-mai-chinh-phu-tro-cap
2025-05-29 23:59:54.188 +07:00 [WRN] No episodes found in external API for movie: pho-mai-chinh-phu-tro-cap
2025-05-29 23:59:55.191 +07:00 [INF] Syncing episodes for movie: nhan-sinh-giong-nhu-thuo-dau-gap-go
2025-05-29 23:59:55.196 +07:00 [INF] Fetching movie detail from: phim-chi-tiet/?slug=nhan-sinh-giong-nhu-thuo-dau-gap-go
2025-05-29 23:59:55.279 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '404', Handled: 'false', Attempt: '0', Execution Time: '80.5468'
2025-05-29 23:59:55.285 +07:00 [WRN] Movie detail API returned "NotFound" for slug: nhan-sinh-giong-nhu-thuo-dau-gap-go
2025-05-29 23:59:55.287 +07:00 [WRN] No episodes found in external API for movie: nhan-sinh-giong-nhu-thuo-dau-gap-go
2025-05-29 23:59:56.290 +07:00 [INF] Syncing episodes for movie: 9-manh-ghep
2025-05-29 23:59:56.298 +07:00 [INF] Fetching movie detail from: phim-chi-tiet/?slug=9-manh-ghep
2025-05-29 23:59:56.380 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '404', Handled: 'false', Attempt: '0', Execution Time: '80.2594'
2025-05-29 23:59:56.385 +07:00 [WRN] Movie detail API returned "NotFound" for slug: 9-manh-ghep
2025-05-29 23:59:56.387 +07:00 [WRN] No episodes found in external API for movie: 9-manh-ghep
2025-05-29 23:59:57.389 +07:00 [INF] Syncing episodes for movie: mau-em-la-hoi-tho-cua-toi
2025-05-29 23:59:57.395 +07:00 [INF] Fetching movie detail from: phim-chi-tiet/?slug=mau-em-la-hoi-tho-cua-toi
2025-05-29 23:59:57.480 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '404', Handled: 'false', Attempt: '0', Execution Time: '83.0986'
2025-05-29 23:59:57.486 +07:00 [WRN] Movie detail API returned "NotFound" for slug: mau-em-la-hoi-tho-cua-toi
2025-05-29 23:59:57.488 +07:00 [WRN] No episodes found in external API for movie: mau-em-la-hoi-tho-cua-toi
2025-05-29 23:59:58.489 +07:00 [INF] Syncing episodes for movie: tro-choi-ke-nghiep
2025-05-29 23:59:58.494 +07:00 [INF] Fetching movie detail from: phim-chi-tiet/?slug=tro-choi-ke-nghiep
2025-05-29 23:59:58.576 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '404', Handled: 'false', Attempt: '0', Execution Time: '80.0361'
2025-05-29 23:59:58.581 +07:00 [WRN] Movie detail API returned "NotFound" for slug: tro-choi-ke-nghiep
2025-05-29 23:59:58.583 +07:00 [WRN] No episodes found in external API for movie: tro-choi-ke-nghiep
2025-05-29 23:59:59.586 +07:00 [INF] Syncing episodes for movie: pho-fear-nu-hoang-da-hoi
2025-05-29 23:59:59.593 +07:00 [INF] Fetching movie detail from: phim-chi-tiet/?slug=pho-fear-nu-hoang-da-hoi
2025-05-29 23:59:59.675 +07:00 [INF] Execution attempt. Source: 'IMovieApiService-MovieApiResilience//Retry', Operation Key: 'null', Result: '404', Handled: 'false', Attempt: '0', Execution Time: '78.7955'
2025-05-29 23:59:59.681 +07:00 [WRN] Movie detail API returned "NotFound" for slug: pho-fear-nu-hoang-da-hoi
2025-05-29 23:59:59.683 +07:00 [WRN] No episodes found in external API for movie: pho-fear-nu-hoang-da-hoi
